(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{238:function(e,t,n){"use strict";(function(e){u(n(299)),u(n(283)),u(n(284)),u(n(286)),u(n(287)),u(n(290)),u(n(406));var t=u(n(15)),o=u(n(0)),a=u(n(2)),i=u(n(29)),s=d(n(3)),r=u(n(281)),l=u(n(25)),c=d(n(282));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}n(332),n(408),n(410),n(411),n(412),n(413),n(280),n(298),n(63),e(document).ready(function(){var n=null,d=null,u=(0,l.default)(window.location).segment(-1),p=null,h=null,g=null,_=null,m=null,f=null,v=null,b=null,y=null,x=null,w=null,A=null,k=null,C=null,S=null,T=null,E=null,j=null,z=null,R=null,I=null,O=null,M=null,N=null,B=null,L=null,D=!1,P=!1,H=!1,U=!1,q=!1,V=(document.createElement("a"),[{}]),G=e("#remote-login-dialog");G.dialog({autoOpen:!1,width:700,height:300,modal:!0,close:function(){e("#remote-password",this).val("")},open:function(){}}),e("#remote-password",G).keypress(function(t){13==t.keyCode&&e(".ui-dialog-buttonset",G.parent()).find("button:contains(Login)").trigger("click")}),e("#parameter-image-plus-layout").layout({north:{size:28,resizable:!1},center:{},west:{size:e("#parameter-image-plus-layout").width()/2,resizeWhileDragging:!1,onresize:function(){e("#dendrogram-viewer").dendrogram("resize_canvas")}},south:{size:e("#parameter-image-plus-layout").height()/4,resizeWhileDragging:!1,onresize:function(){e("#table").css("height",e("#table-pane").height()),e("#table").table("resize_canvas")}}}),e("#model-pane").layout({center:{resizeWhileDragging:!1,onresize:function(){e("#scatterplot").scatterplot("option",{width:e("#scatterplot-pane").width(),height:e("#scatterplot-pane").height()})}}}),e.ajax({type:"GET",url:t.default+"models/"+u,success:function(o){n=o,f=i.default.create(n.project,n._id),p=n["artifact:input-columns"],h=n["artifact:output-columns"],g=n["artifact:image-columns"],_=void 0==n["artifact:rating-columns"]?[]:n["artifact:rating-columns"],m=void 0==n["artifact:category-columns"]?[]:n["artifact:category-columns"],null!==(d=n["artifact:default-image"])&&void 0!==d||(d=0),function(){if("waiting"==n.state||"running"==n.state)return void F();if("closed"==n.state&&null===n.result)return;if("failed"==n.result)return;e(".load-status").text("Loading data."),e.ajax({url:t.default+"models/"+u+"/files/clusters",contentType:"application/json",success:function(e){b=e,x=new Array(b.length),X(),$(),K()},error:Y}),e.ajax({url:t.default+"models/"+u+"/tables/data-table/arrays/0/metadata?index=Index",contentType:"application/json",success:function(e){w=e,(A=new Array(e["column-count"]))[e["column-count"]-1]={max:e["row-count"]-1,min:0},he(r.default.range(e["column-count"]-1),Q)},error:Y}),f.getState(function(n){y=void 0!==(v=n)["cluster-index"]?v["cluster-index"]:0,X(),$(),function(){var n=void 0!==v.colormap?v.colormap:"night";e("#color-switcher").colorswitcher({colormap:n}),e("#color-switcher").bind("colormap-changed",function(n,o){!function(n){se(),e("#dendrogram-viewer").dendrogram("option","colorscale",N),e("#dendrogram-leaf-backdrop").css({"background-color":e("#color-switcher").colorswitcher("get_background").toString()}),e("#table").table("option","colorscale",N),e("#scatterplot-pane").css("background",e("#color-switcher").colorswitcher("get_background",n).toString()),e("#scatterplot").scatterplot("option",{colorscale:N,gradient:e("#color-switcher").colorswitcher("get_gradient_data",n)}),e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/colormap/"+n}),f.updateState({colormap:n})}(o)})}(),Q()})}()},error:function(e,t,n){window.alert("Error retrieving model: "+n)}});var F=function(){var t=e("#parameter-image-plus-layout").children()[0],a=e(t);a.detach(),e(e("#parameter-image-plus-layout").children()).remove(),e("#parameter-image-plus-layout").append(a),o.default.dataFor(e(".slycat-job-checker")[0]).set_jid(n["artifact:jid"])};function Y(){e(".load-status").css("display","none"),s.dialog({title:"Load Error",message:"Oops, there was a problem retrieving data from the model. This likely means that there was a problem during computation."})}function J(e){var t={cluster:e};return t.collapsed_nodes=v[e+"-collapsed-nodes"],t.expanded_nodes=v[e+"-expanded-nodes"],t.selected_nodes=v[e+"-selected-nodes"],t.highlight=v[e+"-selected-row-simulations"],t}function X(){q||null==y||null==b||(q=!0,e.ajax({url:t.default+"models/"+u+"/files/cluster-"+b[y],contentType:"application/json",success:function(e){x[y]=e,K()},error:Y}))}function Q(){if(W(),!k&&w){var n=w["row-count"];k=new Int32Array(n);for(var o=0;o!=n;++o)k[o]=o}if($(),w&&v){var a=[];for(o=0;o<w["column-count"]-1;o++)"string"!=w["column-types"][o]&&-1==_.indexOf(o)&&-1==m.indexOf(o)&&a.push(o);if(C=a[0],S=a[1%a.length],"x-selection"in v&&(C=Number(v["x-selection"])),"y-selection"in v&&(S=Number(v["y-selection"])),B=!0,"auto-scale"in v&&(B=v["auto-scale"]),O=[],"simulation-selection"in v&&(O=v["simulation-selection"]),M=[],"hidden-simulations"in v&&(M=v["hidden-simulations"]),c.get_model_array_attribute({api_root:t.default,mid:u,aid:"data-table",array:0,attribute:C,success:function(e){j=e,"string"==w["column-types"][C]&&(j=j[0]),Z(),W()},error:Y}),c.get_model_array_attribute({api_root:t.default,mid:u,aid:"data-table",array:0,attribute:S,success:function(e){z=e,"string"==w["column-types"][S]&&(z=z[0]),Z(),W()},error:Y}),T=w["column-count"]-1,"variable-selection"in v&&(T=Number(v["variable-selection"])),T==w["column-count"]-1){n=w["row-count"];R=new Float64Array(n);for(o=0;o!=n;++o)R[o]=o;se(),Z(),W(),K()}else c.get_model_array_attribute({api_root:t.default,mid:u,aid:"data-table",array:0,attribute:T,success:function(e){R=e,"string"==w["column-types"][T]&&(R=R[0]),se(),Z(),W(),K()},error:Y});E=g[d],"images-selection"in v&&(E=v["images-selection"]),W(),g.length>0?e.ajax({type:"GET",url:t.default+"models/"+u+"/arraysets/data-table/data?hyperchunks=0/"+E+"/0:"+w["row-count"],success:function(e){I=e[0],Z(),K()},error:Y}):(I=void 0,Z(),K()),$()}}function K(){if(!U&&v&&null!=b&&null!=y&&null!=x&&void 0!==x[y]&&N&&R&&null!=O&&null!==I){U=!0,console.log("dendrogram ready to be initiated."),e("#dendrogram-pane .load-status").css("display","none"),e("#dendrogram-leaf-backdrop").css({"background-color":e("#color-switcher").colorswitcher("get_background").toString()});var n=J(y);n.clusters=b,n.cluster_data=x[y],n.colorscale=N,n.color_array=R,n.images=I,n.cache_references=V,n.login_dialog=G,void 0!=v["sort-variable"]&&(n.dendrogram_sort_order=!1),n.highlight=O,e("#dendrogram-viewer").dendrogram(n),e("#dendrogram-viewer").bind("node-selection-changed",function(n,o){!function(n){null!=n.node&&null!=n.node["node-index"]&&e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/node/"+n.node["node-index"]});if(1!=n.skip_bookmarking){var o={};o[y+"-selected-nodes"]=ee(n.selection,"node-index"),o[y+"-selected-image-indexes"]=ee(n.selection,"image-index"),f.updateState(o)}}(o)}),e("#dendrogram-viewer").bind("node-selection-changed",function(e,t){if(1!=t.skip_bookmarking){for(var n=ee(t.selection,"image-index");M.length>0;)M.pop();for(var o=0;o<k.length;o++){var a=k[o];n.indexOf(a)<0&&M.push(a)}ie(!0)}}),e("#dendrogram-viewer").bind("expanded-collapsed-nodes-changed",function(e,t){!function(e){var t={};t[y+"-expanded-nodes"]=e.expanded,t[y+"-collapsed-nodes"]=e.collapsed,f.updateState(t)}(t)}),e("#dendrogram-viewer").bind("node-toggled",function(n,o){!function(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/toggle/node/"+n["node-index"]})}(o)}),e("#dendrogram-viewer").bind("selection-changed",function(t,n){e("#table").table("option","row-selection",n),e("#controls").controls("option","selection",n),e("#scatterplot").scatterplot("option","selection",n),re(n)})}}function W(){if(!D&&w&&A.length==w["column-count"]&&N&&v&&null!=C&&null!=S&&null!==E&&null!=O&&null!=M){D=!0,e("#table-pane .load-status").css("display","none");for(var n=[],o=0;o!=w["column-count"]-1;++o)-1==e.inArray(o,p)&&-1==e.inArray(o,h)&&-1==e.inArray(o,_)&&-1==e.inArray(o,m)&&n.push(o);var a={api_root:t.default,mid:u,aid:"data-table",metadata:w,statistics:A,inputs:p,outputs:h,others:n,images:g,ratings:_,categories:m,"image-variable":E,"x-variable":C,"y-variable":S,"row-selection":O,hidden_simulations:M};void 0!==v.colormap&&v.colormap;a.colorscale=N,"sort-variable"in v&&"sort-order"in v&&(a["sort-variable"]=v["sort-variable"],a["sort-order"]=v["sort-order"]),a["variable-selection"]="variable-selection"in v?[v["variable-selection"]]:[w["column-count"]-1],e("#table").table(a),e("#table").bind("variable-sort-changed",function(n,o,a){!function(n,o){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/sort-order/"+n+"/"+o}),f.updateState({"sort-variable":n,"sort-order":o})}(o,a)}),e("#table").bind("x-selection-changed",function(e,t){le(t)}),e("#table").bind("y-selection-changed",function(e,t){ce(t)}),e("#table").bind("row-selection-changed",function(t,n){for(var o=[],a=0;a!=n.length;++a)o.push(n[a]);re(o),e("#scatterplot").scatterplot("option","selection",o),e("#controls").controls("option","selection",o),e("#dendrogram-viewer").dendrogram("option","highlight",o)}),e("#scatterplot").bind("selection-changed",function(t,n){e("#table").table("option","row-selection",n),e("#controls").controls("option","selection",n),e("#dendrogram-viewer").dendrogram("option","highlight",n)}),e("#controls").bind("x-selection-changed",function(t,n){e("#table").table("option","x-variable",n)}),e("#controls").bind("y-selection-changed",function(t,n){e("#table").table("option","y-variable",n)}),e("#controls").bind("images-selection-changed",function(t,n){e("#table").table("option","image-variable",n)}),e("#table").bind("variable-selection-changed",function(t,n){e("#controls").controls("option","color-variable",n[0]),te(n[0])}),e("#controls").bind("color-selection-changed",function(t,n){e("#table").table("option","variable-selection",[Number(n)]),te(n)})}}function Z(){if(!P&&v&&k&&j&&z&&R&&null!==I&&N&&null!=O&&null!=M&&null!=B){P=!0,e("#scatterplot-pane .load-status").css("display","none");var n=void 0!==v.colormap?v.colormap:"night";e("#scatterplot-pane").css("background",e("#color-switcher").colorswitcher("get_background",n).toString());var o=[];"open-images-selection"in v&&(o=v["open-images-selection"]),e("#scatterplot").scatterplot({indices:k,x_label:w["column-names"][C],y_label:w["column-names"][S],v_label:w["column-names"][T],x:j,y:z,v:R,x_string:"string"==w["column-types"][C],y_string:"string"==w["column-types"][S],v_string:"string"==w["column-types"][T],images:I,width:e("#scatterplot-pane").width(),height:e("#scatterplot-pane").height(),colorscale:N,selection:O,open_images:o,gradient:e("#color-switcher").colorswitcher("get_gradient_data",n),hidden_simulations:M,"auto-scale":B,cache_references:V,login_dialog:G}),e("#scatterplot").bind("selection-changed",function(e,t){re(t)}),e("#table").bind("x-selection-changed",function(e,t){ue(t)}),e("#controls").bind("x-selection-changed",function(e,t){ue(t)}),e("#table").bind("y-selection-changed",function(e,t){pe(t)}),e("#controls").bind("y-selection-changed",function(e,t){pe(t)}),e("#table").bind("images-selection-changed",function(e,t){ne(t)}),e("#controls").bind("images-selection-changed",function(e,t){ne(t)}),e("#scatterplot").bind("open-images-changed",function(n,o){!function(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/openimages/count/"+n.length}),f.updateState({"open-images-selection":n})}(o)})}}function $(){if(!H&&w&&null!==g&&null!=_&&null!=m&&null!=C&&null!=S&&null!=B&&null!==E&&null!=O&&null!=M&&k){H=!0;for(var n=[],o=[],a=[],i=0;i<w["column-count"];i++)"string"!=w["column-types"][i]&&n.push(i),-1==g.indexOf(i)&&w["column-count"]-1>i&&o.push(i),-1==g.indexOf(i)&&a.push(i);var s=w["column-count"]-1;"variable-selection"in v&&(s=[v["variable-selection"]]),e("#controls").controls({mid:u,model_name:window.model_name,aid:"data-table",metadata:w,x_variables:o,y_variables:o,image_variables:g,color_variables:a,rating_variables:_,category_variables:m,selection:O,"x-variable":C,"y-variable":S,"image-variable":E,"color-variable":s,"auto-scale":B,hidden_simulations:M,indices:k}),e("#table").bind("x-selection-changed",function(t,n){e("#controls").controls("option","x-variable",n)}),e("#table").bind("y-selection-changed",function(t,n){e("#controls").controls("option","y-variable",n)}),e("#table").bind("images-selection-changed",function(t,n){e("#controls").controls("option","image-variable",n)}),e("#controls").bind("set-value",function(n,o){!function(n,o,a){for(var i="",s="[",r=0;r<n.length;r++)r>0&&(i+="|",s+=","),i+=n[r],s+="["+a+"]";s+="]";var l=new Blob([s],{type:"text/html"}),c=new FormData;c.append("data",l),c.append("hyperchunks","0/"+o+"/"+i),e.ajax({type:"PUT",url:t.default+"models/"+u+"/arraysets/data-table/data",data:c,processData:!1,contentType:!1,success:function(t){e("#table").table("update_data"),o==C&&ue(o),o==S&&pe(o),he([o],function(){e("#table").table("option","statistics",A),o==T&&oe(o)})},error:function(e,t,n){console.log("writing array data error")}})}(o.selection,o.variable,o.value)}),e("#controls").bind("x-selection-changed",function(e,t){le(t)}),e("#controls").bind("y-selection-changed",function(e,t){ce(t)}),e("#controls").bind("auto-scale",function(e,t){de(t)}),e("#controls").bind("hide-selection",function(t,n){for(var o=0;o<O.length;o++)-1==e.inArray(O[o],M)&&M.push(O[o]);ie()}),e("#controls").bind("show-selection",function(t,n){for(var o=0;o<O.length;o++){var a=e.inArray(O[o],M);-1!=a&&M.splice(a,1)}ie()}),e("#controls").bind("pin-selection",function(t,n){for(var o=[],a=0;a<O.length;a++){-1==e.inArray(O[a],M)&&o.push(O[a])}e("#scatterplot").scatterplot("pin",o)}),e("#controls").bind("show-all",function(e,t){for(;M.length>0;)M.pop();ie()})}}function ee(e,t){for(var n=[],o=null,a=0;a<e.length;a++)null!=(o=e[a][t])&&n.push(o);return n}function te(n){if((T=Number(n))==w["column-count"]-1){for(var o=w["row-count"],a=0;a!=o;++a)R[a]=a;ae()}else oe(n);e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/variable/"+n}),f.updateState({"variable-selection":n})}function ne(n){E=Number(n),y=b.indexOf(w["column-names"][E]),e.ajax({type:"GET",url:t.default+"models/"+u+"/arraysets/data-table/data?hyperchunks=0/"+E+"/0:"+w["row-count"],success:function(n){I=n[0],e("#scatterplot").scatterplot("option","images",I),e("#dendrogram-viewer").dendrogram("option","images",I),function(n){if(void 0===x[n])e.ajax({url:t.default+"models/"+u+"/files/cluster-"+b[n],contentType:"application/json",success:function(t){x[n]=t;var o=J(n);o.cluster_data=x[n],e("#dendrogram-viewer").dendrogram("option",o)},error:Y});else{var o=J(n);o.cluster_data=x[n],e("#dendrogram-viewer").dendrogram("option",o)}}(y)},error:Y}),function(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/images/"+n}),f.updateState({"images-selection":n})}(E),function(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/cluster/"+n}),f.updateState({"cluster-index":n})}(y)}function oe(e){c.get_model_array_attribute({api_root:t.default,mid:u,aid:"data-table",array:0,attribute:e,success:function(t){R=t,"string"==w["column-types"][e]&&(R=R[0]),ae()},error:Y})}function ae(){se(),e("#table").table("option","colorscale",N),e("#scatterplot").scatterplot("update_color_scale_and_v",{v:R,v_string:"string"==w["column-types"][T],colorscale:N}),e("#scatterplot").scatterplot("option","v_label",w["column-names"][T]),e("#dendrogram-viewer").dendrogram("option","color-options",{color_array:R,colorscale:N})}function ie(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/hidden/count/"+M.length}),f.updateState({"hidden-simulations":M}),B?(se(),e("#table").table("option",{hidden_simulations:M,colorscale:N}),e("#scatterplot").scatterplot("option",{hidden_simulations:M,colorscale:N}),n||e("#dendrogram-viewer").dendrogram("option",{hidden_simulations:M,colorscale:N})):(e("#table").table("option","hidden_simulations",M),e("#scatterplot").scatterplot("option","hidden_simulations",M),n||e("#dendrogram-viewer").dendrogram("option","hidden_simulations",M)),e("#controls").controls("option","hidden_simulations",M)}function se(){var t=w["column-types"][T];if(L=B?function(e){M.sort(r.default.ascending);for(var t=M.length,n=function(e){if(e.length>1)return Array.apply([],e);if(1==e.length)return[e[0]];return[]}(e),o=t-1;o>=0;o--)n.splice(M[o],1);return n}(R):R,"string"!=t)N=e("#color-switcher").colorswitcher("get_color_scale",void 0,r.default.min(L),r.default.max(L));else{var n=r.default.set(L).values().sort();N=e("#color-switcher").colorswitcher("get_color_scale_ordinal",void 0,n)}}function re(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/simulation/count/"+n.length}),f.updateState({"simulation-selection":n}),O=n}function le(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/x/"+n}),f.updateState({"x-selection":n}),C=Number(n)}function ce(n){e.ajax({type:"POST",url:t.default+"events/models/"+u+"/select/y/"+n}),f.updateState({"y-selection":n}),S=Number(n)}function de(n){B=n,M.length>0?(se(),e("#dendrogram-viewer").dendrogram("option","colorscale",N),e("#table").table("option","colorscale",N),e("#scatterplot").scatterplot("option",{colorscale:N,"auto-scale":B})):e("#scatterplot").scatterplot("option","auto-scale",B),e.ajax({type:"POST",url:t.default+"events/models/"+u+"/auto-scale/"+B}),f.updateState({"auto-scale":B})}function ue(n){c.get_model_array_attribute({api_root:t.default,mid:u,aid:"data-table",array:0,attribute:n,success:function(t){e("#scatterplot").scatterplot("option",{x_string:"string"==w["column-types"][n],x:"string"==w["column-types"][n]?t[0]:t,x_label:w["column-names"][n]})},error:Y})}function pe(n){c.get_model_array_attribute({api_root:t.default,mid:u,aid:"data-table",array:0,attribute:n,success:function(t){e("#scatterplot").scatterplot("option",{y_string:"string"==w["column-types"][n],y:"string"==w["column-types"][n]?t[0]:t,y_label:w["column-names"][n]})},error:Y})}function he(e,t){a.default.get_model_arrayset_metadata({mid:u,aid:"data-table",statistics:"0/"+e.join("|"),success:function(e){for(var n=e.statistics,o=0;o!=n.length;++o)A[n[o].attribute]={min:n[o].min,max:n[o].max};t()}})}})}).call(this,n(1))},282:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.is_little_endian=n,t.get_model_array_attribute_metadata=o,t.cast_array_buffer=a,t.get_model_array_attribute=function(t){var i=e.Deferred();void 0===t.metadata?(t.metadataSuccess=s,o(t,i)):s(t);return i;function s(e){var t=[],o="",s=e.metadata,r=e.attribute,l="string"==s.attributes[r].type,c="&byteorder="+(n()?"little":"big");for(var d in l&&(c=""),s.dimensions)o="",o+=s.dimensions[d].begin,o+=":",o+=s.dimensions[d].end,t.push(o);t=t.join("|");var u=new XMLHttpRequest;u.open("GET",e.api_root+"models/"+e.mid+"/arraysets/"+e.aid+"/data?hyperchunks="+e.array+"/"+e.attribute+"/"+t+c),l||(u.responseType="arraybuffer"),u.success=e.success,u.attribute=e.attribute,u.metadata=s,u.isStringAttribute=l,u.onload=function(e){var t=this.response,n=this.metadata,o=this.metadata.attributes[this.attribute];if(1==n.dimensions.length)l=this.isStringAttribute?JSON.parse(this.responseText):a(t,o.type);else if(2==n.dimensions.length)for(var s=n.dimensions[0].end-n.dimensions[0].begin,r=n.dimensions[1].end-n.dimensions[1].begin,l=[],c=0;c!=s;++c)l.push(a(t,o.type,c*r,r));else window.alert("Can't handle array with "+n.dimensions.length+" dimensions.");this.success(l),i.resolve()},u.send()}};t.arrayset_metadata_cache={};function n(){return void 0===window.result&&(window.result=67305985===new Uint32Array(new Uint8Array([1,2,3,4]).buffer)[0]),window.result}function o(t,n){return e.ajax({url:t.api_root+"models/"+t.mid+"/arraysets/"+t.aid+"/metadata?arrays="+t.array,contentType:"application/json",success:function(e){t.metadata=e.arrays[0],void 0!==t.metadataSuccess?t.metadataSuccess(t):t.success(t)},error:function(e,n,o){t.error&&t.error(e,n,o)},always:function(){n.resolve()}})}function a(e,t,n,o){return"int32"==t?void 0!==n?new Int32Array(e,4*n,o):new Int32Array(e):"int16"==t?void 0!==n?new Int16Array(e,2*n,o):new Int16Array(e):"int8"==t?void 0!==n?new Int8Array(e,n,o):new Int8Array(e):"uint32"==t?void 0!==n?new Uint32Array(e,4*n,o):new Uint32Array(e):"uint16"==t?void 0!==n?new Uint16Array(e,2*n,o):new Uint16Array(e):"uint8"==t?void 0!==n?new Uint8Array(e,n,o):new Uint8Array(e):"float64"==t?void 0!==n?new Float64Array(e,8*n,o):new Float64Array(e):"float32"==t?void 0!==n?new Float32Array(e,4*n,o):new Float32Array(e):void console.error("Unknown array buffer type: "+t)}}).call(this,n(1))},290:function(e,t,n){var o=n(291);"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,a);o.locals&&(e.exports=o.locals)},291:function(e,t,n){(e.exports=n(36)(!1)).push([e.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract\n DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government\n retains certain rights in this software. */\n\n.vertical {\n  -ms-transform: rotate(-90deg);\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n}\n\n.unvertical {\n  -ms-transform: rotate(90deg);\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n\n.light-border-right {\n  border-right: 2px solid rgb(231, 231, 231);\n}\n\n.affix-top-right {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n\n.fill-parent-width {\n  width: 100%;\n}\n\n.link-cursor {\n  cursor: pointer;\n}\n\n.default-cursor {\n  cursor: inherit;\n}\n\n.info-panel {\n  border-left: 2px solid #1b809e !important;\n}\n\n.vertical-toggle-pane-resizer {\n  right-border: 2px solid rgb(231,231,231);\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n",""])},301:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.login=c,t.create_pool=function(){var e={},t={check_remote:function(e){o.default.get_remotes({hostname:e.hostname,success:function(t){e.success&&e.success(t)},error:function(t,n,o){e.error&&e.error(t,n,o)}})}};return t.get_remote=function(e){t.check_remote({hostname:e.hostname,get_remote_params:e,success:function(t){t.status?e.success&&e.success(e.hostname):c({hostname:e.hostname,title:e.title,message:e.message,success:function(t){e.success&&e.success(e.hostname)},cancel:function(){e.cancel&&e.cancel()}})},error:function(e,t,n){console.log("Unable to check status of remote session.")}})},t.delete_remote=function(t){t in e&&(o.default.delete_remote({sid:e[t]}),delete e[t])},t};var o=l(n(2)),a=l(n(0)),i=l(n(4)),s=l(n(64)),r=l(n(321));function l(e){return e&&e.__esModule?e:{default:e}}function c(t){var n={cancel:function(){n.container.children().modal("hide"),t.cancel&&t.cancel()},login:function(){n.remote.enable(!1),n.remote.status_type("info"),n.remote.status("Connecting ..."),o.default.post_remotes({hostname:t.hostname,username:n.remote.username(),password:n.remote.password(),success:function(e){n.container.children().modal("hide"),t.success&&t.success(e)},error:function(e,t,o){n.remote.enable(!0),n.remote.status_type("danger"),n.remote.status(o),n.remote.focus("password")}})}};n.title=a.default.observable(t.title||"Login"),n.message=a.default.observable(t.message||""),n.remote=i.default.fromJS({username:null,password:null,status:null,enable:!0,focus:!1,status_type:null}),n.remote.focus.extend({notify:"always"}),n.container=e(e.parseHTML(r.default)).appendTo(e("body")),n.ispasswordrequired=s.default,n.container.children().on("shown.bs.modal",function(){n.remote.focus(!0)}),n.container.children().on("hidden.bs.modal",function(){n.container.remove()}),a.default.applyBindings(n,n.container.get(0)),n.container.children().modal("show")}n(254)}).call(this,n(1))},315:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcdCupowjYAAAA4SURBVBjTjY45DgAgAMKq8VP8f+izdHLxiDZhg4YCoHYuJCmVD+q6AmbOJZUkTxPqVmqLqT8/3RjLHw4SIwEXjwAAAABJRU5ErkJggg=="},316:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcnLB3MmbIAAAA8SURBVBjTjYyxDYAwEMT8EUvfBB47aQChiEe4ucbnAlAnDUlq8IOxv4A6911SSYL6WbrFJ8dWmlexLXUsiHoUEn+eNQQAAAAASUVORK5CYII="},317:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcGKw83GfIAAABrSURBVBjTjcqxEUFhFEThj0qI1HBTow5tSIRGKHgV6IGRiTcT6kNghCT/wyBwkr2794Ak0yT3JPPWN0luGoP+SHLABDOc0VXVAoZeLDHCEVes+8dTqqoTthhjVVWXL6mxa7l/Hz+ln/wlPQBR6h1u6Vo8IwAAAABJRU5ErkJggg=="},318:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcDGiOe7Y0AAAB5SURBVBjTjcoxDkFREIbRczUvdkFlH2Ifau1rZBKlmE5hBWILRGcLSvtQqK/mPREUvmaS+U+BzJzignlEHDJzi0VEDKHoyswzJqWUWa31hl1ELGHQo6ZpVhjVWi94YNNvL9S27RV7jLGOiPsX6jp29/T+/EQ/+ws9AcDpHx8wCF0cAAAAAElFTkSuQmCC"},319:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcIEs6xvHQAAACESURBVBjTVc4xDgFxEMXhb1W04g5a7VxFo3cBichGK0J0ShpxEclcQCNxBIlCo1T4r6xpZjLvze9NBZm5wBxDPHDDJSLG0PGtTRFXmGFQOqiaITMnOOKNdUTUjdaQ4IwXuji09n+mKXp4tqN+cZnZxx2n8vQOo4i4tkl1OVhiX4zbhvQBmakeJ1ciCYkAAAAASUVORK5CYII="},320:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcHNnUqRGoAAACISURBVBjTTc4xDkFREIXhj4pW7EFrPRq9DciIvOhuPCE6JY3YiCVoJJYgUWg0N1G4T95p5iRn5j/TgZTSEguM8MQd14iYQNdP2xKuMcewTNBpTF3X05zzCR9sIqJqsoYk53zBGz0ctdRt+Rn6eLWr/nUppQEeOJen9xhHxK1NqsrBCoeyuGtIXwQvJB7uu+OBAAAAAElFTkSuQmCC"},321:function(e,t){e.exports='<div class="bootstrap-styles">\n  <div class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-bind="click:cancel" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n          <h3 class="modal-title" data-bind="text:title"></h3>\n        </div>\n        <div class="modal-body">\n          <p data-bind="visible:message, text:message"></p>\n          \x3c!-- ko if: ispasswordrequired.ssh_passwordrequired --\x3e\n          <form class="form-horizontal" role="form">\n            <slycat-login-controls params="username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:login"></slycat-login-controls>\n          </form>\n          \x3c!-- /ko --\x3e\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-default" data-bind="click:login,enable:remote.enable">Login</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},322:function(e,t,n){"use strict";(function(e){var t=a(n(0)),o=a(n(323));function a(e){return e&&e.__esModule?e:{default:e}}t.default.components.register("slycat-login-controls",{viewModel:{createViewModel:function(n,o){var a={};return a.username=n.username,a.password=n.password,a.status=n.status||t.default.observable(null),a.status_type=n.status_type||t.default.observable(null),a.enable=n.enable||t.default.observable(!0),a.focus=n.focus||t.default.observable(!1),a.status_classes=t.default.pureComputed(function(){var e=[];return a.status()&&e.push("in"),a.status_type()&&e.push("alert-"+a.status_type()),e.join(" ")}),a.username()||a.username(localStorage.getItem("slycat-login-controls-username")),a.username.subscribe(function(e){localStorage.setItem("slycat-login-controls-username",e),a.status(null)}),a.password.subscribe(function(e){a.status(null)}),a.focus.subscribe(function(t){var n=a.username(),i=a.password(),s=e(o.element).find("input").eq(0),r=e(o.element).find("input").eq(1);1==t&&(t=a.username()?"password":"username"),"username"==t&&(s.focus(),n&&s.get(0).setSelectionRange(0,n.length)),"password"==t&&(r.focus(),i&&r.get(0).setSelectionRange(0,i.length))}),e(o.element).find("input").keydown(function(e){13==e.which&&n.activate&&n.activate()}),a}},template:o.default})}).call(this,n(1))},323:function(e,t){e.exports='<div class="form-group">\n  <label for="slycat-login-username" class="col-sm-2 control-label">Username</label>\n  <div class="col-sm-10">\n    <input id="slycat-login-username" class="form-control" type="text" data-bind="enable:enable, textInput:username"></input>\n  </div>\n</div>\n<div class="form-group">\n  <label for="slycat-login-password" class="col-sm-2 control-label">Password</label>\n  <div class="col-sm-10">\n    <input id="slycat-login-password" class="form-control" type="password" data-bind="enable:enable, textInput:password"></input>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-offset-2 col-sm-10">\n    <div class="alert fade" role="alert" data-bind="css:status_classes,text:status"></div>\n  </div>\n</div>\n'},329:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94EHhESC1NkMY8AAABaSURBVDjLY2AYkiAtLRSrOCMBTf8JGTxr1mpGFiIcwDhr1mq4K2bNWo2hgIkIQ4RwaSbakFmzVr8jpIaJlIDF5RoWYgOQkiglynAmalg2eAyhSoqlSt4ZPAAAhK0aFjM865EAAAAASUVORK5CYII="},330:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94EHhEOMAQYhfYAAABcSURBVDjL1ZM7DoBACERn1rXxCN7/mCbPxsKChJVoslIBgRm+0i8FWCK/kyQyYNvOmAH2SzewVsoH6Dc7ZG0D5R6j7ZdnIkn9SXB1pUPg7Q2yeUC+v9gAdJv7u0+kGjIYZ1Y9RwAAAABJRU5ErkJggg=="},332:function(e,t,n){"use strict";(function(e){var t=r(n(2)),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(3)),r(n(0))),a=r(n(4)),i=r(n(25)),s=r(n(333));function r(e){return e&&e.__esModule?e:{default:e}}o.default.components.register("slycat-job-checker",{viewModel:function(n){var s={_id:(0,i.default)(window.location).segment(-1)},r=this;r.remote=a.default.fromJS({hostname:null,username:null,password:null,status:null,status_type:null,enable:!0,focus:!1,sid:null,session_exists:!1}),r.remote.focus.extend({notify:"always"}),r.jid=o.default.observable(-1),r.output=o.default.observable("Output for the current job will be posted here...");var l=-1,c="";r.connect=function(){r.remote.enable(!1),r.remote.status_type("info"),r.remote.status("Connecting..."),r.remote.session_exists()?(r.remote.enable(!0),r.remote.status_type(null),r.remote.status(null),e("#slycat-job-checker-connect-modal").modal("hide"),e("#slycat-job-checker-cancel").removeAttr("disabled"),r.checkjob()):t.default.post_remotes({hostname:r.remote.hostname(),username:r.remote.username(),password:r.remote.password(),success:function(t){r.remote.session_exists(!0),r.remote.sid(t),r.remote.enable(!0),r.remote.status_type(null),r.remote.status(null),e("#slycat-job-checker-connect-modal").modal("hide"),e("#slycat-job-checker-cancel").removeAttr("disabled"),r.checkjob()},error:function(t,n,o){e("#slycat-job-checker-cancel").attr("disabled"),r.remote.enable(!0),r.remote.status_type("danger"),r.remote.status(o),r.remote.focus("password")}})},r.cancel=function(){r.remote.password(""),e("#slycat-job-checker-connect-modal").modal("hide"),r.output(r.output()+"\nPlease reload the page to check job "+r.jid()+"'s status.")},r.cancel_pull=function(){r.remote.password(""),console.log("cancel"),e("#slycat-pull-job-connect-modal").modal("hide"),r.output(r.output()+"\nPlease reload the page to check job "+r.jid()+"'s status.")};var d=function(e){t.default.get_checkjob({hostname:r.remote.hostname(),jid:r.jid(),success:function(e){if(e.errors)r.output(r.output()+"\n[Error] Could not check job iD="+r.jid()+" status: "+e.errors);else{var t=e.status.state;!function(e){return c===e}(t)?r.output(r.output()+"\nJob ID="+r.jid()+" is "+t):r.output(r.output()+"."),"COMPLETED"!==t&&"FAILED"!==t||(clearInterval(l),r.output(r.output()+"\n\nPlease reload to view model."),window.location.reload(!0),c=""),"CANCELLED"!==t&&"REMOVED"!==t||(clearInterval(l),c=""),c=t}},error:function(e,t,n){r.output(r.output()+"\n[Error] Could not check job status: "+t+" :"+n)}})};r.pullDataFromHpc=function(){console.log("1"),r.remote.enable(!1),r.remote.status_type("info"),r.remote.status("Connecting..."),r.remote.session_exists()?(console.log("got session"),r.remote.enable(!0),r.remote.status_type(null),r.remote.status(null),e("#slycat-pull-job-connect-modal").modal("hide"),r.pullHPCData()):t.default.post_remotes({hostname:r.remote.hostname(),username:r.remote.username(),password:r.remote.password(),success:function(t){r.remote.session_exists(!0),r.remote.sid(t),r.remote.enable(!0),r.remote.status_type(null),r.remote.status(null),e("#slycat-pull-job-connect-modal").modal("hide"),r.checkjob()},error:function(t,n,o){e("#slycat-job-checker-cancel").attr("disabled"),r.remote.enable(!0),r.remote.status_type("danger"),r.remote.status(o),r.remote.focus("password")}})},r.pullHPCData=function(){console.log("2"),t.default.get_model_command({mid:s._id,type:"timeseries",command:"pull_data",success:function(e){r.output(r.output()+"\nstarted pull status :"+e.errors)},error:function(e,t,n){r.output(r.output()+"\npull status: "+t+" :"+n)}})},r.checkjob=function(){c="",l=setInterval(d,1e3)},r.set_jid=function(e){r.jid(e)},e("#slycat-job-checker-connect").on("click",function(t){t.preventDefault(),t.stopPropagation(),e("#slycat-job-checker-connect-modal").modal()}),e("#slycat-job-pull").on("click",function(t){t.preventDefault(),t.stopPropagation(),e("#slycat-pull-job-connect-modal").modal()}),e("#slycat-job-checker-clear").on("click",function(e){e.preventDefault(),e.stopPropagation(),r.output("")}),e("#slycat-job-checker-cancel").on("click",function(e){e.preventDefault(),e.stopPropagation(),t.default.delete_job({hostname:r.remote.hostname(),jid:r.jid()})})},template:s.default})}).call(this,n(1))},333:function(e,t){e.exports='<div class="slycat-job-checker bootstrap-styles">\n  <div class="slycat-job-checker-controls">\n    <button id="slycat-job-checker-connect" class="btn btn-default">Connect To View Job Output</button>\n    <button id="slycat-job-checker-clear" class="btn btn-default">Clear Output</button>\n    <button id="slycat-job-pull" class="btn btn-default">Pull data</button>\n    <button id="slycat-job-checker-cancel" class="btn btn-danger" disabled>Cancel Job</button>\n  </div>\n  <div class="slycat-job-checker-output" data-bind="text: output"></div>\n\n  <div id="slycat-job-checker-connect-modal" class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content zoom-sensitive">\n        <div class="modal-header">\n          <h4 class="modal-title">Connect to host...</h4>\n        </div>\n        <div class="modal-body">\n          <form class="form-horizontal" role="form">\n            <slycat-remote-controls params="hostname:remote.hostname,username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:connect,session_exists:remote.session_exists"></slycat-remote-controls>\n          </form>\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-primary" data-bind="click:connect,enable:remote.enable">Connect</button>\n          <button class="btn btn-default pull-left" data-bind="click:cancel">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="slycat-pull-job-connect-modal" class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content zoom-sensitive">\n        <div class="modal-header">\n          <h4 class="modal-title">Connect to host...</h4>\n        </div>\n        <div class="modal-body">\n          <form class="form-horizontal" role="form">\n            <slycat-remote-controls params="hostname:remote.hostname,username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:connect,session_exists:remote.session_exists"></slycat-remote-controls>\n          </form>\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-primary" data-bind="click:pullDataFromHpc,enable:remote.enable">Connect</button>\n          <button class="btn btn-default pull-left" data-bind="click:cancel_pull">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n'},406:function(e,t,n){var o=n(407);"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,a);o.locals&&(e.exports=o.locals)},407:function(e,t,n){var o=n(38);(e.exports=n(36)(!1)).push([e.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n/* Page header */\n\n#edit-model-button\n{\n  float: right;\n}\n\n#table\n{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n}\n\n.x-axis,\n.y-axis\n{\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  shape-rendering: crispEdges;\n}\n\n.x-axis path,\n.y-axis path\n{\n  fill: none;\n  stroke: black;\n}\n\n#remote-error\n{\n  background-color: red;\n  color: yellow;\n  padding: 1em;\n}\n\n/* Model */\n#parameter-image-plus-layout {\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n/* New CCA table styles */\n#barplot-table {\n  /*height: 250px;*/\n  overflow: hidden;\n}\n.barplotHeader {\n  /*overflow: hidden;*/\n  white-space: nowrap;\n}\n.barplotHeaderColumns {\n  /*outline: 1px solid blue;*/\n  white-space: nowrap;\n  display: inline-block;\n}\n.barplotHeaderColumn {\n  text-align: right !important;\n  display: inline-block;\n  /*padding: 3px;*/\n  cursor: pointer;\n  /*outline: 1px solid red;*/\n}\n.wrapper {\n  /*No longer using box-sizing since we are sizing cells based on an wrapper div inside them*/\n/*  box-sizing: border-box;\n  -moz-box-sizing: border-box;*/\n}\n.barplotHeaderColumn .wrapper {\n  padding: 3px;\n}\n.mask\n{\n  background-color: white;\n  position: relative; /* needed to get this cell to cover scrolling header row */\n  z-index: 1;\n}\n.mask .wrapper {\n  padding: 3px;\n}\n.barplotViewport {\n\n}\n.barplotGroup {\n  overflow: hidden;\n  width: auto !important; /* Need to force auto width since jQuery Resizable Widget sets static width on resize, which then breaks horizontal expansion/contraction on pane resize */\n}\n.barplotColumn {\n  float: left;\n  clear: left;\n}\n.barplotGroup.inputs,\n.barplotHeader,\n.barplotColumn,\n.mask,\n.inputs .ui-resizable-s\n{\n  border-color: #C0C0C0;\n  border-style: solid;\n  border-width: 0;\n}\n/*.barplotGroup.inputs,*/\n.barplotHeader\n{\n  border-bottom-width: 1px;\n}\n.barplotColumn,\n.mask\n{\n  border-right-width: 1px;\n}\n.inputs .ui-resizable-s {\n  bottom: 0;\n  height: 3px;\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  background-color: #DDDDCC;\n}\n.inputs .ui-resizable-s.ui-resizable-hover {\n  background-color: #FFCC66;\n}\n.noVerticalResize .ui-resizable-s {\n  display: none !important;\n}\n.toggle-control-s {\n  width: 50px;\n  height: 100%;\n  margin: 0 auto;\n  background-color: #CCCCBB;\n}\n.toggle-control-s.toggle-control-hover {\n  cursor: pointer;\n  background-color: #FFCC66;\n}\n/*.barplotGroup.inputs {\n  border-bottom: 7px solid red;\n}*/\n.barplotColumn .barplotCell {\n  display: block;\n}\n.barplotCanvas {\n  /*overflow: auto;*/\n  /*display: relative;*/ /* Only needed if using DOM's scrollIntoView() function instead of jQuery plugin */\n  height: 100%;\n}\n.barplotCanvas.input {\n  overflow-x: hidden;\n  /*overflow-y: auto;*/\n}\n.barplotRow {\n  white-space: nowrap;\n}\n.barplotCell {\n  display: inline-block;\n  text-align: right;\n}\n#rsquared-label sup {\n  position: absolute;\n  margin-top: -3px;\n}\n.rowInput,\n.rowOutput\n{\n  cursor: pointer;\n}\n#barplot-table .inputLabel .wrapper,\n#barplot-table .outputLabel .wrapper\n{\n  padding: 3px;\n}\n#barplot-table .inputLabel,\n#barplot-table .outputLabel,\n.barplotCell.col0,\n.barplotHeaderColumn\n{\n  font-weight: bold;\n  text-align: center;\n}\n#barplot-table .inputLabel\n{\n  background: #eeffe0;\n}\n#barplot-table .inputLabel.selected-variable,\n#barplot-table .barplotRow.rowInput.selected-variable,\n#barplot-table .barplotCell.rowInput.selected-variable\n{\n  background: #3ca654;\n  color: white;\n}\n#barplot-table .outputLabel\n{\n  background: #eeeeff;\n}\n#barplot-table .outputLabel.selected-variable,\n#barplot-table .barplotRow.rowOutput.selected-variable,\n#barplot-table .barplotCell.rowOutput.selected-variable\n{\n  background: #7767b0;\n  color: white;\n}\n.barplotHeaderColumnLabelWrapper,\n.selectCCAComponent,\n.wrapper,\n.barplotCellValue,\n.selected-component .spacer,\n.negative,\n.positive\n{\n  display: inline-block;\n}\n.barplotCellValue\n{\n  padding: 3px 23px 3px 18px;\n  width: 40px;\n}\n.selected-component .barplotCellValue,\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  background-color: #DDDDDD;\n  border-width: 0px 1px;\n  border-style: solid;\n  border-color: #808080;\n  color: #666655;\n}\n.barplotHeaderColumn.selected-component .wrapper {\n  padding: 0;\n}\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  padding: 3px 3px 3px 3px;\n  width: 75px;\n}\n.spacer\n{\n  width: 100px;\n  display: none;\n}\n.negativeSpacer\n{\n  text-align: right;\n}\n.positiveSpacer\n{\n  text-align: left;\n}\n.negative,\n.positive\n{\n  height: 12px;\n}\n.negative\n{\n  background-color: blue;\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n}\n.positive\n{\n  background-color: red;\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n#barplot-table span.sortCCAComponent\n{\n  width: 15px;\n  height: 15px;\n  display: inline-block;\n  border: 1px solid transparent;\n  cursor: pointer;\n  position: relative;\n  top: 3px;\n  margin-left: 3px;\n}\n.barplotHeaderColumn.mask.col0 {\n  vertical-align: top;\n}\n.slick-header-column {\n  padding-right: 41px !important;\n}\n.icon-sort-off {\n  border: 1px solid transparent;\n  background: transparent url("+o(n(288))+") no-repeat center center;\n}\n.icon-sort-off:hover {\n  border: 1px solid transparent !important;\n  background: transparent url("+o(n(289))+") no-repeat center center !important;\n}\n.icon-sort-ascending:hover,\n.icon-sort-descending:hover\n{\n  border: 1px solid transparent;\n}\n.slick-header-button,\n.slick-header-column:hover > .slick-header-button\n{\n  width: 10px;\n}\n.slick-header-button.icon-image-on,\n.slick-header-button.icon-image-off\n{\n  right: 16px;\n  top: 4px;\n}\n.slick-header-button.icon-image-off {\n  background: transparent url("+o(n(315))+") no-repeat center center;\n}\n.slick-header-button.icon-image-on,\n.slick-header-button.icon-image-off:hover\n{\n  background: transparent url("+o(n(316))+") no-repeat center center;\n}\n.slick-header-button.icon-y-on,\n.slick-header-button.icon-y-off\n{\n  right: 16px;\n  top: 4px;\n}\n.slick-header-button.icon-y-off {\n  background: transparent url("+o(n(317))+") no-repeat center center;\n}\n.slick-header-button.icon-y-on,\n.slick-header-button.icon-y-off:hover\n{\n  background: transparent url("+o(n(318))+") no-repeat center center;\n}\n.slick-header-button.icon-x-on,\n.slick-header-button.icon-x-off\n{\n  right: 26px;\n  top: 4px;\n}\n.slick-header-button.icon-x-off {\n  background: transparent url("+o(n(319))+") no-repeat center center;\n}\n.slick-header-button.icon-x-on,\n.slick-header-button.icon-x-off:hover\n{\n  background: transparent url("+o(n(320))+') no-repeat center center;\n}\n#page-title {\n  padding-top: 5px;\n  padding-bottom: 35px;\n}\n#controls-pane {\n  \n}\n.center {\n  text-align: center;\n}\n#color-switcher {\n  margin: 0;\n  float: none;\n  display: inline-block;\n}\n#color-switcher .label {\n  font-weight: bold;\n}\n#color-switcher .color {\n  background-color: #DBD9EB;\n  padding: 4px;\n}\n#color-switcher .color:hover {\n  cursor: pointer;\n}\n#color-switcher .selected:hover {\n  cursor: default;\n}\n#color-switcher .selected {\n  background-color: #7767B0 !important;\n  color: white;\n}\n#color-switcher,\n#controls\n{\n  font-size: small;\n}\n#controls {\n  display: inline-block;\n  margin: 2px 0;\n}\n#controls label {\n  font-weight: bold;\n  margin-right: 5px;\n}\n#controls label.disabled,\n#controls select:disabled\n{\n  color: gray;\n}\n#controls select:disabled {\n\n}\n#controls select {\n  margin-right: 10px;\n  padding: 2px 4px;\n}\n#controls button,\n#controls label[for="auto-scale-option"]\n{\n  margin-right: 10px;\n}\n#scatterplot.resizing,\n#scatterplot .resize-handle:hover {\n  cursor: nwse-resize;\n}\n#scatterplot rect.outline:hover,\n#scatterplot g.image-frame image.image\n{\n  cursor: move;\n}\n#scatterplot .close-button:hover,\n#scatterplot .pin-button:hover {\n  cursor: pointer;\n}\n#scatterplot g.open-image image.image {\n\n}\n#scatterplot .close-button,\n#scatterplot .resize-handle,\n#scatterplot .pin-button\n{\n  visibility: hidden;\n}\n#scatterplot g.open-image:hover .close-button,\n#scatterplot g.open-image.resizing .close-button,\n#scatterplot g.hover-image .pin-button,\n#scatterplot g.open-image:hover .pin-button,\n#scatterplot g.image-frame:hover .resize-handle,\n#scatterplot g.open-image.resizing .resize-handle\n{\n  visibility: visible;\n}\n#scatterplot g.legend:hover {\n  cursor: move;\n}\n#scatterplot .image-frame rect.outline {\n  shape-rendering: crispEdges;\n}\n.legend-axis path,\n.legend-axis line\n{\n  fill: none;\n  stroke: black;\n  shape-rendering: crispEdges;\n}\n.dialogErrorMessage {\n  color: red;\n}\n#scatterplot canvas {\n  z-index: -1;\n}\n\n/* dendrogram styles */\n#dendrogram-pane #dendrogram-sort-control \n{\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  cursor: pointer;\n  background: #DBD9EB url('+o(n(329))+") no-repeat center center;;\n  padding: 4px;\n  margin: 0 0 5px 18px;\n  height: 17px;\n  min-width: 17px;\n}\n\n#dendrogram-pane #dendrogram-sort-control.selected\n{\n  background: #7767B0 url("+o(n(330))+") no-repeat center center;\n  color: #FFFFFF;\n  cursor: default;\n}\n\n#dendrogram-viewer .node .glyph circle\n{\n  stroke: grey;\n}\n\n#dendrogram-viewer .node.selected .glyph circle\n{\n  fill: #7767b0 !important;\n  stroke: black;\n}\n\n#dendrogram-viewer .node .glyph text\n{\n  cursor: pointer;\n}\n\n#dendrogram-viewer .node .subtree\n{\n  cursor: pointer;\n}\n\n#dendrogram-viewer .node .subtree path\n{\n  stroke: none;\n}\n\n/* Hiding the additional glyph initially */\n#dendrogram-viewer .node .subtree path.filled-glyph\n{\n  display: none;\n}\n/* Showing it for selected nodes */\n#dendrogram-viewer .node.selected .subtree path.filled-glyph\n{\n  display: inline;\n}\n\n#dendrogram-viewer .node.selected .subtree text\n{\n  fill: white;\n}\n\n#dendrogram-viewer .node .sparkline path\n{\n  fill: none;\n  stroke: black;\n}\n\n#dendrogram-viewer .link\n{\n  fill: none;\n  stroke: #C9C9C9;\n  shape-rendering: crispEdges;\n}\n#dendrogram-leaf-backdrop {\n  height: 100%;\n  width: 49px;\n  position: absolute;\n  right: 0;\n  z-index: -1;\n}\n#dendrogram-viewer g.sparkline path {\n  stroke-linecap: round;\n}\n#dendrogram-viewer g.sparkline path:hover,\n#dendrogram-viewer g.sparkline path.highlight\n{\n  stroke-width: 4px;\n}\n#dendrogram-viewer g.sparkline path.highlight {\n  \n}\n#dendrogram-viewer g.sparkline path.nullValue {\n  stroke-dasharray: 2px, 2px;\n}\n#dendrogram-viewer g.sparkline path.highlight.nullValue {\n  stroke-dasharray: 2px, 5px;\n}\n#dendrogram-viewer g.thumbnail rect.outline {\n  stroke: unset;\n}\n#dendrogram-viewer g.thumbnail.highlight rect.outline {\n  stroke: black;\n}\n#dendrogram-viewer g.square {\n  shape-rendering: crispEdges;\n}\n\n/* ui layout */\n.ui-layout-resizer\n{\n  background: #ddc;\n}\n.ui-layout-resizer-hover\n{\n  background: #fc6;\n}\n.ui-layout-resizer-dragging\n{\n  background: #fc6;\n}\n.ui-layout-toggler\n{\n  background: #ccb;\n}\n.ui-layout-toggler-hover\n{\n  background: #fc6;\n}\n.ui-layout-pane, .ui-layout-container\n{\n  background: white;\n  padding: 0;\n  border: 0;\n  margin: 0;\n}\n\n/* Image Preview */\n#scatterplot-pane #image-preview {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  display: none;\n  text-align: center;\n}\n#scatterplot-pane #image-preview-image {\n  max-height: 100%;\n  max-width: 100%;\n}",""])},408:function(e,t,n){"use strict";(function(e){var t=r(n(15)),o=r(n(281)),a=r(n(25)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(301));n(280),n(322);var s=r(n(409));function r(e){return e&&e.__esModule?e:{default:e}}e.widget("parameter_image.scatterplot",{options:{width:300,height:300,pick_distance:3,drag_threshold:3,indices:[],x_label:"X Label",y_label:"Y Label",v_label:"V Label",x:[],y:[],v:[],x_string:!1,y_string:!1,v_string:!1,images:[],selection:[],colorscale:o.default.scale.linear().domain([-1,0,1]).range(["blue","white","red"]),border:25,open_images:[],gradient:null,hidden_simulations:[],filtered_indices:[],filtered_selection:[],filtered_x:[],filtered_y:[],filtered_v:[],scale_x:[],scale_y:[],scale_v:[],"auto-scale":!0,canvas_square_size:8,canvas_square_border_size:1,canvas_selected_square_size:16,canvas_selected_square_border_size:2,pinned_width:200,pinned_height:200,hover_time:250,image_cache:{},cache_references:[{}],login_dialog:null},_create:function(){var e=this;this.remotes=i.create_pool(),e.login_open=!1,e.options["auto-scale"]?(e.options.filtered_x=e._filterValues(e.options.x),e.options.filtered_y=e._filterValues(e.options.y),e.options.filtered_v=e._filterValues(e.options.v),e.options.scale_x=e.options.filtered_x,e.options.scale_y=e.options.filtered_y,e.options.scale_v=e.options.filtered_v):(e.options.scale_x=e.options.x,e.options.scale_y=e.options.y,e.options.scale_v=e.options.v),e.hover_timer=null,e.close_hover_timer=null,e.hover_timer_canvas=null,e.opening_image=null,e.state="",e.start_drag=null,e.current_drag=null,e.end_drag=null,e.svg=o.default.select(e.element.get(0)).append("svg"),e.x_axis_layer=e.svg.append("g").attr("class","x-axis"),e.y_axis_layer=e.svg.append("g").attr("class","y-axis"),e.legend_layer=e.svg.append("g").attr("class","legend"),e.legend_axis_layer=e.legend_layer.append("g").attr("class","legend-axis"),e.datum_layer=e.svg.append("g").attr("class","datum-layer"),e.selected_layer=e.svg.append("g").attr("class","selected-layer"),e.canvas_datum=o.default.select(e.element.get(0)).append("canvas").style({position:"absolute"}).node(),e.canvas_datum_layer=e.canvas_datum.getContext("2d"),e.canvas_selected=o.default.select(e.element.get(0)).append("canvas").style({position:"absolute"}).node(),e.canvas_selected_layer=e.canvas_selected.getContext("2d"),e.selection_layer=e.svg.append("g").attr("class","selection-layer"),e.image_layer=e.svg.append("g").attr("class","image-layer"),e.options.image_cache=e.options.cache_references[0],e.updates={},e.update_timer=null,e._schedule_update({update_indices:!0,update_width:!0,update_height:!0,update_x:!0,update_y:!0,update_x_label:!0,update_y_label:!0,render_data:!0,render_selection:!0,open_images:!0,render_legend:!0,update_legend_colors:!0,update_legend_position:!0,update_legend_axis:!0,update_v_label:!0}),e.legend_layer.call(o.default.behavior.drag().on("drag",function(){if(0<=o.default.event.y&&o.default.event.y<=e.options.height&&0<=o.default.event.x&&o.default.event.x<=e.options.width){var t=o.default.select(this),n=Number(t.attr("data-transx")),a=Number(t.attr("data-transy"));n+=o.default.event.dx,a+=o.default.event.dy,t.attr("data-transx",n),t.attr("data-transy",a),t.attr("transform","translate("+n+", "+a+")")}}).on("dragstart",function(){e.state="moving",o.default.event.sourceEvent.stopPropagation()}).on("dragend",function(){e.state="",o.default.select(this).attr("data-status","moved")})),e.element.mousedown(function(t){t.preventDefault(),e.start_drag=[e._offsetX(t),e._offsetY(t)],e.end_drag=null}),e.element.mousemove(function(t){if(null===e.start_drag)"svg"===t.target.nodeName&&e._schedule_hover_canvas(t);else if(e.start_drag)if(e.end_drag){e.end_drag=[e._offsetX(t),e._offsetY(t)];e.element.width(),e.element.height();e.selection_layer.selectAll(".rubberband").attr("x",Math.min(e.start_drag[0],e.end_drag[0])).attr("y",Math.min(e.start_drag[1],e.end_drag[1])).attr("width",Math.abs(e.start_drag[0]-e.end_drag[0])).attr("height",Math.abs(e.start_drag[1]-e.end_drag[1]))}else(Math.abs(e._offsetX(t)-e.start_drag[0])>e.options.drag_threshold||Math.abs(e._offsetY(t)-e.start_drag[1])>e.options.drag_threshold)&&(e.state="rubber-band-drag",e.end_drag=[e._offsetX(t),e._offsetY(t)],e.selection_layer.append("rect").attr("class","rubberband").attr("x",Math.min(e.start_drag[0],e.end_drag[0])).attr("y",Math.min(e.start_drag[1],e.end_drag[1])).attr("width",Math.abs(e.start_drag[0]-e.end_drag[0])).attr("height",Math.abs(e.start_drag[1]-e.end_drag[1])).attr("fill","rgba(255, 255, 0, 0.3)").attr("stroke","rgb(255, 255, 0)").attr("linewidth",2))}),e.element.mouseout(function(t){e._cancel_hover_canvas()}),e.element.mouseup(function(t){if("resizing"!=e.state&&"moving"!=e.state){t.ctrlKey||t.metaKey||(e.options.selection=[],e.options.filtered_selection=[]);var n,o,a=e.options.x,i=e.options.y,s=a.length;if("rubber-band-drag"==e.state){if(e.selection_layer.selectAll(".rubberband").remove(),e.start_drag&&e.end_drag)for(var r=Math.min(e.start_drag[0],e.end_drag[0]),l=Math.max(e.start_drag[0],e.end_drag[0]),c=Math.min(e.start_drag[1],e.end_drag[1]),d=Math.max(e.start_drag[1],e.end_drag[1]),u=0;u!=s;++u){if(n=e.x_scale(a[u]),o=e.y_scale(i[u]),r<=n&&n<=l&&c<=o&&o<=d)-1==(p=e.options.selection.indexOf(e.options.indices[u]))&&e.options.selection.push(e.options.indices[u])}}else for(r=e._offsetX(t)-e.options.pick_distance,l=e._offsetX(t)+e.options.pick_distance,c=e._offsetY(t)-e.options.pick_distance,d=e._offsetY(t)+e.options.pick_distance,u=s-1;u>-1;u--)if(n=e.x_scale(a[u]),o=e.y_scale(i[u]),r<=n&&n<=l&&c<=o&&o<=d){var p;-1==(p=e.options.selection.indexOf(e.options.indices[u]))?e.options.selection.push(e.options.indices[u]):e.options.selection.splice(p,1);break}e.start_drag=null,e.end_drag=null,e.state="",e._filterIndices(),e.options.selection=e.options.filtered_selection.slice(0),e._schedule_update({render_selection:!0}),e.element.trigger("selection-changed",[e.options.selection])}}),e._filterIndices()},_filterIndices:function(){for(var t=this.options.x,n=this.options.y,o=this.options.indices,a=this.options.selection,i=this.options.hidden_simulations,s=this._cloneArrayBuffer(o),r=a.slice(0),l=o.length-1;l>=0;l--){if(e.inArray(o[l],i)>-1||!this._validateValue(t[l])||!this._validateValue(n[l])){s.splice(l,1);var c=e.inArray(o[l],r);c>-1&&r.splice(c,1)}}this.options.filtered_indices=s,this.options.filtered_selection=r},_filterValues:function(e){for(var t=this.options.hidden_simulations.sort(o.default.ascending),n=t.length,a=this._cloneArrayBuffer(e),i=n-1;i>=0;i--)a.splice(t[i],1);return a},_cloneArrayBuffer:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},_createScale:function(e,t,n,a){if(e){var i=o.default.set(t).values().sort();return!0===a&&i.reverse(),o.default.scale.ordinal().domain(i).rangePoints(n)}var s=[o.default.min(t),o.default.max(t)];return!0===a&&s.reverse(),o.default.scale.linear().domain(s).range(n)},_getDefaultXPosition:function(e,t){var n,o=this.svg.attr("width"),a=this.x_scale.range(),i=a.length-1,s=(this.x_scale(this.options.x[e])-a[0])/(a[i]-a[0]);return n=s<.5?s*a[0]:o-(o-a[i])*(1-s)-t,parseInt(n)},_getDefaultYPosition:function(e,t){var n=this.svg.attr("height"),o=this.y_scale(this.options.y[e]);return parseInt(o/n*(n-t))},_validateValue:function(e){return"number"==typeof e&&!isNaN(e)||"string"==typeof e&&""!=e.trim()},_setOption:function(e,t){this.options[e]=t,"indices"==e?(this._filterIndices(),this._schedule_update({update_indices:!0,render_selection:!0})):"x_label"==e?this._schedule_update({update_x_label:!0}):"y_label"==e?this._schedule_update({update_y_label:!0}):"v_label"==e?this._schedule_update({update_v_label:!0}):"x"==e?(this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.scale_x=this.options.filtered_x):this.options.scale_x=this.options.x,this._filterIndices(),this._close_hidden_simulations(),this._schedule_update({update_x:!0,update_leaders:!0,render_data:!0,render_selection:!0})):"y"==e?(this.options["auto-scale"]?(this.options.filtered_y=this._filterValues(this.options.y),this.options.scale_y=this.options.filtered_y):this.options.scale_y=this.options.y,this._filterIndices(),this._close_hidden_simulations(),this._schedule_update({update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0})):"v"==e?(this.options["auto-scale"]?(this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_v=this.options.filtered_v):this.options.scale_v=this.options.v,this._schedule_update({render_data:!0,render_selection:!0,update_legend_axis:!0})):"images"==e||("selection"==e?(this._filterIndices(),this._schedule_update({render_selection:!0})):"colorscale"==e?this._schedule_update({render_data:!0,render_selection:!0}):"width"==e?this._schedule_update({update_width:!0,update_x_label:!0,update_x:!0,update_leaders:!0,render_data:!0,render_selection:!0}):"height"==e?this._schedule_update({update_height:!0,update_y:!0,update_y_label:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_position:!0,update_legend_axis:!0,update_v_label:!0}):"border"==e?this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_position:!0,update_v_label:!0}):"gradient"==e?this._schedule_update({update_legend_colors:!0}):"hidden_simulations"==e?(this._filterIndices(),this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.filtered_y=this._filterValues(this.options.y),this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_x=this.options.filtered_x,this.options.scale_y=this.options.filtered_y,this.options.scale_v=this.options.filtered_v):(this.options.scale_x=this.options.x,this.options.scale_y=this.options.y,this.options.scale_v=this.options.v),this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_axis:!0}),this._close_hidden_simulations()):"auto-scale"==e&&(this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.filtered_y=this._filterValues(this.options.y),this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_x=this.options.filtered_x,this.options.scale_y=this.options.filtered_y,this.options.scale_v=this.options.filtered_v):(this.options.scale_x=this.options.x,this.options.scale_y=this.options.y,this.options.scale_v=this.options.v),this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_axis:!0})))},update_color_scale_and_v:function(e){this.options.colorscale=e.colorscale,this.options.v=e.v,void 0!==e.v_string&&(this.options.v_string=e.v_string),this.options["auto-scale"]?(this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_v=this.options.filtered_v):this.options.scale_v=this.options.v,this._schedule_update({render_data:!0,render_selection:!0,update_legend_axis:!0})},_schedule_update:function(e){var t=this;for(var n in e)t.updates[n]=e[n];t.update_timer||(t.update_timer=window.setTimeout(function(){t._update()},0))},_update:function(){var t=this;t.update_timer=null;if(t.updates.update_width){t.element.attr("width",t.options.width),t.svg.attr("width",t.options.width);var n=t.options.width,a=t.options.height,i=(n-(c=Math.min(n,a)))/2;o.default.select(t.canvas_datum).style({left:i+t.options.border-t.options.canvas_square_size/2+"px"}).attr("width",c-2*t.options.border-0+t.options.canvas_square_size),o.default.select(t.canvas_selected).style({left:i+t.options.border-t.options.canvas_selected_square_size/2+"px"}).attr("width",c-2*t.options.border-0+t.options.canvas_selected_square_size)}if(t.updates.update_height){t.element.attr("height",t.options.height),t.svg.attr("height",t.options.height);n=t.options.width;var s=((a=t.options.height)-(d=Math.min(n,a)))/2;o.default.select(t.canvas_datum).style({top:s+t.options.border-t.options.canvas_square_size/2+"px"}).attr("height",d-2*t.options.border-40+t.options.canvas_square_size),o.default.select(t.canvas_selected).style({top:s+t.options.border-t.options.canvas_selected_square_size/2+"px"}).attr("height",d-2*t.options.border-40+t.options.canvas_selected_square_size)}if(t.updates.update_x){n=t.options.width,a=t.options.height;var r=[0+(i=(n-(c=Math.min(t.options.width,t.options.height)))/2)+t.options.border,n-i-t.options.border-0],l=[0,c-2*t.options.border-0];t.x_scale=t._createScale(t.options.x_string,t.options.scale_x,r,!1),t.x_scale_canvas=t._createScale(t.options.x_string,t.options.scale_x,l,!1);s=(a-(d=Math.min(t.options.width,t.options.height)))/2;t.x_axis_offset=a-s-t.options.border-40,t.x_axis=o.default.svg.axis().scale(t.x_scale).orient("bottom"),t.x_axis_layer.attr("transform","translate(0,"+t.x_axis_offset+")").call(t.x_axis)}if(t.updates.update_y){n=t.options.width,a=t.options.height;var c=Math.min(t.options.width,t.options.height),d=Math.min(t.options.width,t.options.height);i=(n-c)/2,r=[a-(s=(a-d)/2)-t.options.border-40,0+s+t.options.border],l=[d-2*t.options.border-40,0];t.y_axis_offset=0+i+t.options.border,t.y_scale=t._createScale(t.options.y_string,t.options.scale_y,r,!1),t.y_scale_canvas=t._createScale(t.options.y_string,t.options.scale_y,l,!1),t.y_axis=o.default.svg.axis().scale(t.y_scale).orient("left"),t.y_axis_layer.attr("transform","translate("+t.y_axis_offset+",0)").call(t.y_axis)}if(t.updates.update_indices){t.inverse_indices={};for(var u=t.options.indices.length,p=0;p!=u;++p)t.inverse_indices[t.options.indices[p]]=p}if(t.updates.update_x_label){var h=t.svg.attr("width")/2,g=40;t.x_axis_layer.selectAll(".label").remove(),t.x_axis_layer.append("text").attr("class","label").attr("x",h).attr("y",g).style("text-anchor","middle").style("font-weight","bold").text(t.options.x_label)}if(t.updates.update_y_label){t.y_axis_layer.selectAll(".label").remove();h=-(t.y_axis_layer.node().getBBox().width+15),g=t.svg.attr("height")/2;t.y_axis_layer.append("text").attr("class","label").attr("x",h).attr("y",g).attr("transform","rotate(-90,"+h+","+g+")").style("text-anchor","middle").style("font-weight","bold").text(t.options.y_label)}if(t.updates.render_data){h=t.options.x,g=t.options.y;var _=t.options.v,m=t.options.filtered_indices,f=t.canvas_datum_layer,v=(p=-1,m.length),b=t.options.canvas_square_size,y=(z=t.options.canvas_square_border_size)/2,x=I=b-2*z,w=O=b-z,A=Date;window.performance&&(A=window.performance);var k=A.now();for(f.clearRect(0,0,t.canvas_datum.width,t.canvas_datum.height),f.strokeStyle="black",f.lineWidth=z;++p<v;){var C=_[M=m[p]];j=t._validateValue(C)?t.options.colorscale(C):e("#color-switcher").colorswitcher("get_null_color"),f.fillStyle=j,T=Math.round(t.x_scale_canvas(h[M])),E=Math.round(t.y_scale_canvas(g[M])),f.fillRect(T+z,E+z,I,x),f.strokeRect(T+y,E+y,O,w)}var S=A.now();console.log("Time to render "+m.length+" canvas points: "+(S-k)+" milliseconds.")}if(t.updates.render_selection){h=t.options.x,g=t.options.y,_=t.options.v;var T,E,j,z,R=t.options.filtered_selection,I=(f=t.canvas_selected_layer,p=-1,v=R.length,b=t.options.canvas_selected_square_size,y=(z=t.options.canvas_selected_square_border_size)/2,x=b-2*z),O=w=b-z;for(f.clearRect(0,0,t.canvas_selected.width,t.canvas_selected.height),f.strokeStyle="black",f.lineWidth=z;++p<v;){var M;C=_[M=R[p]];j=t._validateValue(C)?t.options.colorscale(C):e("#color-switcher").colorswitcher("get_null_color"),f.fillStyle=j,T=Math.round(t.x_scale_canvas(h[M])),E=Math.round(t.y_scale_canvas(g[M])),f.fillRect(T+z,E+z,I,x),f.strokeRect(T+y,E+y,O,w)}}if(t.updates.open_images){t.options.open_images.forEach(function(e){void 0===e.uri&&(e.uri=t.options.images[e.index]),void 0===e.width&&(e.width=t.options.pinned_width),void 0===e.height&&(e.height=t.options.pinned_height)});c=Number(t.svg.attr("width")),d=Number(t.svg.attr("height"));var N=[];t.options.open_images.forEach(function(e,n){N.push({index:e.index,uri:e.uri.trim(),image_class:"open-image",x:c*e.relx,y:d*e.rely,width:e.width,height:e.height,target_x:t.x_scale(t.options.x[e.index]),target_y:t.y_scale(t.options.y[e.index])})}),t._open_images(N)}if(t.updates.update_leaders&&e(".open-image").each(function(n,o){o=e(o);var a=Number(o.attr("data-index"));o.find(".leader").attr("x2",t.x_scale(t.options.x[a])-Number(o.attr("data-transx"))).attr("y2",t.y_scale(t.options.y[a])-Number(o.attr("data-transy"))).attr("data-targetx",t.x_scale(t.options.x[a])).attr("data-targety",t.y_scale(t.options.y[a]))}),t.updates.render_legend){t.legend_layer.append("defs").append("linearGradient").attr("id","color-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");t.legend_layer.append("rect").classed("color",!0).attr("width",10).attr("height",200).attr("x",0).attr("y",0).style("fill","url(#color-gradient)")}if(t.updates.update_legend_colors){var B=t.legend_layer.select("#color-gradient").selectAll("stop").data(t.options.gradient);B.exit().remove(),B.enter().append("stop"),B.attr("offset",function(e){return e.offset+"%"}).attr("stop-color",function(e){return e.color})}if(t.updates.update_legend_position){n=Number(t.options.width),a=Number(t.options.height),c=Math.min(t.options.width,t.options.height),d=Math.min(t.options.width,t.options.height);var L=parseInt((d-t.options.border-40)/2),D=t.y_axis_layer.node().getBBox().width;i=(n+t.x_axis_layer.node().getBBox().width)/2;if("moved"!=t.legend_layer.attr("data-status")){var P=parseInt(D+10+i),H=parseInt(a/2-L/2);t.legend_layer.attr("transform","translate("+P+","+H+")").attr("data-transx",P).attr("data-transy",H)}t.legend_layer.select("rect.color").attr("height",L)}if(t.updates.update_legend_axis){r=[0,parseInt(t.legend_layer.select("rect.color").attr("height"))];t.legend_scale=t._createScale(t.options.v_string,t.options.scale_v,r,!0),t.legend_axis=o.default.svg.axis().scale(t.legend_scale).orient("right"),t.legend_axis_layer.attr("transform","translate("+parseInt(t.legend_layer.select("rect.color").attr("width"))+",0)").call(t.legend_axis)}if(t.updates.update_v_label){console.log("updating v label."),t.legend_layer.selectAll(".label").remove();h=-15,g=(L=parseInt(t.legend_layer.select("rect.color").attr("height")))/2;t.legend_layer.append("text").attr("class","label").attr("x",h).attr("y",g).attr("transform","rotate(-90,"+h+","+g+")").style("text-anchor","middle").style("font-weight","bold").text(t.options.v_label)}t.updates={}},_sync_open_images:function(){var t=Number(this.svg.attr("width")),n=Number(this.svg.attr("height")),o=[];e(".open-image").each(function(a,i){var s=(i=e(i)).find("image.image");o.push({index:Number(i.attr("data-index")),uri:i.attr("data-uri"),relx:Number(i.attr("data-transx"))/t,rely:Number(i.attr("data-transy"))/n,width:Number(s.attr("width")),height:Number(s.attr("height"))})}),this.element.trigger("open-images-changed",[o])},_open_images:function(n){var i=this;if(0!=n.length){var r=n[0];if(-1==e.inArray(r.index,i.options.hidden_simulations)){if("hover-image"!=r.image_class||i.opening_image==r.index){if(i.image_layer.select("g."+r.image_class+"[data-uri='"+r.uri+"']").empty()){void 0===r.width&&(r.width=i.options.pinned_width),void 0===r.height&&(r.height=i.options.pinned_height),void 0===r.x&&(r.x=i._getDefaultXPosition(r.index,r.width)),void 0===r.y&&(r.y=i._getDefaultYPosition(r.index,r.height)),i.datum_layer.selectAll("circle[data-index='"+r.index+"']").classed("openHover",!0);var l=i.image_layer.append("g").attr("data-uri",r.uri).attr("data-transx",r.x).attr("data-transy",r.y).attr("transform","translate("+r.x+", "+r.y+")").attr("class",r.image_class+" image-frame").attr("data-index",r.index).attr("data-uri",r.uri).call(o.default.behavior.drag().on("drag",function(){if(0<=o.default.event.y&&o.default.event.y<=i.options.height&&0<=o.default.event.x&&o.default.event.x<=i.options.width){var e=o.default.select(this),t=Number(e.attr("data-transx")),n=Number(e.attr("data-transy"));t+=o.default.event.dx,n+=o.default.event.dy,e.attr("data-transx",t),e.attr("data-transy",n),e.attr("transform","translate("+t+", "+n+")");var a=e.select(".leader");a.attr("x2",Number(a.attr("data-targetx"))-t),a.attr("y2",Number(a.attr("data-targety"))-n)}}).on("dragstart",function(){i.state="moving";var e=o.default.select(o.default.event.sourceEvent.target);if(e.classed("outline")||e.classed("image")){o.default.event.sourceEvent.stopPropagation();var t=o.default.select(this);t.classed("hover-image")&&(i.opening_image=null,i.close_hover_timer&&(window.clearTimeout(i.close_hover_timer),i.close_hover_timer=null),t.classed("hover-image",!1).classed("open-image",!0),r.image_class="open-image",i.datum_layer.selectAll("circle.openHover").classed("openHover",!1))}}).on("dragend",function(){i.state="",i._sync_open_images()})).on("mousedown",function(){o.default.event.target.classList.contains("image")&&e(o.default.event.target.parentNode).detach().appendTo(i.image_layer.node())}).on("mouseup",function(){});"target_x"in r&&"target_y"in r&&l.append("line").attr("class","leader").attr("x1",r.width/2).attr("y1",r.height/2).attr("x2",r.target_x-Number(l.attr("data-transx"))).attr("y2",r.target_y-Number(l.attr("data-transy"))).attr("data-targetx",r.target_x).attr("data-targety",r.target_y).style("stroke","black").style("stroke-width",1);l.append("rect").attr("class","outline").attr("x",-.5).attr("y",-.5).attr("width",r.width+1).attr("height",r.height+1).style("stroke","black").style("stroke-width","1px").style("fill","white");i.close_hover_timer=window.setTimeout(function(){i._hover_timeout(r.index,0)},1e3)}if(r.uri in i.options.image_cache){console.log("Displaying image "+r.uri+" from cache");var c=(window.URL||window.webkitURL).createObjectURL(i.options.image_cache[r.uri]);void 0===r.width&&(r.width=i.options.pinned_width),void 0===r.height&&(r.height=i.options.pinned_height),void 0===r.x&&(r.x=i._getDefaultXPosition(r.index,r.width)),void 0===r.y&&(r.y=i._getDefaultYPosition(r.index,r.height));(l=i.image_layer.select("g."+r.image_class+"[data-uri='"+r.uri+"']")).append("image").attr("class","image").attr("xlink:href",c).attr("x",0).attr("y",0).attr("width",r.width).attr("height",r.height).attr("data-ratio",r.width/r.height);var d=l.append("g").attr("class","resize-handle").attr("transform","translate("+(r.width-9)+", "+(r.height-9)+")").call(o.default.behavior.drag().on("drag",function(){if(0<=o.default.event.y&&o.default.event.y<=i.options.height&&0<=o.default.event.x&&o.default.event.x<=i.options.width){var e,t,n=o.default.select(this.parentNode),a=n.select("image.image"),s=(Number(a.attr("width")),Number(a.attr("height")),n.select("rect.outline")),r=o.default.select(this),l=n.select("line.leader"),c=n.select(".pin-button"),d=Number(a.attr("data-ratio")),u=o.default.event.x,p=o.default.event.y;u<50&&(u=50),p<50&&(p=50),(t=(e=u)/d)>p&&(e=(t=p)*d),a.attr("width",e),a.attr("height",t),s.attr("width",e+1),s.attr("height",t+1),r.attr("transform","translate("+(e-9)+", "+(t-9)+")"),c.attr("transform","translate("+(e-20)+",0)"),l.attr("x1",e/2),l.attr("y1",t/2)}}).on("dragstart",function(){i.state="resizing",o.default.selectAll([this.parentNode,o.default.select("#scatterplot").node()]).classed("resizing",!0),o.default.event.sourceEvent.stopPropagation();var e=o.default.select(this.parentNode);e.classed("hover-image")&&(i.opening_image=null,i.close_hover_timer&&(window.clearTimeout(i.close_hover_timer),i.close_hover_timer=null),e.classed("hover-image",!1).classed("open-image",!0),r.image_class="open-image",i.datum_layer.selectAll("circle.openHover").classed("openHover",!1))}).on("dragend",function(){o.default.selectAll([this.parentNode,o.default.select("#scatterplot").node()]).classed("resizing",!1),i.state="",i._sync_open_images()})).on("mousedown",function(){}).on("mouseup",function(){});d.append("path").attr("d","M0,8 L8,0 M4,8 L8,4").style("stroke","#878787").style("stroke-width",1).style("pointer-events","none"),d.append("rect").attr("class","resize-handle-mousetarget").attr("width",10).attr("height",10).attr("fill","transparent");var u=l.append("g").attr("class","close-button");return u.append("rect").attr("x",5).attr("y",5).attr("width",16).attr("height",16).attr("rx",2).attr("ry",2).style("fill","rgba(0%,0%,0%,0.2)").on("mousedown",function(){o.default.event.stopPropagation()}).on("mouseup",function(){o.default.event.stopPropagation()}).on("click",function(){o.default.event.stopPropagation(),o.default.select(o.default.event.target.parentNode.parentNode).remove(),i._sync_open_images()}),u.append("path").attr("d","M8 8 l10 10 m0 -10 l-10 10").style("stroke","rgba(100%,100%,100%, 0.8)").style("stroke-width",3).style("pointer-events","none"),l.append("g").attr("class","pin-button").attr("transform","translate("+(r.width-20)+",0)").append("image").attr("class","pin-icon").attr("x",2).attr("y",2).attr("width",16).attr("height",16).attr("xlink:href",s.default).on("mousedown",function(){o.default.event.stopPropagation()}).on("mouseup",function(){o.default.event.stopPropagation()}).on("click",function(){o.default.event.stopPropagation(),i.opening_image=null,i.close_hover_timer&&(window.clearTimeout(i.close_hover_timer),i.close_hover_timer=null),i.datum_layer.selectAll("circle.openHover").classed("openHover",!1);var e=o.default.select(o.default.event.target.parentNode.parentNode),t=e.select("image.image"),n=e.select("rect.outline"),a=e.select("g.resize-handle"),s=e.select("line.leader"),l=e.select(".pin-button");e.classed("hover-image",!1).classed("open-image",!0);var c=i.options.pinned_width,d=i.options.pinned_height,u=i._getDefaultXPosition(r.index,c),p=i._getDefaultYPosition(r.index,d);e.attr("data-transx",u).attr("data-transy",p).attr("transform","translate("+u+", "+p+")"),t.attr("width",c),t.attr("height",d),n.attr("width",c+1),n.attr("height",d+1),a.attr("transform","translate("+(c-9)+", "+(d-9)+")"),l.attr("transform","translate("+(c-20)+",0)"),s.attr("x1",c/2).attr("y1",d/2).attr("x2",r.target_x-Number(e.attr("data-transx"))).attr("y2",r.target_y-Number(e.attr("data-transy"))),i._sync_open_images()}),r.no_sync||i._sync_open_images(),void i._open_images(n.slice(1))}if(!i.login_open){i.login_open=!0;var p=(0,a.default)(r.uri);i.remotes.get_remote({hostname:p.hostname(),title:"Login to "+p.hostname(),message:"Loading "+p.pathname(),cancel:function(){i.login_open=!1},success:function(e){var o=new XMLHttpRequest;o.image=r,o.open("GET",t.default+"remotes/"+e+"/file"+p.pathname(),!0),o.responseType="arraybuffer",o.onload=function(e){if(404==this.status||500==this.status)return i.remotes.delete_remote(p.hostname()),void i._open_images(n);if(400!=this.status){var t=new Uint8Array(this.response),o=new Blob([t],{type:this.getResponseHeader("content-type")});return i.options.image_cache[r.uri]=o,void i._open_images(n)}console.log(this),console.log(this.getAllResponseHeaders());var a=this.getResponseHeader("slycat-message"),s=this.getResponseHeader("slycat-hint");a&&s?window.alert(a+"\n\n"+s):a?window.alert(a):window.alert("Error loading image "+this.image.uri+": "+this.statusText)},o.send(),i.login_open=!1}})}}}else i._open_images(n.slice(1))}},_close_hidden_simulations:function(){var t=this;e("g.image-frame").filter(function(){return-1==e.inArray(e(this).data("index"),t.options.filtered_indices)}).remove()},_schedule_hover_canvas:function(e){var t=this;t._cancel_hover_canvas(),""==t.state&&(t.hover_timer_canvas=window.setTimeout(function(){t._open_hover_canvas(e)},t.options.hover_time))},_open_hover_canvas:function(e){if(""==this.state){var t=this._offsetX(e),n=this._offsetY(e),o=this.options.filtered_indices,a=this.options.filtered_selection,i=this.options.canvas_square_size,s=i/2,r=this.options.canvas_selected_square_size,l=r/2;this._open_first_match(t,n,a,l,r)||this._open_first_match(t,n,o,s,i)}},_open_first_match:function(e,t,n,o,a){for(var i=this.options.x,s=this.options.y,r=n.length-1;r>-1;r--){var l=n[r],c=Math.round(this.x_scale(i[l]))-o,d=Math.round(this.y_scale(s[l]))-o;if(e>=c&&e<=c+a&&t>=d&&t<=d+a)return""!=this.options.images[l].trim()&&this._open_hover(l),!0}return!1},_cancel_hover_canvas:function(){this.hover_timer_canvas&&(window.clearTimeout(this.hover_timer_canvas),this.hover_timer_canvas=null)},_schedule_hover:function(e){var t=this;""==t.state&&null!=t.options.images&&0!=t.options.images.length&&""!=t.options.images[t.options.indices[e]].trim()&&(t._cancel_hover(),t.hover_timer=window.setTimeout(function(){t._open_hover(e)},t.options.hover_time))},_cancel_hover:function(){this.hover_timer&&(window.clearTimeout(this.hover_timer),this.hover_timer=null)},_open_hover:function(e){if(this.datum_layer.select("circle.openHover[data-index='"+e+"']").empty()){this._close_hover(),this.opening_image=e;var t=this.svg.attr("width"),n=this.svg.attr("height"),o=.85*Math.min(t,n),a=.85*Math.min(t,n);this._open_images([{index:this.options.indices[e],uri:this.options.images[this.options.indices[e]].trim(),image_class:"hover-image",x:Math.min(this.x_scale(this.options.x[e])+10,t-o-this.options.border-10),y:Math.min(this.y_scale(this.options.y[e])+10,n-a-this.options.border-10),width:o,height:a,target_x:this.x_scale(this.options.x[e]),target_y:this.y_scale(this.options.y[e]),no_sync:!0}])}},_hover_timeout:function(e,t){var n=this;t>1e3?n._close_hover():n._is_hovering(e)?n.close_hover_timer=window.setTimeout(function(){n._hover_timeout(e,0)},50):n.close_hover_timer=window.setTimeout(function(){n._hover_timeout(e,t+50)},50)},_is_hovering:function(e){var t=this.image_layer.selectAll(".hover-image[data-index='"+e+"']:hover").empty(),n=this.datum_layer.selectAll("circle[data-index='"+e+"']:hover").empty(),o=this.selected_layer.selectAll("circle[data-index='"+e+"']:hover").empty();return!(t&&n&&o)},_close_hover:function(){this.opening_image=null,this.close_hover_timer&&(window.clearTimeout(this.close_hover_timer),this.close_hover_timer=null),this._cancel_hover(),this.image_layer.selectAll(".hover-image").remove(),this.datum_layer.selectAll("circle.openHover").classed("openHover",!1)},_offsetX:function(t){return t.pageX-t.currentTarget.getBoundingClientRect().left-e(document).scrollLeft()},_offsetY:function(t){return t.pageY-t.currentTarget.getBoundingClientRect().top-e(document).scrollTop()},pin:function(e){var t=this,n=t.options.pinned_width,o=t.options.pinned_height,a=[];e.forEach(function(e,i){a.push({index:t.options.indices[e],uri:t.options.images[t.options.indices[e]].trim(),image_class:"open-image",x:t._getDefaultXPosition(e,n),y:t._getDefaultYPosition(e,o),width:n,height:o,target_x:t.x_scale(t.options.x[e]),target_y:t.y_scale(t.options.y[e])})}),t._open_images(a)}})}).call(this,n(1))},409:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAs0lEQVQ4jdXRsWoCQRgE4A9RLMRCsFHsrO2jb5E6PoaIZTpLa/FZrJJ30IT0gaSwsBBB0OLu4LLe6WllBqbZf2b+2V3+Ewao3Wvu44B31G81d/CJY8y3IiFNPOEV3ylzwmUiLGeYv9C9suDn0nCcsTHhHs/X6sMoJ2BSxAwVfATmHRqhsJQTMEUVs9TZGptQmPWIL2ihhy1WmIt+4wxhQDtuNYxrw0J0pd+ctn9QLSJ6LJwAXgcqz7/uBCYAAAAASUVORK5CYII="},410:function(e,t,n){"use strict";(function(e){var t=a(n(62)),o=a(n(15));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(3));function a(e){return e&&e.__esModule?e:{default:e}}n(280),e.widget("parameter_image.controls",{options:{mid:null,model_name:null,aid:null,metadata:null,"x-variable":null,"y-variable":null,"image-variable":null,"color-variable":null,"auto-scale":!0,x_variables:[],y_variables:[],image_variables:[],color_variables:[],rating_variables:[],category_variables:[],selection:[],hidden_simulations:[],indices:[]},_create:function(){var t=this;this.x_label=e("<label for='x-axis-switcher'>X Axis:</label>").appendTo(this.element),this.x_select=e("<select id='x-axis-switcher' name='x-axis-switcher' />").change(function(){t.element.trigger("x-selection-changed",this.value)}).appendTo(this.element),this.y_label=e("<label for='y-axis-switcher'>Y Axis:</label>").appendTo(this.element),this.y_select=e("<select id='y-axis-switcher' name='y-axis-switcher' />").change(function(){t.element.trigger("y-selection-changed",this.value)}).appendTo(this.element),null!=this.options.image_variables&&this.options.image_variables.length>0&&(this.images_label=e("<label for='images-switcher'>Image Set:</label>").appendTo(this.element),this.images_select=e("<select id='images-switcher' name='images-switcher' />").change(function(){t.element.trigger("images-selection-changed",this.value)}).appendTo(this.element)),this.color_label=e("<label for='color-variable-switcher'>Point Color:</label>").appendTo(this.element),this.color_select=e("<select id='color-variable-switcher' name='color-variable-switcher' />").change(function(){t.element.trigger("color-selection-changed",this.value)}).appendTo(this.element),this.selection_label=e("<label for='selection-control'>Selection:</label>").appendTo(this.element),this.selection_select=e("<select id='selection-control' name='selection-control' />").change(function(){var n=e("option:selected",this),o=n.attr("label"),a=(n.text(),this.value);if("set"==o||"clear"==o){var i=n.parent().attr("label");"set"==o?function(t,n){e("#set-value-form #set-value-form-variable").text(t),e("#set-value-form input").attr("value",""),e("#set-value-form input#variable-index").attr("value",n),e("#set-value-form .dialogErrorMessage").empty(),e("#set-value-form").dialog("open")}(i,a):"clear"==o&&function(t,n){e("#clear-value-form #clear-value-form-variable").text(t),e("#set-value-form input").attr("value",""),e("#clear-value-form input#variable-index").attr("value",n),e("#clear-value-form").dialog("open")}(i,a)}else"hide"==a?t.element.trigger("hide-selection",t.options.selection):"show"==a?t.element.trigger("show-selection",t.options.selection):"pin"==a&&t.element.trigger("pin-selection",t.options.selection);this.selectedIndex=0}).appendTo(this.element),this.show_all_button=e("<button>Show All</button>").click(function(){t.element.trigger("show-all")}).appendTo(this.element),this.auto_scale=e("<input id='auto-scale-option' name='auto-scale-option' value='auto-scale' type='checkbox' checked='true'>").change(function(){t.element.trigger("auto-scale",this.checked)}).appendTo(this.element),this.auto_scale_label=e("<label for='auto-scale-option'>Auto Scale</label>").appendTo(this.element),this.csv_button=e("<button>Download Data Table</button>").click(function(){0==t.options.selection.length&&0==t.options.hidden_simulations.length?t._write_data_table():function(){var n="";t.options.selection.length>0&&(n+="You have "+t.options.selection.length+" rows selected. ");if(t.options.hidden_simulations.length>0){var o=t.options.metadata["row-count"]-t.options.hidden_simulations.length;n+="You have "+o+" rows visible. "}n+="What would you like to do?",e("#csv-save-choice-form #csv-save-choice-label").text(n);var a=e.extend({},t.save_choice_buttons);0==t.options.selection.length&&delete a["Save Selected Rows"];0==t.options.hidden_simulations.length&&delete a["Save Visible Rows"];e("#csv-save-choice-form").dialog("option","buttons",a),e("#csv-save-choice-form").dialog("open")}()}).appendTo(this.element),e("#set-value-form").dialog({modal:!0,autoOpen:!1,buttons:{Apply:function(){var n=e("input#variable-index",this).val(),o=e("input#value",this).val().trim(),a="string"!=t.options.metadata["column-types"][n],i=o.length>0;if(i&&a&&isNaN(Number(o))&&(i=!1),i)t.element.trigger("set-value",{selection:t.options.selection,variable:n,value:a?o:'"'+o+'"'}),e(this).dialog("close");else{var s="Please enter a value.";a&&(s="Please enter a numeric value."),e(".dialogErrorMessage",this).text(s)}},Cancel:function(){e(this).dialog("close")}}}),e("#clear-value-form").dialog({modal:!0,autoOpen:!1,buttons:{Clear:function(){var n=e("input#variable-index",this).val();t.element.trigger("set-value",{selection:t.options.selection,variable:n,value:NaN}),e(this).dialog("close")},Cancel:function(){e(this).dialog("close")}}}),t.save_choice_buttons={"Save The Whole Table":function(){t._write_data_table(),e(this).dialog("close")},"Save Visible Rows":function(){t._write_data_table(t._filterIndices()),e(this).dialog("close")},"Save Selected Rows":function(){t._write_data_table(t.options.selection),e(this).dialog("close")},Cancel:function(){e(this).dialog("close")}},e("#csv-save-choice-form").dialog({modal:!0,autoOpen:!1,buttons:t.save_choice_buttons}),t._set_x_variables(),t._set_y_variables(),t._set_image_variables(),t._set_color_variables(),t._set_auto_scale(),t._set_selection_control(),t._set_show_all()},_write_data_table:function(n){var a=this;e.ajax({type:"POST",url:o.default+"models/"+a.options.mid+"/arraysets/"+a.options.aid+"/data",data:(0,t.default)({hyperchunks:"0/.../..."}),contentType:"application/json",success:function(e){a._write_csv(a._convert_to_csv(e,n),a.options.model_name+"_data_table.csv")},error:function(e,t,n){window.alert("Error retrieving data table: "+n)}})},_write_csv:function(e,t){var n=document,o=n.createElement("a");t=t||"slycatDataTable.csv";if(o.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),"download"in o)return o.setAttribute("download",t),o.innerHTML="downloading...",n.body.appendChild(o),setTimeout(function(){var e=n.createEvent("MouseEvent");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e),n.body.removeChild(o)},66),!0;console.log("++ firefox/chrome detect failed")},_convert_to_csv:function(e,t){var n,o,a,i=t||[],s=e[0].length,r=e.length,l="";for(o=0;o<r;o++)l+=this.options.metadata["column-names"][o]+",";for(l=l.slice(0,-1),l+="\n",n=0;n<s;n++)if(0==i.length||i.indexOf(n)>-1){for(o=0;o<r;o++)null===(a=e[o][n])&&(a=NaN),l+=a+",";l=l.slice(0,-1),l+="\n"}return l},_set_x_variables:function(){var t=this;this.x_select.empty();for(var n=0;n<this.options.x_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.x_variables[n]]).attr("value",this.options.x_variables[n]).attr("selected",function(){return t.options["x-variable"]==t.options.x_variables[n]&&"selected"}).appendTo(this.x_select)},_set_y_variables:function(){var t=this;this.y_select.empty();for(var n=0;n<this.options.y_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.y_variables[n]]).attr("value",this.options.y_variables[n]).attr("selected",function(){return t.options["y-variable"]==t.options.y_variables[n]&&"selected"}).appendTo(this.y_select)},_set_image_variables:function(){var t=this;if(null!=this.options.image_variables&&this.options.image_variables.length>0){this.images_select.empty();for(var n=0;n<this.options.image_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.image_variables[n]]).attr("value",this.options.image_variables[n]).attr("selected",function(){return t.options["image-variable"]==t.options.image_variables[n]&&"selected"}).appendTo(this.images_select)}},_set_color_variables:function(){var t=this;this.color_select.empty();for(var n=0;n<this.options.color_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.color_variables[n]]).attr("value",this.options.color_variables[n]).attr("selected",function(){return t.options["color-variable"]==t.options.color_variables[n]&&"selected"}).appendTo(this.color_select)},_set_auto_scale:function(){this.auto_scale.prop("checked",this.options["auto-scale"])},_set_selection_control:function(){this.selection_select.empty(),e("<option />").text("Pick Action").appendTo(this.selection_select);for(var t=0;t<this.options.rating_variables.length;t++){var n=e("<optgroup />").attr("label",this.options.metadata["column-names"][this.options.rating_variables[t]]).appendTo(this.selection_select);e("<option />").text("Set").attr("value",this.options.rating_variables[t]).attr("label","set").appendTo(n)}for(t=0;t<this.options.category_variables.length;t++){n=e("<optgroup />").attr("label",this.options.metadata["column-names"][this.options.category_variables[t]]).appendTo(this.selection_select);e("<option />").text("Set").attr("value",this.options.category_variables[t]).attr("label","set").appendTo(n),e("<option />").text("Clear").attr("value",this.options.category_variables[t]).attr("label","clear").appendTo(n)}var o=e("<optgroup />").attr("label","Scatterplot Points").appendTo(this.selection_select);e("<option />").text("Hide").attr("value","hide").appendTo(o),e("<option />").text("Show").attr("value","show").appendTo(o),e("<option />").text("Pin").attr("value","pin").appendTo(o),this._set_selection()},_set_selected_x:function(){this.x_select.val(this.options["x-variable"])},_set_selected_y:function(){this.y_select.val(this.options["y-variable"])},_set_selected_image:function(){null!=this.options["image-variable"]&&this.options.image_variables.length>0&&this.images_select.val(this.options["image-variable"])},_set_selected_color:function(){this.color_select.val(this.options["color-variable"])},_set_selection:function(){this.selection_select.prop("disabled",0==this.options.selection.length),this.selection_label.toggleClass("disabled",0==this.options.selection.length)},_set_show_all:function(){var e=0==this.options.hidden_simulations.length,t="Show All Hidden Scatterplot Points";e&&(t="There are currently no hidden scatterplot points to show."),this.show_all_button.prop("disabled",e),this.show_all_button.attr("title",t)},_filterIndices:function(){for(var t=this.options.indices,n=this.options.hidden_simulations,o=this._cloneArrayBuffer(t),a=t.length-1;a>=0;a--){e.inArray(t[a],n)>-1&&o.splice(a,1)}return o},_cloneArrayBuffer:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},_setOption:function(e,t){this.options[e]=t,"x-variable"==e?this._set_selected_x():"y-variable"==e?this._set_selected_y():"image-variable"==e?this._set_selected_image():"color-variable"==e?this._set_selected_color():"image_variables"==e?this._set_image_variables():"x_variables"==e?this._set_x_variables():"y_variables"==e?this._set_y_variables():"color_variables"==e?this._set_color_variables():"selection"==e?this._set_selection():"hidden_simulations"==e&&this._set_show_all()}})}).call(this,n(1))},411:function(e,t,n){"use strict";(function(e){var t=s(n(15)),o=s(n(281)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(301)),i=s(n(25));function s(e){return e&&e.__esModule?e:{default:e}}e.widget("parameter_image.dendrogram",{options:{clusters:[],cluster:0,cluster_data:null,collapsed_nodes:null,expanded_nodes:null,selected_nodes:null,color_array:null,colorscale:null,data_table_index_array:null,dendrogram_sort_order:!0,highlight:[],hidden_simulations:[],images:[],square_size:8,square_border_size:1,selected_square_size:16,selected_square_border_size:2,hover_timeout:1e3,image_cache:{},cache_references:[{}],login_dialog:null},_create:function(){var t=this;this.remotes=a.create_pool(),t.login_open=!1,t.options.image_cache=t.options.cache_references[0],t.preview=e("<div id='image-preview'>").on("mouseover",function(){t._clear_hover_timer()}).on("mouseout",function(e){t._close_preview()}).on("click",function(e){t._close_preview(!0)}).appendTo(e("#scatterplot-pane")),t.preview_image=e("<img id='image-preview-image' />").appendTo(t.preview),this._set_cluster()},_set_cluster:function(){var t=this;t.container=o.default.select("#dendrogram-viewer");for(var n=this.options.cluster_data,a=this.options.collapsed_nodes,i=this.options.expanded_nodes,s=this.options.selected_nodes,r=n.linkage,l=n["input-indices"],c=n.exemplars,d=[],u=0;u<l.length;u++)d.push({"node-index":d.length,leaves:1,exemplar:c[u],selected:!1,"image-index":u,"data-table-index":l[u]});for(u=0;u<r.length;u++)d.push({"node-index":d.length,children:[d[r[u][0]],d[r[u][1]]],leaves:r[u][3],exemplar:c[u+l.length],selected:!1,"image-index":null,"data-table-index":null});var p=this.element.parent().width()-20-20-30,h=this.element.parent().height()-20-20,g=o.default.layout.cluster().size([h,p]).separation(function(){return 1});t.container.selectAll("g").remove(),t.sortControl=e('<div id="dendrogram-sort-control"></div>').appendTo("#dendrogram-pane").click(function(){e(this).hasClass("selected")||(t.options.dendrogram_sort_order=!0,t._set_dendrogram_sort_order_state(),t.element.trigger("sort-by-dendrogram-order"))}),this._set_dendrogram_sort_order_state();var _=t.container.append("svg:g").attr("transform","translate(20,20)"),m=d[d.length-1];t.root=m,m.x0=h/2,m.y0=0;var f=g.nodes(m).reverse(),v=-1;if(f.forEach(function(e){v=Math.max(v,e.depth)}),null==a&&null==i&&null==s||f.forEach(function(e){null!=s&&s.length>0&&s.indexOf(e["node-index"])>-1&&(e.selected=!0),a&&a.indexOf(e["node-index"])>-1&&e.children?A(e):i&&i.indexOf(e["node-index"])>-1&&e._children&&A(e)}),null==i&&null==a&&f.forEach(function(e,t){3==e.depth&&A(e)}),null==s)w(t,m,!0);else{t._style_selected_nodes(),t._color_links();var b=[];x(m,b),t.element.trigger("node-selection-changed",{node:null,skip_bookmarking:!0,selection:b})}function y(e,t){return e.target._children?"M"+e.source.y+","+e.source.x+"V"+e.target.x+"H"+p:"M"+e.source.y+","+e.source.x+"V"+e.target.x+"H"+e.target.y}function x(e,t){if(e.selected&&t.push({"node-index":e["node-index"],"image-index":e["image-index"],"data-table-index":e["data-table-index"]}),e.children)for(var n=0;n<e.children.length;n++)x(e.children[n],t);if(e._children)for(n=0;n<e._children.length;n++)x(e._children[n],t)}function w(e,t,n){!function e(t){if(t.selected=!0,t.children)for(var n=0;n<t.children.length;n++)e(t.children[n]);if(t._children)for(n=0;n<t._children.length;n++)e(t._children[n])}(t),e._style_selected_nodes(),e._color_links();var o=[];x(m,o),e.options.selected_nodes=e._getNodeIndexes(o),e.element.trigger("node-selection-changed",{node:t,skip_bookmarking:n,selection:o})}function A(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),t.element.trigger("node-toggled",e)}!function n(a,i){var s=o.default.event&&o.default.event.altKey?5e3:500;var r=g.nodes(m).reverse();r.forEach(function(e){(e.children||e._children)&&(e.y=e.depth*(p/v))});var l=_.selectAll("g.node").data(r,function(e){return e["node-index"]});function c(e,t){if(e.children)for(var n=0;n<e.children.length;n++)e.children[n].depth==t&&e.children[n].children?A(e.children[n]):e.children[n].depth<t&&e.children[n]._children?(A(e.children[n]),c(e.children[n],t)):e.children[n].depth<t&&e.children[n].children&&c(e.children[n],t)}var u=l.enter().append("svg:g").attr("class","node").classed("selected",function(e){return e.selected}).attr("transform",function(e){return"translate("+a.y0+","+a.x0+")"}).style("opacity",1e-6);var h=u.append("svg:g").attr("class","subtree").style("opacity",1e-6).style("display",function(e){return e.leaves>1?"inline":"none"}).on("click",function(e){t._close_preview(!0),A(e);c(e,e.depth+9999),n(e)});h.append("svg:path").attr("class","subtree-glyph").attr("title","Expand all").attr("alt","Expand all").attr("d","M 0 0 L 40 -13 L 40 13 Z").style("fill","url(#subtree-gradient)");h.append("svg:path").attr("class","filled-glyph").attr("title","Expand all").attr("alt","Expand all").attr("d","M 0 0 L 40 -13 L 40 13 Z").style("fill","#7767b0");h.append("svg:text").attr("x",28).attr("dy",".4em").attr("text-anchor","middle").attr("title","Expand all").attr("alt","Expand all").text(function(e){return e.leaves});h.append("svg:text").attr("x",-9).attr("dy",-5).attr("text-anchor","middle").text("+").style("fill","black").on("click",function(e){t._close_preview(!0),A(e);c(e,e.depth+2),n(e),o.default.event.stopPropagation()});var f=u.append("svg:g").attr("class","glyph").on("click",function(n){t._close_preview(!0),o.default.event.ctrlKey||o.default.event.metaKey?n.selected?function(t,n,o){(function e(t){t.selected=!1;if(t.children)for(var n=0;n<t.children.length;n++)e(t.children[n]);if(t._children)for(var n=0;n<t._children.length;n++)e(t._children[n])})(n),function t(n){if(n.children||n._children){if(n.selected){var o=!1,a=!1;return n.children&&e.each(n.children,function(e,n){a=t(n),o=o||a}),n._children&&e.each(n._children,function(e,n){a=t(n),o=o||a}),n.selected=o,o}return n.children&&e.each(n.children,function(e,n){t(n)}),n._children&&e.each(n._children,function(e,n){t(n)}),!1}return!!n.selected}(m),t._style_selected_nodes(),t._color_links();var a=[];x(m,a),t.options.selected_nodes=t._getNodeIndexes(a),t.element.trigger("node-selection-changed",{node:n,skip_bookmarking:o,selection:a})}(t,n):w(t,n):(e.each(d,function(e,t){t.selected=!1}),w(t,n))});f.append("svg:circle").attr("r",4.5).style("cursor","pointer").style("fill",function(e){return e.children||e._children?"#dbd9eb":"white"});f.append("svg:text").attr("x",-9).attr("dy",13).attr("text-anchor","middle").text("").style("fill","black").style("display",function(e){return e._children||!e.children&&!e._children?"none":"inline"}).on("click",function(e){t._close_preview(!0),A(e),n(e),o.default.event.stopPropagation()});t.options.square_size,t.options.square_border_size;t.options.selected_square_size,t.options.selected_square_border_size;var b=u.append("svg:g").attr("class","square").attr("transform",function(e){return e.leaves>1?"translate(65, 0)":"translate(25, 0)"}).style("opacity",1e-6).style("display","none");b.append("svg:rect").style("stroke","black").style("fill",function(n,o){if(null!==t.options.colorscale&&null!=t.options.color_array){var a=n["data-table-index"];if(null!=a){var i=t.options.color_array[a];return null!=i?t.options.colorscale(i):e("#color-switcher").colorswitcher("get_null_color")}return"black"}return"black"}).classed("nullValue",function(e,n){return null!=e["data-table-index"]&&(null==e["data-table-index"]||null===t.options.color_array[e["data-table-index"]])}).on("click",function(e){t._close_preview(!0),t._handle_highlight(e,o.default.event,this)});t._set_highlight();var k=l.transition().duration(s).attr("transform",function(e){return"translate("+(e._children?p-39:e.y+1)+","+e.x+")"}).style("opacity",1);l.classed("leaf",function(e){return e._children||!e.children&&!e._children});l.filter(".leaf").on("mouseover",function(e){t._open_preview(e)}).on("mouseout",function(e){t._close_preview()});k.select(".subtree").style("opacity",function(e){return e._children?1:1e-6}).style("display",function(e){return e._children?"inline":"none"});k.select(".subtree-glyph").style("fill","url(#subtree-gradient)");k.select(".square").style("opacity",function(e){return e._children||!e.children&&!e._children?1:1e-6}).each("end",function(){o.default.select(this).style("display",function(e){return e._children||!e.children&&!e._children?"inline":"none"})});k.select(".glyph text").style("display",function(e){return e._children||!e.children&&!e._children?"none":"inline"});var C=l.exit().transition().duration(s).attr("transform",function(e){return"translate("+a.y+","+a.x+")"}).style("opacity",1e-6).remove();C.select(".square").each("start",function(){o.default.select(this).style("display","none")});var S=_.selectAll("path.link").data(g.links(r),function(e){return e.target["node-index"]});S.enter().insert("svg:path","g").attr("class","link").attr("d",function(e){var t={x:a.x0,y:a.y0};return y({source:t,target:t})}).transition().duration(s).attr("d",y);S.transition().duration(s).attr("d",y);S.exit().transition().duration(s).attr("d",function(e){var t={x:a.x,y:a.y};return y({source:t,target:t})}).remove();t._color_links();r.forEach(function(e){e.x0=e.x,e.y0=e.y});if(!i){var T=[],E=[];!function e(t){if(t.children){T.push(t["node-index"]);for(var n=0;n<t.children.length;n++)e(t.children[n])}else t._children&&E.push(t["node-index"])}(m),t.options.expanded_nodes=T,t.options.collapsed_nodes=E,t.element.trigger("expanded-collapsed-nodes-changed",{expanded:T,collapsed:E})}}(m,!0)},_clear_hover_timer:function(){this.hover_timer&&(window.clearTimeout(this.hover_timer),this.hover_timer=null)},_open_preview:function(e){if(void 0!=e.exemplar){this._clear_hover_timer();var t=this.options.images[e.exemplar];this.target_image!=t&&(this.target_image=t,this.preview_image.hide(),this.preview.show(),this._display_image(t))}},_display_image:function(e){var n=this;if(e in n.options.image_cache){var o=(window.URL||window.webkitURL).createObjectURL(n.options.image_cache[e]);return n.preview_image.attr("src",o),void n.preview_image.show()}if(!n.login_open){n.login_open=!0;var a=(0,i.default)(e);n.remotes.get_remote({hostname:a.hostname(),title:"Login to "+a.hostname(),message:"Loading "+a.pathname(),cancel:function(){n.login_open=!1},success:function(o){var i=new XMLHttpRequest;i.open("GET",t.default+"remotes/"+o+"/file"+a.pathname(),!0),i.responseType="arraybuffer",i.onload=function(t){if(404==this.status||500==this.status)return n.remotes.delete_remote(a.hostname()),void n._open_images(images);if(400!=this.status){var o=new Uint8Array(this.response),i=new Blob([o],{type:this.getResponseHeader("content-type")});return n.options.image_cache[e]=i,void n._display_image(e)}console.log(this),console.log(this.getAllResponseHeaders());var s=this.getResponseHeader("slycat-message"),r=this.getResponseHeader("slycat-hint");s&&r?window.alert(s+"\n\n"+r):s?window.alert(s):window.alert("Error loading image "+this.image_uri+": "+this.statusText)},i.send(),n.login_open=!1}})}},_close_preview:function(e){var t=this;function n(){t.target_image=null,t.preview.hide(),t.preview_image.hide()}e?n():t.hover_timer=window.setTimeout(function(){n()},t.options.hover_timeout)},_set_color:function(){var t=this;this.container.selectAll("g.square rect").style("fill",function(n,o){var a=n["data-table-index"];if(null!=a){var i=t.options.color_array[a];return null!=i?t.options.colorscale(i):e("#color-switcher").colorswitcher("get_null_color")}return"black"}).classed("nullValue",function(e,n){return null!=e["data-table-index"]&&(null==e["data-table-index"]||null===t.options.color_array[e["data-table-index"]])})},_set_highlight:function(){var e=this,t=-e.options.square_size/2-e.options.square_border_size/2,n=-e.options.selected_square_size/2-e.options.selected_square_border_size/2,o="translate("+t+", "+t+")",a="translate("+n+", "+n+")";!function t(n){var o=!1;if(n.children){for(var a=0;a<n.children.length;a++)t(n.children[a])&&(o=!0);n.highlight=o}else if(n._children){for(var a=0;a<n._children.length;a++)t(n._children[a])&&(o=!0);n.highlight=o}else null!=n["data-table-index"]&&e.options.highlight.indexOf(n["data-table-index"])>-1?(n.highlight=!0,o=!0):(n.highlight=!1,o=!1);return o}(e.root),this.container.selectAll("g.square").classed("highlight",function(e,t){return!!e.highlight}),this.container.selectAll("g.square rect").attr("width",function(t){return t.highlight?e.options.selected_square_size:e.options.square_size}).attr("height",function(t){return t.highlight?e.options.selected_square_size:e.options.square_size}).style("stroke-width",function(t){return t.highlight?e.options.selected_square_border_size:e.options.square_border_size}).attr("transform",function(e){return e.highlight?a:o})},_handle_highlight:function(e,t,n){var a=function e(t){var n=[];if(t.children)for(var o=0;o<t.children.length;o++)null!=t.children[o]["data-table-index"]?n.push(t.children[o]["data-table-index"]):n=n.concat(e(t.children[o]));else if(t._children)for(var o=0;o<t._children.length;o++)null!=t._children[o]["data-table-index"]?n.push(t._children[o]["data-table-index"]):n=n.concat(e(t._children[o]));else null!=t["data-table-index"]&&n.push(t["data-table-index"]);return n}(e);if(t.ctrlKey||o.default.event.metaKey)if(e.highlight)for(var i=0;i<a.length;i++){var s=this.options.highlight.indexOf(a[i]);s>-1&&this.options.highlight.splice(s,1)}else for(i=0;i<a.length;i++)-1==this.options.highlight.indexOf(a[i])&&this.options.highlight.push(a[i]);else this.options.highlight=a;this._set_highlight(),this.element.trigger("selection-changed",[this.options.highlight])},_set_dendrogram_sort_order_state:function(){var e=this;e.sortControl.attr("title",function(t,n){return e.options.dendrogram_sort_order?"Inputs are sorted in dendrogram order":"Sort inputs in dendrogram order"}).toggleClass("selected",e.options.dendrogram_sort_order)},_set_hidden_simulations:function(){var e=this,t=[];!function t(n,o){var a=n["image-index"];null!=a&&(e.options.hidden_simulations.indexOf(a)>-1?n.selected=!1:(n.selected=!0,o.push({"node-index":n["node-index"],"image-index":n["image-index"],"data-table-index":n["data-table-index"]})));if(n.children)for(var i=0;i<n.children.length;i++)t(n.children[i],o);if(n._children)for(var i=0;i<n._children.length;i++)t(n._children[i],o)}(e.root,t),e.options.selected_nodes=e._getNodeIndexes(t),e._style_selected_nodes(),e._color_links(),e.element.trigger("node-selection-changed",{node:null,skip_bookmarking:!1,selection:t})},_style_selected_nodes:function(){this.container.selectAll(".node").classed("selected",function(e){return e.selected})},_color_links:function(){this.container.selectAll("path.link").attr("style",function(e){if(function e(t){if(t.selected)return!0;if(t.children){for(var n=0;n<t.children.length;n++)if(e(t.children[n]))return!0}else if(t._children)for(var n=0;n<t._children.length;n++)if(e(t._children[n]))return!0;return!1}(e.target))return e.source.selected?"stroke: black;":"stroke: #646464;"})},_getNodeIndexes:function(e){for(var t=[],n=null,o=0;o<e.length;o++)null!=(n=e[o]["node-index"])&&t.push(n);return t},resize_canvas:function(){this._set_cluster()},_setOption:function(e,t){this.options[e]=t,"cluster_data"==e?this._set_cluster():"color-options"==e?(this.options.color_array=t.color_array,this.options.colorscale=t.colorscale,this._set_color()):"colorscale"==e?this._set_color():"dendrogram_sort_order"==e?this._set_dendrogram_sort_order_state():"highlight"==e?(void 0==t&&(this.options.highlight=[]),this._set_highlight()):"hidden_simulations"==e&&this._set_hidden_simulations()}})}).call(this,n(1))},412:function(e,t,n){"use strict";(function(e){var t=i(n(15)),o=i(n(281));n(280),n(292),n(293),n(294),n(295),n(296),n(297);var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(282));function i(e){return e&&e.__esModule?e:{default:e}}e.widget("parameter_image.table",{options:{mid:null,aid:null,metadata:null,statistics:null,inputs:[],outputs:[],others:[],images:[],ratings:[],categories:[],"row-selection":[],"variable-selection":[],"sort-variable":null,"sort-order":null,"image-variable":null,"x-variable":null,"y-variable":null,colorscale:null,hidden_simulations:[]},_create:function(){var e=this;function t(e){return null==e?"&nbsp;":(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(e,n,a,i,s){return i.colorscale?"<div class='highlightWrapper"+(null==a?" null":"")+(o.default.hcl(i.colorscale(a)).l>50?" light":" dark")+"' style='background:"+i.colorscale(a)+"'>"+t(a)+"</div>":null==a?"<div class='highlightWrapper"+(null==a?" null":"")+"'>"+t(a)+"</div>":t(a)}function a(e,n,a,i,s){return i.colorscale?"<div class='highlightWrapper"+(null==a?" null":"")+(o.default.hcl(i.colorscale(a)).l>50?" light":" dark")+"' style='background:"+i.colorscale(a)+"'>"+t(a)+"</div>":null==a?"<div class='highlightWrapper"+(null==a?" null":"")+"'>"+t(a)+"</div>":t(a)}function i(t,n){e.data.set_sort(t,n),e.data.get_indices("sorted",e.options["row-selection"],function(o){e.grid.invalidate(),e.trigger_row_selection=!1,e.grid.setSelectedRows(o),e.grid.resetActiveCell(),o.length&&e.grid.scrollRowToTop(Math.min.apply(Math,o)),e.element.trigger("variable-sort-changed",[t,n])})}function s(t,n,o,a){var i={id:t,field:t,name:e.options.metadata["column-names"][t],toolTip:e.options.metadata["column-names"][t],sortable:!1,headerCssClass:n,cssClass:o,formatter:a,width:100,header:{buttons:[{cssClass:e.options["sort-variable"]==t?"ascending"==e.options["sort-order"]?"icon-sort-ascending":"icon-sort-descending":"icon-sort-off",tooltip:e.options["sort-variable"]==t&&"ascending"==e.options["sort-order"]?"Sort descending":"Sort ascending",command:e.options["sort-variable"]==t&&"ascending"==e.options["sort-order"]?"sort-descending":"sort-ascending"}]}};return e.options.images.indexOf(t)>-1?(i.headerCssClass+=" headerImage",i.header.buttons.push({cssClass:e.options["image-variable"]==t?"icon-image-on":"icon-image-off",tooltip:e.options["image-variable"]==t?"Current image variable":"Set as image variable",command:e.options["image-variable"]==t?"":"image-on"})):e.options.metadata["column-count"]-1!=t&&(i.headerCssClass+=" headerNumeric",i.header.buttons.push({cssClass:e.options["x-variable"]==t?"icon-x-on":"icon-x-off",tooltip:e.options["x-variable"]==t?"Current x variable":"Set as x variable",command:e.options["x-variable"]==t?"":"x-on"},{cssClass:e.options["y-variable"]==t?"icon-y-on":"icon-y-off",tooltip:e.options["y-variable"]==t?"Current y variable":"Set as y variable",command:e.options["y-variable"]==t?"":"y-on"})),i}for(var r in e.columns=[],e.columns.push(s(e.options.metadata["column-count"]-1,"headerSimId","rowSimId",n)),e.options.inputs)e.columns.push(s(e.options.inputs[r],"headerInput","rowInput",n));for(var r in e.options.outputs)e.columns.push(s(e.options.outputs[r],"headerOutput","rowOutput",n));for(var r in e.options.ratings)e.columns.push(s(e.options.ratings[r],"headerRating","rowRating",a));for(var r in e.options.categories)e.columns.push(s(e.options.categories[r],"headerCategory","rowCategory",a));for(var r in e.options.others)e.columns.push(s(e.options.others[r],"headerOther","rowOther",n));e.data=new e._data_provider({mid:e.options.mid,aid:e.options.aid,metadata:e.options.metadata,sort_column:e.options["sort-variable"],sort_order:e.options["sort-order"],inputs:e.options.inputs,outputs:e.options.outputs,indexOfIndex:e.options.metadata["column-count"]-1,hidden_simulations:e.options.hidden_simulations}),e.trigger_row_selection=!0,e.grid=new Slick.Grid(e.element,e.data,e.columns,{explicitInitialization:!0,enableColumnReorder:!1,editable:!0,editCommandHandler:e._editCommandHandler}),e.data.onDataLoaded.subscribe(function(t,n){for(var o=n.from;o<=n.to;o++)e.grid.invalidateRow(o);e.grid.render()});var l=new Slick.Plugins.HeaderButtons;l.onCommand.subscribe(function(t,n){var o=n.column,a=n.button,s=n.command,r=n.grid;if("sort-ascending"==s||"sort-descending"==s)for(var l in e.columns)e.columns[l].header.buttons[0].cssClass="icon-sort-off",e.columns[l].header.buttons[0].tooltip="Sort ascending",e.columns[l].header.buttons[0].command="sort-ascending",r.updateColumnHeader(e.columns[l].id);if("sort-ascending"==s)a.cssClass="icon-sort-ascending",a.command="sort-descending",a.tooltip="Sort descending",i(o.id,"ascending");else if("sort-descending"==s)a.cssClass="icon-sort-descending",a.command="sort-ascending",a.tooltip="Sort ascending",i(o.id,"descending");else if("image-on"==s){for(l=0;l<e.options.images.length;l++){var c=r.getColumnIndex(e.options.images[l]);e.columns[c].header.buttons[1].cssClass="icon-image-off",e.columns[c].header.buttons[1].tooltip="Set as image variable",e.columns[c].header.buttons[1].command="image-on",r.updateColumnHeader(e.columns[c].id)}a.cssClass="icon-image-on",a.command="",a.tooltip="Current image variable",e.element.trigger("images-selection-changed",o.id)}else if("x-on"==s){for(var l in e.columns)-1==e.options.images.indexOf(e.columns[l].id)&&e.options.metadata["column-count"]-1!=e.columns[l].id&&(e.columns[l].header.buttons[1].cssClass="icon-x-off",e.columns[l].header.buttons[1].tooltip="Set as x variable",e.columns[l].header.buttons[1].command="x-on",r.updateColumnHeader(e.columns[l].id));a.cssClass="icon-x-on",a.command="",a.tooltip="Current x variable",e.element.trigger("x-selection-changed",o.id)}else if("y-on"==s){for(var l in e.columns)-1==e.options.images.indexOf(e.columns[l].id)&&e.options.metadata["column-count"]-1!=e.columns[l].id&&(e.columns[l].header.buttons[2].cssClass="icon-y-off",e.columns[l].header.buttons[2].tooltip="Set as y variable",e.columns[l].header.buttons[2].command="y-on",r.updateColumnHeader(e.columns[l].id));a.cssClass="icon-y-on",a.command="",a.tooltip="Current y variable",e.element.trigger("y-selection-changed",o.id)}}),e.grid.registerPlugin(l),e.grid.registerPlugin(new Slick.AutoTooltips({enableForHeaderCells:!0})),e.grid.setSelectionModel(new Slick.RowSelectionModel),e.grid.onSelectedRowsChanged.subscribe(function(t,n){e.trigger_row_selection&&e.data.get_indices("unsorted",n.rows,function(t){e.options["row-selection"]=t,e.element.trigger("row-selection-changed",[t])}),e.trigger_row_selection=!0}),e.grid.onHeaderClick.subscribe(function(t,n){e._array_equal([n.column.field],e.options["variable-selection"])||-1!=e.options.images.indexOf(n.column.field)||(e.options["variable-selection"]=[n.column.field],e.element.trigger("variable-selection-changed",[e.options["variable-selection"]]))}),e._color_variables(e.options["variable-selection"]),e.grid.init(),e.data.get_indices("sorted",e.options["row-selection"],function(t){e.trigger_row_selection=!1,e.grid.setSelectedRows(t),e.grid.resetActiveCell(),t.length&&e.grid.scrollRowToTop(Math.min.apply(Math,t))})},resize_canvas:function(){this.grid.resizeCanvas()},update_data:function(){var e=this;e.data.invalidate(),e.grid.invalidate(),e.data.get_indices("sorted",e.options["row-selection"],function(t){e.trigger_row_selection=!1,e.grid.setSelectedRows(t),e.grid.resetActiveCell(),t.length&&e.grid.scrollRowToTop(Math.min.apply(Math,t))})},_setOption:function(e,t){var n=this;if("row-selection"==e)n.options[e]=t,n.data.get_indices("sorted",t,function(e){n.trigger_row_selection=!1,n.grid.setSelectedRows(e),n.grid.resetActiveCell(),e.length&&n.grid.scrollRowToTop(Math.min.apply(Math,e))});else if("variable-selection"==e){if(n._array_equal(n.options[e],t))return;n.options[e]=t,n._color_variables(t)}else"colorscale"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"x-variable"==e?(n.options[e]=t,n._set_selected_x()):"y-variable"==e?(n.options[e]=t,n._set_selected_y()):"image-variable"==e?(n.options[e]=t,n._set_selected_image()):"metadata"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"statistics"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"hidden_simulations"==e&&(n.options[e]=t,n.data.invalidate(),n.grid.invalidate())},_set_selected_x:function(){for(var e in this.columns)-1==this.options.images.indexOf(this.columns[e].id)&&this.options.metadata["column-count"]-1!=this.columns[e].id&&(this.columns[e].id==this.options["x-variable"]?(this.columns[e].header.buttons[1].cssClass="icon-x-on",this.columns[e].header.buttons[1].tooltip="Current x variable",this.columns[e].header.buttons[1].command=""):(this.columns[e].header.buttons[1].cssClass="icon-x-off",this.columns[e].header.buttons[1].tooltip="Set as x variable",this.columns[e].header.buttons[1].command="x-on"),this.grid.updateColumnHeader(this.columns[e].id))},_set_selected_y:function(){for(var e in this.columns)-1==this.options.images.indexOf(this.columns[e].id)&&this.options.metadata["column-count"]-1!=this.columns[e].id&&(this.columns[e].id==this.options["y-variable"]?(this.columns[e].header.buttons[2].cssClass="icon-y-on",this.columns[e].header.buttons[2].tooltip="Current y variable",this.columns[e].header.buttons[2].command=""):(this.columns[e].header.buttons[2].cssClass="icon-y-off",this.columns[e].header.buttons[2].tooltip="Set as y variable",this.columns[e].header.buttons[2].command="y-on"),this.grid.updateColumnHeader(this.columns[e].id))},_set_selected_image:function(){for(var e=0;e<this.options.images.length;e++){var t=this.grid.getColumnIndex(this.options.images[e]);this.columns[t].id==this.options["image-variable"]?(this.columns[t].header.buttons[1].cssClass="icon-image-on",this.columns[t].header.buttons[1].tooltip="Current image variable",this.columns[t].header.buttons[1].command=""):(this.columns[t].header.buttons[1].cssClass="icon-image-off",this.columns[t].header.buttons[1].tooltip="Set as image variable",this.columns[t].header.buttons[1].command="image-on"),this.grid.updateColumnHeader(this.columns[t].id)}},_color_variables:function(t){var n=this.grid.getColumns();for(var o in n){var a=n[o];null!==this.options.colorscale&&-1!=e.inArray(a.id,t)?(a.colorscale=this.options.colorscale,a.cssClass=a.cssClass.split(" ")[0]+" highlight"):(a.colorscale=null,a.cssClass=a.cssClass.split(" ")[0])}this.grid.invalidate()},_editCommandHandler:function(e,t,n){console.log("editCommandHandler called"),n.execute()},_data_provider:function(n){var i=this;i.mid=n.mid,i.aid=n.aid,i.metadata=n.metadata,i.sort_column=n.sort_column,i.sort_order=n.sort_order,i.inputs=n.inputs,i.outputs=n.outputs,i.analysis_columns=i.inputs.concat(i.outputs),i.indexOfIndex=n.indexOfIndex,i.hidden_simulations=n.hidden_simulations,i.ranked_indices={},i.pages={},i.pages_in_progress={},i.page_size=50,i.onDataLoaded=new Slick.Event,i.getLength=function(){return i.metadata["row-count"]},i.getItem=function(n){var o=i.metadata["column-count"],a=Math.floor(n/i.page_size),s=a*i.page_size;if(i.pages_in_progress[a])return null;if(!(a in i.pages)){i.pages_in_progress[a]=!0;var r=s,l=(a+1)*i.page_size,c="";if(null!==i.sort_column&&null!==i.sort_order){var d="a"+i.sort_column,u=i.sort_order;"ascending"==u?u="asc":"descending"==u&&(u="desc"),i.sort_column==i.metadata["column-count"]-1&&(d="index(0)"),c="/order: rank("+d+', "'+u+'")'}return e.ajax({type:"GET",url:t.default+"models/"+i.mid+"/arraysets/"+i.aid+"/data?hyperchunks=0/0:"+(o-1)+"|index(0)"+c+"/"+r+":"+l,success:function(e){i.pages[a]=[];for(var t=0;t<e[0].length;t++){for(var n={},s=0;s!=o;++s)n[s]=e[s][t];i.pages[a].push(n)}i.pages_in_progress[a]=!1,i.onDataLoaded.notify({from:r,to:l})},error:function(e,t,n){console.log("error",e,t,n)}}),null}return i.pages[a][n-s]},i.getItemMetadata=function(t){var n=Math.floor(t/i.page_size);if(i.pages_in_progress[n]||!(n in i.pages))return null;for(var o=this.getItem(t),a=i.analysis_columns.length,s="",r=0;r!=a;r++)null==o[i.analysis_columns[r]]&&(s+="nullRow ");return-1!=e.inArray(o[i.indexOfIndex],i.hidden_simulations)&&(s+="hiddenRow "),""!=s?{cssClasses:s}:null},i.set_sort=function(e,t){e==i.sort_column&&t==i.sort_order||(i.sort_column=e,i.sort_order=t,i.pages={})},i.get_indices=function(e,n,s){if(0!=n.length)if(null==i.sort_column||null==i.sort_order)s(n);else if(i.ranked_indices[i.sort_column]){var r=i.ranked_indices[i.sort_column];if("descending"==i.sort_order){for(var l=[],c=0;c<r.length;c++)l.push(r[c]);r=l.reverse()}var d=[];for(c=0;c<n.length;c++)"unsorted"==e?d.push(r[n[c]]):"sorted"==e&&d.push(r.indexOf(n[c]));s(new Int32Array(d))}else if(i.sort_column==i.metadata["column-count"]-1)i.ranked_indices[i.sort_column]=new Int32Array(o.default.range(i.metadata["row-count"])),i.get_indices(e,n,s);else{var u=new XMLHttpRequest;u.open("GET",t.default+"models/"+i.mid+"/arraysets/data-table/data?hyperchunks=0/rank(a"+i.sort_column+',"asc")/...&byteorder='+(a.is_little_endian()?"little":"big")),u.responseType="arraybuffer",u.direction=e,u.rows=n,u.callback=s,u.onload=function(e){for(var t=[],n=new Int32Array(this.response),o=0;o<n.length;o+=2)t.push(n[o]);i.ranked_indices[i.sort_column]=new Int32Array(t),i.get_indices(this.direction,this.rows,this.callback)},u.send()}else s([])},i.invalidate=function(){i.pages={}}},_array_equal:function(t,n){return 0==e(t).not(n).length&&0==e(n).not(t).length}})}).call(this,n(1))},413:function(e,t,n){"use strict";(function(e){var t=function(e){return e&&e.__esModule?e:{default:e}}(n(281));n(280),e.widget("slycat.colorswitcher",{options:{colormap:"day"},_create:function(){var n=this;this.color_maps={night:{label:"Night",background:t.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.5",colors:[t.default.rgb(59,76,192),t.default.rgb(68,90,204),t.default.rgb(77,104,215),t.default.rgb(87,117,225),t.default.rgb(98,130,234),t.default.rgb(108,142,241),t.default.rgb(119,154,247),t.default.rgb(130,165,251),t.default.rgb(141,176,254),t.default.rgb(152,185,255),t.default.rgb(163,194,255),t.default.rgb(174,201,253),t.default.rgb(184,208,249),t.default.rgb(194,213,244),t.default.rgb(204,217,238),t.default.rgb(213,219,230),t.default.rgb(221,221,221),t.default.rgb(229,216,209),t.default.rgb(236,211,197),t.default.rgb(241,204,185),t.default.rgb(245,196,173),t.default.rgb(247,187,160),t.default.rgb(247,177,148),t.default.rgb(247,166,135),t.default.rgb(244,154,123),t.default.rgb(241,141,111),t.default.rgb(236,127,99),t.default.rgb(229,112,88),t.default.rgb(222,96,77),t.default.rgb(213,80,66),t.default.rgb(203,62,56),t.default.rgb(192,40,47),t.default.rgb(180,4,38)]},day:{label:"Day",background:t.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[t.default.rgb(100,108,234),t.default.rgb(115,118,240),t.default.rgb(128,128,244),t.default.rgb(140,138,248),t.default.rgb(151,147,250),t.default.rgb(161,155,251),t.default.rgb(169,163,251),t.default.rgb(177,170,250),t.default.rgb(184,177,248),t.default.rgb(189,182,245),t.default.rgb(193,187,241),t.default.rgb(197,191,236),t.default.rgb(199,194,230),t.default.rgb(200,196,224),t.default.rgb(201,198,216),t.default.rgb(200,199,208),t.default.rgb(198,198,198),t.default.rgb(210,197,195),t.default.rgb(220,194,192),t.default.rgb(229,191,187),t.default.rgb(236,186,181),t.default.rgb(243,181,175),t.default.rgb(248,175,168),t.default.rgb(251,168,160),t.default.rgb(254,159,152),t.default.rgb(255,150,143),t.default.rgb(255,140,133),t.default.rgb(253,129,123),t.default.rgb(250,117,112),t.default.rgb(246,105,101),t.default.rgb(240,91,90),t.default.rgb(233,75,78),t.default.rgb(225,57,66)]},rainbow:{label:"Rainbow Night",background:t.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.6",colors:[t.default.rgb(0,0,255),t.default.rgb(0,255,255),t.default.rgb(255,255,0),t.default.rgb(255,0,0)]},rainbow_day:{label:"Rainbow Day",background:t.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[t.default.rgb(0,0,255),t.default.rgb(0,255,255),t.default.rgb(255,255,0),t.default.rgb(255,0,0)]}},this.container=e("<div>").appendTo(this.element).append('<span class="label">Colors: </span>'),e.each(this.color_maps,function(t,o){e("<span>").addClass("color").toggleClass("selected",t==n.options.colormap).appendTo(n.container).attr("data-colormap",t).html(o.label).click(function(){e(this).hasClass("selected")||(n.options.colormap=this.getAttribute("data-colormap"),n.container.find(".color").removeClass("selected"),e(this).addClass("selected"),n.element.trigger("colormap-changed",[n.options.colormap]))})})},_setOption:function(e,t){this.options[e]=t,"colormap"==e&&(this.container.find(".color").removeClass("selected"),this.container.find("[data-colormap='"+this.options.colormap+"']").addClass("selected"))},get_background:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].background},get_null_color:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].null_color},get_opacity:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].opacity},get_color_scale:function(e,n,o){void 0===e&&(e=this.options.colormap),void 0===n&&(n=0),void 0===o&&(o=1);var a=[],i=t.default.scale.linear().domain([0,this.color_maps[e].colors.length-1]).range([n,o]);for(var s in this.color_maps[e].colors)a.push(i(s));return t.default.scale.linear().domain(a).range(this.color_maps[e].colors)},get_color_map:function(e,t,n){return this.get_color_scale(e,t,n)},get_color_scale_ordinal:function(e,n){void 0===e&&(e=this.options.colormap),void 0===n&&(n=[0,1]);for(var o=t.default.scale.ordinal().domain(n).rangePoints([0,100],0),a=this.get_color_scale(e,0,100),i=[],s=0;s<n.length;s++)i.push(a(o(n[s])));return t.default.scale.ordinal().domain(n).range(i)},get_color_map_ordinal:function(e,t){return this.get_color_scale_ordinal(e,t)},get_gradient_data:function(e){void 0===e&&(e=this.options.colormap);for(var t=this.color_maps[e].colors,n=t.length,o=[],a=0;a<n;a++)o.push({offset:a*(100/(n-1)),color:t[n-1-a]});return o},setUpColorMapsForAllColumns:function(e,t){for(var n=0;n!=t.length;++n)t[n].colorMap=this.get_color_scale(e,t[n].columnMin,t[n].columnMax)}})}).call(this,n(1))}}]);
//# sourceMappingURL=ui_parameter_image_plus_module.js.map