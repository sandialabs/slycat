(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{250:function(e,t,n){"use strict";(function(e){A(n(315)),A(n(289)),A(n(293)),A(n(298)),A(n(300)),A(n(312)),A(n(427));var t=A(n(15)),o=A(n(0)),r=A(n(2)),i=A(n(29)),a=u(n(3)),l=A(n(283)),s=A(n(25)),c=u(n(287));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}n(337),n(429),n(431),n(432),n(433),n(434),n(282),n(311),n(63),e(document).ready(function(){var n=null,u=null,A=(0,s.default)(window.location).segment(-1),d=null,h=null,f=null,p=null,g=null,v=null,m=null,b=null,_=null,y=null,w=null,x=null,C=null,k=null,M=null,S=null,E=null,R=null,N=null,T=null,D=null,L=null,I=null,P=null,z=null,H=null,F=!1,B=!1,$=!1,V=!1,O=!1,j=(document.createElement("a"),[{}]),U=e("#remote-login-dialog");U.dialog({autoOpen:!1,width:700,height:300,modal:!0,close:function(){e("#remote-password",this).val("")},open:function(){}}),e("#remote-password",U).keypress(function(t){13==t.keyCode&&e(".ui-dialog-buttonset",U.parent()).find("button:contains(Login)").trigger("click")}),e("#parameter-image-plus-layout").layout({north:{size:28,resizable:!1},center:{},west:{size:e("#parameter-image-plus-layout").width()/2,resizeWhileDragging:!1,onresize:function(){e("#dendrogram-viewer").dendrogram("resize_canvas")}},south:{size:e("#parameter-image-plus-layout").height()/4,resizeWhileDragging:!1,onresize:function(){e("#table").css("height",e("#table-pane").height()),e("#table").table("resize_canvas")}}}),e("#model-pane").layout({center:{resizeWhileDragging:!1,onresize:function(){e("#scatterplot").scatterplot("option",{width:e("#scatterplot-pane").width(),height:e("#scatterplot-pane").height()})}}}),e.ajax({type:"GET",url:t.default+"models/"+A,success:function(o){n=o,v=i.default.create(n.project,n._id),d=n["artifact:input-columns"],h=n["artifact:output-columns"],f=n["artifact:image-columns"],p=void 0==n["artifact:rating-columns"]?[]:n["artifact:rating-columns"],g=void 0==n["artifact:category-columns"]?[]:n["artifact:category-columns"],null!==(u=n["artifact:default-image"])&&void 0!==u||(u=0),function(){if("waiting"==n.state||"running"==n.state)return void W();if("closed"==n.state&&null===n.result)return;if("failed"==n.result)return;e(".load-status").text("Loading data."),e.ajax({url:t.default+"models/"+A+"/files/clusters",contentType:"application/json",success:function(e){b=e,y=new Array(b.length),G(),Z(),Q()},error:q}),e.ajax({url:t.default+"models/"+A+"/tables/data-table/arrays/0/metadata?index=Index",contentType:"application/json",success:function(e){w=e,(x=new Array(e["column-count"]))[e["column-count"]-1]={max:e["row-count"]-1,min:0},he(l.default.range(e["column-count"]-1),X)},error:q}),v.getState(function(n){_=void 0!==(m=n)["cluster-index"]?m["cluster-index"]:0,G(),Z(),function(){var n=void 0!==m.colormap?m.colormap:"night";e("#color-switcher").colorswitcher({colormap:n}),e("#color-switcher").bind("colormap-changed",function(n,o){!function(n){ae(),e("#dendrogram-viewer").dendrogram("option","colorscale",P),e("#dendrogram-leaf-backdrop").css({"background-color":e("#color-switcher").colorswitcher("get_background").toString()}),e("#table").table("option","colorscale",P),e("#scatterplot-pane").css("background",e("#color-switcher").colorswitcher("get_background",n).toString()),e("#scatterplot").scatterplot("option",{colorscale:P,gradient:e("#color-switcher").colorswitcher("get_gradient_data",n)}),e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/colormap/"+n}),v.updateState({colormap:n})}(o)})}(),X()})}()},error:function(e,t,n){window.alert("Error retrieving model: "+n)}});var W=function(){var t=e("#parameter-image-plus-layout").children()[0],r=e(t);r.detach(),e(e("#parameter-image-plus-layout").children()).remove(),e("#parameter-image-plus-layout").append(r),o.default.dataFor(e(".slycat-job-checker")[0]).set_jid(n["artifact:jid"])};function q(){e(".load-status").css("display","none"),a.dialog({title:"Load Error",message:"Oops, there was a problem retrieving data from the model. This likely means that there was a problem during computation."})}function Y(e){var t={cluster:e};return t.collapsed_nodes=m[e+"-collapsed-nodes"],t.expanded_nodes=m[e+"-expanded-nodes"],t.selected_nodes=m[e+"-selected-nodes"],t.highlight=m[e+"-selected-row-simulations"],t}function G(){O||null==_||null==b||(O=!0,e.ajax({url:t.default+"models/"+A+"/files/cluster-"+b[_],contentType:"application/json",success:function(e){y[_]=e,Q()},error:q}))}function X(){if(K(),!C&&w){var n=w["row-count"];C=new Int32Array(n);for(var o=0;o!=n;++o)C[o]=o}if(Z(),w&&m){var r=[];for(o=0;o<w["column-count"]-1;o++)"string"!=w["column-types"][o]&&-1==p.indexOf(o)&&-1==g.indexOf(o)&&r.push(o);if(k=r[0],M=r[1%r.length],"x-selection"in m&&(k=Number(m["x-selection"])),"y-selection"in m&&(M=Number(m["y-selection"])),z=!0,"auto-scale"in m&&(z=m["auto-scale"]),L=[],"simulation-selection"in m&&(L=m["simulation-selection"]),I=[],"hidden-simulations"in m&&(I=m["hidden-simulations"]),c.get_model_array_attribute({api_root:t.default,mid:A,aid:"data-table",array:0,attribute:k,success:function(e){R=e,"string"==w["column-types"][k]&&(R=R[0]),J(),K()},error:q}),c.get_model_array_attribute({api_root:t.default,mid:A,aid:"data-table",array:0,attribute:M,success:function(e){N=e,"string"==w["column-types"][M]&&(N=N[0]),J(),K()},error:q}),S=w["column-count"]-1,"variable-selection"in m&&(S=Number(m["variable-selection"])),S==w["column-count"]-1){n=w["row-count"];T=new Float64Array(n);for(o=0;o!=n;++o)T[o]=o;ae(),J(),K(),Q()}else c.get_model_array_attribute({api_root:t.default,mid:A,aid:"data-table",array:0,attribute:S,success:function(e){T=e,"string"==w["column-types"][S]&&(T=T[0]),ae(),J(),K(),Q()},error:q});E=f[u],"images-selection"in m&&(E=m["images-selection"]),K(),f.length>0?e.ajax({type:"GET",url:t.default+"models/"+A+"/arraysets/data-table/data?hyperchunks=0/"+E+"/0:"+w["row-count"],success:function(e){D=e[0],J(),Q()},error:q}):(D=void 0,J(),Q()),Z()}}function Q(){if(!V&&m&&null!=b&&null!=_&&null!=y&&void 0!==y[_]&&P&&T&&null!=L&&null!==D){V=!0,console.log("dendrogram ready to be initiated."),e("#dendrogram-pane .load-status").css("display","none"),e("#dendrogram-leaf-backdrop").css({"background-color":e("#color-switcher").colorswitcher("get_background").toString()});var n=Y(_);n.clusters=b,n.cluster_data=y[_],n.colorscale=P,n.color_array=T,n.images=D,n.cache_references=j,n.login_dialog=U,void 0!=m["sort-variable"]&&(n.dendrogram_sort_order=!1),n.highlight=L,e("#dendrogram-viewer").dendrogram(n),e("#dendrogram-viewer").bind("node-selection-changed",function(n,o){!function(n){null!=n.node&&null!=n.node["node-index"]&&e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/node/"+n.node["node-index"]});if(1!=n.skip_bookmarking){var o={};o[_+"-selected-nodes"]=ee(n.selection,"node-index"),o[_+"-selected-image-indexes"]=ee(n.selection,"image-index"),v.updateState(o)}}(o)}),e("#dendrogram-viewer").bind("node-selection-changed",function(e,t){if(1!=t.skip_bookmarking){for(var n=ee(t.selection,"image-index");I.length>0;)I.pop();for(var o=0;o<C.length;o++){var r=C[o];n.indexOf(r)<0&&I.push(r)}ie(!0)}}),e("#dendrogram-viewer").bind("expanded-collapsed-nodes-changed",function(e,t){!function(e){var t={};t[_+"-expanded-nodes"]=e.expanded,t[_+"-collapsed-nodes"]=e.collapsed,v.updateState(t)}(t)}),e("#dendrogram-viewer").bind("node-toggled",function(n,o){!function(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/toggle/node/"+n["node-index"]})}(o)}),e("#dendrogram-viewer").bind("selection-changed",function(t,n){e("#table").table("option","row-selection",n),e("#controls").controls("option","selection",n),e("#scatterplot").scatterplot("option","selection",n),le(n)})}}function K(){if(!F&&w&&x.length==w["column-count"]&&P&&m&&null!=k&&null!=M&&null!==E&&null!=L&&null!=I){F=!0,e("#table-pane .load-status").css("display","none");for(var n=[],o=0;o!=w["column-count"]-1;++o)-1==e.inArray(o,d)&&-1==e.inArray(o,h)&&-1==e.inArray(o,p)&&-1==e.inArray(o,g)&&n.push(o);var r={api_root:t.default,mid:A,aid:"data-table",metadata:w,statistics:x,inputs:d,outputs:h,others:n,images:f,ratings:p,categories:g,"image-variable":E,"x-variable":k,"y-variable":M,"row-selection":L,hidden_simulations:I};void 0!==m.colormap&&m.colormap;r.colorscale=P,"sort-variable"in m&&"sort-order"in m&&(r["sort-variable"]=m["sort-variable"],r["sort-order"]=m["sort-order"]),r["variable-selection"]="variable-selection"in m?[m["variable-selection"]]:[w["column-count"]-1],e("#table").table(r),e("#table").bind("variable-sort-changed",function(n,o,r){!function(n,o){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/sort-order/"+n+"/"+o}),v.updateState({"sort-variable":n,"sort-order":o})}(o,r)}),e("#table").bind("x-selection-changed",function(e,t){se(t)}),e("#table").bind("y-selection-changed",function(e,t){ce(t)}),e("#table").bind("row-selection-changed",function(t,n){for(var o=[],r=0;r!=n.length;++r)o.push(n[r]);le(o),e("#scatterplot").scatterplot("option","selection",o),e("#controls").controls("option","selection",o),e("#dendrogram-viewer").dendrogram("option","highlight",o)}),e("#scatterplot").bind("selection-changed",function(t,n){e("#table").table("option","row-selection",n),e("#controls").controls("option","selection",n),e("#dendrogram-viewer").dendrogram("option","highlight",n)}),e("#controls").bind("x-selection-changed",function(t,n){e("#table").table("option","x-variable",n)}),e("#controls").bind("y-selection-changed",function(t,n){e("#table").table("option","y-variable",n)}),e("#controls").bind("images-selection-changed",function(t,n){e("#table").table("option","image-variable",n)}),e("#table").bind("variable-selection-changed",function(t,n){e("#controls").controls("option","color-variable",n[0]),te(n[0])}),e("#controls").bind("color-selection-changed",function(t,n){e("#table").table("option","variable-selection",[Number(n)]),te(n)})}}function J(){if(!B&&m&&C&&R&&N&&T&&null!==D&&P&&null!=L&&null!=I&&null!=z){B=!0,e("#scatterplot-pane .load-status").css("display","none");var n=void 0!==m.colormap?m.colormap:"night";e("#scatterplot-pane").css("background",e("#color-switcher").colorswitcher("get_background",n).toString());var o=[];"open-images-selection"in m&&(o=m["open-images-selection"]),e("#scatterplot").scatterplot({indices:C,x_label:w["column-names"][k],y_label:w["column-names"][M],v_label:w["column-names"][S],x:R,y:N,v:T,x_string:"string"==w["column-types"][k],y_string:"string"==w["column-types"][M],v_string:"string"==w["column-types"][S],images:D,width:e("#scatterplot-pane").width(),height:e("#scatterplot-pane").height(),colorscale:P,selection:L,open_images:o,gradient:e("#color-switcher").colorswitcher("get_gradient_data",n),hidden_simulations:I,"auto-scale":z,cache_references:j,login_dialog:U}),e("#scatterplot").bind("selection-changed",function(e,t){le(t)}),e("#table").bind("x-selection-changed",function(e,t){Ae(t)}),e("#controls").bind("x-selection-changed",function(e,t){Ae(t)}),e("#table").bind("y-selection-changed",function(e,t){de(t)}),e("#controls").bind("y-selection-changed",function(e,t){de(t)}),e("#table").bind("images-selection-changed",function(e,t){ne(t)}),e("#controls").bind("images-selection-changed",function(e,t){ne(t)}),e("#scatterplot").bind("open-images-changed",function(n,o){!function(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/openimages/count/"+n.length}),v.updateState({"open-images-selection":n})}(o)})}}function Z(){if(!$&&w&&null!==f&&null!=p&&null!=g&&null!=k&&null!=M&&null!=z&&null!==E&&null!=L&&null!=I&&C){$=!0;for(var n=[],o=[],r=[],i=0;i<w["column-count"];i++)"string"!=w["column-types"][i]&&n.push(i),-1==f.indexOf(i)&&w["column-count"]-1>i&&o.push(i),-1==f.indexOf(i)&&r.push(i);var a=w["column-count"]-1;"variable-selection"in m&&(a=[m["variable-selection"]]),e("#controls").controls({mid:A,model_name:window.model_name,aid:"data-table",metadata:w,x_variables:o,y_variables:o,image_variables:f,color_variables:r,rating_variables:p,category_variables:g,selection:L,"x-variable":k,"y-variable":M,"image-variable":E,"color-variable":a,"auto-scale":z,hidden_simulations:I,indices:C}),e("#table").bind("x-selection-changed",function(t,n){e("#controls").controls("option","x-variable",n)}),e("#table").bind("y-selection-changed",function(t,n){e("#controls").controls("option","y-variable",n)}),e("#table").bind("images-selection-changed",function(t,n){e("#controls").controls("option","image-variable",n)}),e("#controls").bind("set-value",function(n,o){!function(n,o,r){for(var i="",a="[",l=0;l<n.length;l++)l>0&&(i+="|",a+=","),i+=n[l],a+="["+r+"]";a+="]";var s=new Blob([a],{type:"text/html"}),c=new FormData;c.append("data",s),c.append("hyperchunks","0/"+o+"/"+i),e.ajax({type:"PUT",url:t.default+"models/"+A+"/arraysets/data-table/data",data:c,processData:!1,contentType:!1,success:function(t){e("#table").table("update_data"),o==k&&Ae(o),o==M&&de(o),he([o],function(){e("#table").table("option","statistics",x),o==S&&oe(o)})},error:function(e,t,n){console.log("writing array data error")}})}(o.selection,o.variable,o.value)}),e("#controls").bind("x-selection-changed",function(e,t){se(t)}),e("#controls").bind("y-selection-changed",function(e,t){ce(t)}),e("#controls").bind("auto-scale",function(e,t){ue(t)}),e("#controls").bind("hide-selection",function(t,n){for(var o=0;o<L.length;o++)-1==e.inArray(L[o],I)&&I.push(L[o]);ie()}),e("#controls").bind("show-selection",function(t,n){for(var o=0;o<L.length;o++){var r=e.inArray(L[o],I);-1!=r&&I.splice(r,1)}ie()}),e("#controls").bind("pin-selection",function(t,n){for(var o=[],r=0;r<L.length;r++){-1==e.inArray(L[r],I)&&o.push(L[r])}e("#scatterplot").scatterplot("pin",o)}),e("#controls").bind("show-all",function(e,t){for(;I.length>0;)I.pop();ie()})}}function ee(e,t){for(var n=[],o=null,r=0;r<e.length;r++)null!=(o=e[r][t])&&n.push(o);return n}function te(n){if((S=Number(n))==w["column-count"]-1){for(var o=w["row-count"],r=0;r!=o;++r)T[r]=r;re()}else oe(n);e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/variable/"+n}),v.updateState({"variable-selection":n})}function ne(n){E=Number(n),_=b.indexOf(w["column-names"][E]),e.ajax({type:"GET",url:t.default+"models/"+A+"/arraysets/data-table/data?hyperchunks=0/"+E+"/0:"+w["row-count"],success:function(n){D=n[0],e("#scatterplot").scatterplot("option","images",D),e("#dendrogram-viewer").dendrogram("option","images",D),function(n){if(void 0===y[n])e.ajax({url:t.default+"models/"+A+"/files/cluster-"+b[n],contentType:"application/json",success:function(t){y[n]=t;var o=Y(n);o.cluster_data=y[n],e("#dendrogram-viewer").dendrogram("option",o)},error:q});else{var o=Y(n);o.cluster_data=y[n],e("#dendrogram-viewer").dendrogram("option",o)}}(_)},error:q}),function(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/images/"+n}),v.updateState({"images-selection":n})}(E),function(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/cluster/"+n}),v.updateState({"cluster-index":n})}(_)}function oe(e){c.get_model_array_attribute({api_root:t.default,mid:A,aid:"data-table",array:0,attribute:e,success:function(t){T=t,"string"==w["column-types"][e]&&(T=T[0]),re()},error:q})}function re(){ae(),e("#table").table("option","colorscale",P),e("#scatterplot").scatterplot("update_color_scale_and_v",{v:T,v_string:"string"==w["column-types"][S],colorscale:P}),e("#scatterplot").scatterplot("option","v_label",w["column-names"][S]),e("#dendrogram-viewer").dendrogram("option","color-options",{color_array:T,colorscale:P})}function ie(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/hidden/count/"+I.length}),v.updateState({"hidden-simulations":I}),z?(ae(),e("#table").table("option",{hidden_simulations:I,colorscale:P}),e("#scatterplot").scatterplot("option",{hidden_simulations:I,colorscale:P}),n||e("#dendrogram-viewer").dendrogram("option",{hidden_simulations:I,colorscale:P})):(e("#table").table("option","hidden_simulations",I),e("#scatterplot").scatterplot("option","hidden_simulations",I),n||e("#dendrogram-viewer").dendrogram("option","hidden_simulations",I)),e("#controls").controls("option","hidden_simulations",I)}function ae(){var t=w["column-types"][S];if(H=z?function(e){I.sort(l.default.ascending);for(var t=I.length,n=function(e){if(e.length>1)return Array.apply([],e);if(1==e.length)return[e[0]];return[]}(e),o=t-1;o>=0;o--)n.splice(I[o],1);return n}(T):T,"string"!=t)P=e("#color-switcher").colorswitcher("get_color_scale",void 0,l.default.min(H),l.default.max(H));else{var n=l.default.set(H).values().sort();P=e("#color-switcher").colorswitcher("get_color_scale_ordinal",void 0,n)}}function le(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/simulation/count/"+n.length}),v.updateState({"simulation-selection":n}),L=n}function se(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/x/"+n}),v.updateState({"x-selection":n}),k=Number(n)}function ce(n){e.ajax({type:"POST",url:t.default+"events/models/"+A+"/select/y/"+n}),v.updateState({"y-selection":n}),M=Number(n)}function ue(n){z=n,I.length>0?(ae(),e("#dendrogram-viewer").dendrogram("option","colorscale",P),e("#table").table("option","colorscale",P),e("#scatterplot").scatterplot("option",{colorscale:P,"auto-scale":z})):e("#scatterplot").scatterplot("option","auto-scale",z),e.ajax({type:"POST",url:t.default+"events/models/"+A+"/auto-scale/"+z}),v.updateState({"auto-scale":z})}function Ae(n){c.get_model_array_attribute({api_root:t.default,mid:A,aid:"data-table",array:0,attribute:n,success:function(t){e("#scatterplot").scatterplot("option",{x_string:"string"==w["column-types"][n],x:"string"==w["column-types"][n]?t[0]:t,x_label:w["column-names"][n]})},error:q})}function de(n){c.get_model_array_attribute({api_root:t.default,mid:A,aid:"data-table",array:0,attribute:n,success:function(t){e("#scatterplot").scatterplot("option",{y_string:"string"==w["column-types"][n],y:"string"==w["column-types"][n]?t[0]:t,y_label:w["column-names"][n]})},error:q})}function he(e,t){r.default.get_model_arrayset_metadata({mid:A,aid:"data-table",statistics:"0/"+e.join("|"),success:function(e){for(var n=e.statistics,o=0;o!=n.length;++o)x[n[o].attribute]={min:n[o].min,max:n[o].max};t()}})}})}).call(this,n(1))},283:function(e,t,n){"use strict";var o,r,i,a=u(n(229)),l=u(n(100)),s=u(n(62)),c=u(n(228));function u(e){return e&&e.__esModule?e:{default:e}}!function(){function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function u(e){return null!=e&&!isNaN(e)}function A(e){return{left:function(t,n,o,r){for(arguments.length<3&&(o=0),arguments.length<4&&(r=t.length);r>o;){var i=o+r>>>1;e(t[i],n)<0?o=i+1:r=i}return o},right:function(t,n,o,r){for(arguments.length<3&&(o=0),arguments.length<4&&(r=t.length);r>o;){var i=o+r>>>1;e(t[i],n)>0?r=i:o=i+1}return o}}}function d(e){return e.length}function h(e,t){try{for(var n in t)(0,c.default)(e.prototype,n,{value:t[n],enumerable:!1})}catch(n){e.prototype=t}}function f(){}function p(e){return ui+e in this}function g(){var e=[];return this.forEach(function(t){e.push(t)}),e}function v(){var e=0;for(var t in this)t.charCodeAt(0)===Ai&&++e;return e}function m(){for(var e in this)if(e.charCodeAt(0)===Ai)return!1;return!0}function b(){}function _(e,t,n){return function(){var o=n.apply(t,arguments);return o===t?e:o}}function y(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,o=di.length;o>n;++n){var r=di[n]+t;if(r in e)return r}}function w(){}function x(){}function C(e){function t(){for(var t,o=n,r=-1,i=o.length;++r<i;)(t=o[r].on)&&t.apply(this,arguments);return e}var n=[],o=new f;return t.on=function(t,r){var i,a=o.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,i=n.indexOf(a)).concat(n.slice(i+1)),o.remove(t)),r&&n.push(o.set(t,{on:r})),e)},t}function k(){Kr.event.preventDefault()}function M(){for(var e,t=Kr.event;e=t.sourceEvent;)t=e;return t}function S(e){for(var t=new x,n=0,o=arguments.length;++n<o;)t[arguments[n]]=C(t);return t.of=function(n,o){return function(r){try{var i=r.sourceEvent=Kr.event;r.target=e,Kr.event=r,t[r.type].apply(n,o)}finally{Kr.event=i}}},t}function E(e){return fi(e,bi),e}function R(e){return"function"==typeof e?e:function(){return pi(e,this)}}function N(e){return"function"==typeof e?e:function(){return gi(e,this)}}function T(e,t){return e=Kr.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function D(e){return e.trim().replace(/\s+/g," ")}function L(e){return new RegExp("(?:^|\\s+)"+Kr.requote(e)+"(?:\\s+|$)","g")}function I(e){return e.trim().split(/^|\s+/)}function P(e,t){var n=(e=I(e).map(z)).length;return"function"==typeof t?function(){for(var o=-1,r=t.apply(this,arguments);++o<n;)e[o](this,r)}:function(){for(var o=-1;++o<n;)e[o](this,t)}}function z(e){var t=L(e);return function(n,o){if(r=n.classList)return o?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";o?(t.lastIndex=0,t.test(r)||n.setAttribute("class",D(r+" "+e))):n.setAttribute("class",D(r.replace(t," ")))}}function H(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}:function(){this.style.setProperty(e,t,n)}}function F(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function B(e){return"function"==typeof e?e:(e=Kr.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function $(e){return{__data__:e}}function V(e){return function(){return mi(this,e)}}function O(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function j(e,t){for(var n=0,o=e.length;o>n;n++)for(var r,i=e[n],a=0,l=i.length;l>a;a++)(r=i[a])&&t(r,a,n);return e}function U(e){return fi(e,yi),e}function W(){var e=this.__transition__;e&&++e.active}function q(e,t,n){function o(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}var r="__on"+e,i=e.indexOf("."),a=Y;i>0&&(e=e.substring(0,i));var l=xi.get(e);return l&&(e=l,a=G),i?t?function(){var i=a(t,Zr(arguments));o.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:o:t?w:function(){var t,n=new RegExp("^__on([^.]+)"+Kr.requote(e)+"$");for(var o in this)if(t=o.match(n)){var r=this[o];this.removeEventListener(t[1],r,r.$),delete this[o]}}}function Y(e,t){return function(n){var o=Kr.event;Kr.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Kr.event=o}}}function G(e,t){var n=Y(e,t);return function(e){var t=this,o=e.relatedTarget;o&&(o===t||8&o.compareDocumentPosition(t))||n.call(t,e)}}function X(){var e=".dragsuppress-"+ ++ki,t="click"+e,n=Kr.select(ni).on("touchmove"+e,k).on("dragstart"+e,k).on("selectstart"+e,k);if(Ci){var o=ti.style,r=o[Ci];o[Ci]="none"}return function(i){function a(){n.on(t,null)}n.on(e,null),Ci&&(o[Ci]=r),i&&(n.on(t,function(){k(),a()},!0),setTimeout(a,0))}}function Q(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,[(o=o.matrixTransform(e.getScreenCTM().inverse())).x,o.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}function K(){return Kr.event.changedTouches[0].identifier}function J(){return Kr.event.target}function Z(){return ni}function ee(e){return e>0?1:0>e?-1:0}function te(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ne(e){return e>1?0:-1>e?Mi:Math.acos(e)}function oe(e){return e>1?Ei:-1>e?-Ei:Math.asin(e)}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return(e=Math.sin(e/2))*e}function ae(){}function le(e,t,n){return new se(e,t,n)}function se(e,t,n){this.h=e,this.s=t,this.l=n}function ce(e,t,n){function o(e){return Math.round(255*function(e){return e>360?e-=360:0>e&&(e+=360),60>e?r+(i-r)*e/60:180>e?i:240>e?r+(i-r)*(240-e)/60:r}(e))}var r,i;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,r=2*(n=0>n?0:n>1?1:n)-(i=.5>=n?n*(1+t):n+t-n*t),we(o(e+120),o(e),o(e-120))}function ue(e,t,n){return new Ae(e,t,n)}function Ae(e,t,n){this.h=e,this.c=t,this.l=n}function de(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),he(n,Math.cos(e*=Ti)*t,Math.sin(e)*t)}function he(e,t,n){return new fe(e,t,n)}function fe(e,t,n){this.l=e,this.a=t,this.b=n}function pe(e,t,n){var o=(e+16)/116,r=o+t/500,i=o-n/200;return we(be(3.2404542*(r=ve(r)*Vi)-1.5371385*(o=ve(o)*Oi)-.4985314*(i=ve(i)*ji)),be(-.969266*r+1.8760108*o+.041556*i),be(.0556434*r-.2040259*o+1.0572252*i))}function ge(e,t,n){return e>0?ue(Math.atan2(n,t)*Di,Math.sqrt(t*t+n*n),e):ue(NaN,NaN,e)}function ve(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function me(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function be(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function _e(e){return we(e>>16,255&e>>8,255&e)}function ye(e){return _e(e)+""}function we(e,t,n){return new xe(e,t,n)}function xe(e,t,n){this.r=e,this.g=t,this.b=n}function Ce(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ke(e,t,n){var o,r,i,a=0,l=0,s=0;if(o=/([a-z]+)\((.*)\)/i.exec(e))switch(r=o[2].split(","),o[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Re(r[0]),Re(r[1]),Re(r[2]))}return(i=qi.get(e))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.substring(1),16))||(4===e.length?(a=(3840&i)>>4,a|=a>>4,l=240&i,l|=l>>4,s=15&i,s|=s<<4):7===e.length&&(a=(16711680&i)>>16,l=(65280&i)>>8,s=255&i)),t(a,l,s))}function Me(e,t,n){var o,r,i=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),l=a-i,s=(a+i)/2;return l?(r=.5>s?l/(a+i):l/(2-a-i),o=e==a?(t-n)/l+(n>t?6:0):t==a?(n-e)/l+2:(e-t)/l+4,o*=60):(o=NaN,r=s>0&&1>s?0:o),le(o,r,s)}function Se(e,t,n){var o=me((.4124564*(e=Ee(e))+.3575761*(t=Ee(t))+.1804375*(n=Ee(n)))/Vi),r=me((.2126729*e+.7151522*t+.072175*n)/Oi);return he(116*r-16,500*(o-r),200*(r-me((.0193339*e+.119192*t+.9503041*n)/ji)))}function Ee(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Re(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ne(e){return"function"==typeof e?e:function(){return e}}function Te(e){return e}function De(e){return function(t,n,o){return 2===arguments.length&&"function"==typeof n&&(o=n,n=null),Le(t,n,e,o)}}function Le(e,t,n,o){function r(){var e,t=s.status;if(!t&&s.responseText||t>=200&&300>t||304===t){try{e=n.call(i,s)}catch(e){return void a.error.call(i,e)}a.load.call(i,e)}else a.error.call(i,s)}var i={},a=Kr.dispatch("beforesend","progress","load","error"),l={},s=new XMLHttpRequest,c=null;return!ni.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(e)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=r:s.onreadystatechange=function(){s.readyState>3&&r()},s.onprogress=function(e){var t=Kr.event;Kr.event=e;try{a.progress.call(i,s)}finally{Kr.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?l[e]:(null==t?delete l[e]:l[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(c=e,i):c},i.response=function(e){return n=e,i},["get","post"].forEach(function(e){i[e]=function(){return i.send.apply(i,[e].concat(Zr(arguments)))}}),i.send=function(n,o,r){if(2===arguments.length&&"function"==typeof o&&(r=o,o=null),s.open(n,e,!0),null==t||"accept"in l||(l.accept=t+",*/*"),s.setRequestHeader)for(var u in l)s.setRequestHeader(u,l[u]);return null!=t&&s.overrideMimeType&&s.overrideMimeType(t),null!=c&&(s.responseType=c),null!=r&&i.on("error",r).on("load",function(e){r(null,e)}),a.beforesend.call(i,s),s.send(null==o?null:o),i},i.abort=function(){return s.abort(),i},Kr.rebind(i,a,"on"),null==o?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(o))}function Ie(){var e=Pe(),t=ze()-e;t>24?(isFinite(t)&&(clearTimeout(Qi),Qi=setTimeout(Ie,t)),Xi=0):(Xi=1,Ji(Ie))}function Pe(){var e=Date.now();for(Ki=Yi;Ki;)e>=Ki.t&&(Ki.f=Ki.c(e-Ki.t)),Ki=Ki.n;return e}function ze(){for(var e,t=Yi,n=1/0;t;)t.f?t=e?e.n=t.n:Yi=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Gi=e,n}function He(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Fe(e){return e+""}function Be(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function $e(e,t,n){function o(t){var n=e(t),o=i(n,1);return o-t>t-n?n:o}function r(n){return t(n=e(new oa(n-1)),1),n}function i(e,n){return t(e=new oa(+e),n),e}function a(e,o,i){var a=r(e),l=[];if(i>1)for(;o>a;)n(a)%i||l.push(new Date(+a)),t(a,1);else for(;o>a;)l.push(new Date(+a)),t(a,1);return l}e.floor=e,e.round=o,e.ceil=r,e.offset=i,e.range=a;var l=e.utc=Ve(e);return l.floor=l,l.round=Ve(o),l.ceil=Ve(r),l.offset=Ve(i),l.range=function(e,t,n){try{oa=Be;var o=new Be;return o._=e,a(o,t,n)}finally{oa=Date}},e}function Ve(e){return function(t,n){try{oa=Be;var o=new Be;return o._=t,e(o,n)._}finally{oa=Date}}}function Oe(e,t,n){var o=0>e?"-":"",r=(o?-e:e)+"",i=r.length;return o+(n>i?new Array(n-i+1).join(t)+r:r)}function je(e){return new RegExp("^(?:"+e.map(Kr.requote).join("|")+")","i")}function Ue(e){for(var t=new f,n=-1,o=e.length;++n<o;)t.set(e[n].toLowerCase(),n);return t}function We(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+1));return o?(e.w=+o[0],n+o[0].length):-1}function qe(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n));return o?(e.U=+o[0],n+o[0].length):-1}function Ye(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n));return o?(e.W=+o[0],n+o[0].length):-1}function Ge(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+4));return o?(e.y=+o[0],n+o[0].length):-1}function Xe(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+2));return o?(e.y=function(e){return e+(e>68?1900:2e3)}(+o[0]),n+o[0].length):-1}function Qe(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=-t,n+5):-1}function Ke(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+2));return o?(e.m=o[0]-1,n+o[0].length):-1}function Je(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+2));return o?(e.d=+o[0],n+o[0].length):-1}function Ze(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+3));return o?(e.j=+o[0],n+o[0].length):-1}function et(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+2));return o?(e.H=+o[0],n+o[0].length):-1}function tt(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+2));return o?(e.M=+o[0],n+o[0].length):-1}function nt(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+2));return o?(e.S=+o[0],n+o[0].length):-1}function ot(e,t,n){aa.lastIndex=0;var o=aa.exec(t.substring(n,n+3));return o?(e.L=+o[0],n+o[0].length):-1}function rt(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",o=~~(ci(t)/60),r=ci(t)%60;return n+Oe(o,"0",2)+Oe(r,"0",2)}function it(e,t,n){la.lastIndex=0;var o=la.exec(t.substring(n,n+1));return o?n+o[0].length:-1}function at(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,o=e[n];!o[1](t);)o=e[++n];return o[0](t)}}function lt(){}function st(e,t,n){var o=n.s=e+t,r=o-e,i=o-r;n.t=e-i+(t-r)}function ct(e,t){e&&Aa.hasOwnProperty(e.type)&&Aa[e.type](e,t)}function ut(e,t,n){var o,r=-1,i=e.length-n;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function At(e,t){var n=-1,o=e.length;for(t.polygonStart();++n<o;)ut(e[n],t,1);t.polygonEnd()}function dt(){function e(e,t){t=t*Ti/2+Mi/4;var n=(e*=Ti)-o,a=n>=0?1:-1,l=a*n,s=Math.cos(t),c=Math.sin(t),u=i*c,A=r*s+u*Math.cos(l),d=u*a*Math.sin(l);ha.add(Math.atan2(d,A)),o=e,r=s,i=c}var t,n,o,r,i;fa.point=function(a,l){fa.point=e,o=(t=a)*Ti,r=Math.cos(l=(n=l)*Ti/2+Mi/4),i=Math.sin(l)},fa.lineEnd=function(){e(t,n)}}function ht(e){var t=e[0],n=e[1],o=Math.cos(n);return[o*Math.cos(t),o*Math.sin(t),Math.sin(n)]}function ft(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function bt(e){return[Math.atan2(e[1],e[0]),oe(e[2])]}function _t(e,t){return ci(e[0]-t[0])<Ri&&ci(e[1]-t[1])<Ri}function yt(e,t){e*=Ti;var n=Math.cos(t*=Ti);wt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function wt(e,t,n){va+=(e-va)/++pa,ma+=(t-ma)/pa,ba+=(n-ba)/pa}function xt(){function e(e,r){e*=Ti;var i=Math.cos(r*=Ti),a=i*Math.cos(e),l=i*Math.sin(e),s=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*s-o*l)*c+(c=o*a-t*s)*c+(c=t*l-n*a)*c),t*a+n*l+o*s);ga+=c,_a+=c*(t+(t=a)),ya+=c*(n+(n=l)),wa+=c*(o+(o=s)),wt(t,n,o)}var t,n,o;Ma.point=function(r,i){r*=Ti;var a=Math.cos(i*=Ti);t=a*Math.cos(r),n=a*Math.sin(r),o=Math.sin(i),Ma.point=e,wt(t,n,o)}}function Ct(){Ma.point=yt}function kt(){function e(e,t){e*=Ti;var n=Math.cos(t*=Ti),a=n*Math.cos(e),l=n*Math.sin(e),s=Math.sin(t),c=r*s-i*l,u=i*a-o*s,A=o*l-r*a,d=Math.sqrt(c*c+u*u+A*A),h=o*a+r*l+i*s,f=d&&-ne(h)/d,p=Math.atan2(d,h);xa+=f*c,Ca+=f*u,ka+=f*A,ga+=p,_a+=p*(o+(o=a)),ya+=p*(r+(r=l)),wa+=p*(i+(i=s)),wt(o,r,i)}var t,n,o,r,i;Ma.point=function(a,l){t=a,n=l,Ma.point=e,a*=Ti;var s=Math.cos(l*=Ti);o=s*Math.cos(a),r=s*Math.sin(a),i=Math.sin(l),wt(o,r,i)},Ma.lineEnd=function(){e(t,n),Ma.lineEnd=Ct,Ma.point=yt}}function Mt(){return!0}function St(e,t,n,o,r){var i=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],o=e[t];if(_t(n,o)){r.lineStart();for(var l=0;t>l;++l)r.point((n=e[l])[0],n[1]);return void r.lineEnd()}var s=new Rt(n,e,null,!0),c=new Rt(n,null,s,!1);s.o=c,i.push(s),a.push(c),c=new Rt(o,null,s=new Rt(o,e,null,!1),!0),s.o=c,i.push(s),a.push(c)}}),a.sort(t),Et(i),Et(a),i.length){for(var l=0,s=n,c=a.length;c>l;++l)a[l].e=s=!s;for(var u,A,d=i[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(l=0,c=u.length;c>l;++l)r.point((A=u[l])[0],A[1]);else o(h.x,h.n.x,1,r);h=h.n}else{if(f)for(l=(u=h.p.z).length-1;l>=0;--l)r.point((A=u[l])[0],A[1]);else o(h.x,h.p.x,-1,r);h=h.p}u=(h=h.o).z,f=!f}while(!h.v);r.lineEnd()}}}function Et(e){if(t=e.length){for(var t,n,o=0,r=e[0];++o<t;)r.n=n=e[o],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Rt(e,t,n,o){this.x=e,this.z=t,this.o=n,this.e=o,this.v=!1,this.n=this.p=null}function Nt(e,t,n,o){return function(r,i){function a(t,n){var o=r(t,n);e(t=o[0],n=o[1])&&i.point(t,n)}function l(e,t){var n=r(e,t);g.point(n[0],n[1])}function s(){m.point=l,g.lineStart()}function c(){m.point=a,g.lineEnd()}function u(e,t){p.push([e,t]);var n=r(e,t);_.point(n[0],n[1])}function A(){_.lineStart(),p=[]}function d(){u(p[0][0],p[0][1]),_.lineEnd();var e,t=_.clean(),n=b.buffer(),o=n.length;if(p.pop(),f.push(p),p=null,o)if(1&t){var r,a=-1;if((o=(e=n[0]).length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart();++a<o;)i.point((r=e[a])[0],r[1]);i.lineEnd()}}else o>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Tt))}var h,f,p,g=t(i),v=r.invert(o[0],o[1]),m={point:a,lineStart:s,lineEnd:c,polygonStart:function(){m.point=u,m.lineStart=A,m.lineEnd=d,h=[],f=[]},polygonEnd:function(){m.point=a,m.lineStart=s,m.lineEnd=c,h=Kr.merge(h);var e=function(e,t){var n=e[0],o=e[1],r=[Math.sin(n),-Math.cos(n),0],i=0,a=0;ha.reset();for(var l=0,s=t.length;s>l;++l){var c=t[l],u=c.length;if(u)for(var A=c[0],d=A[0],h=A[1]/2+Mi/4,f=Math.sin(h),p=Math.cos(h),g=1;;){g===u&&(g=0);var v=(e=c[g])[0],m=e[1]/2+Mi/4,b=Math.sin(m),_=Math.cos(m),y=v-d,w=y>=0?1:-1,x=w*y,C=x>Mi,k=f*b;if(ha.add(Math.atan2(k*w*Math.sin(x),p*_+k*Math.cos(x))),i+=C?y+w*Si:y,C^d>=n^v>=n){var M=pt(ht(A),ht(e));mt(M);var S=pt(r,M);mt(S);var E=(C^y>=0?-1:1)*oe(S[2]);(o>E||o===E&&(M[0]||M[1]))&&(a+=C^y>=0?1:-1)}if(!g++)break;d=v,f=b,p=_,A=e}}return(-Ri>i||Ri>i&&0>ha)^1&a}(v,f);h.length?(y||(i.polygonStart(),y=!0),St(h,Lt,e,n,i)):e&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},b=Dt(),_=t(b),y=!1;return m}}function Tt(e){return e.length>1}function Dt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Lt(e,t){return((e=e.x)[0]<0?e[1]-Ei-Ri:Ei-e[1])-((t=t.x)[0]<0?t[1]-Ei-Ri:Ei-t[1])}function It(e,t,n,o){return function(r){var i,a=r.a,l=r.b,s=a.x,c=a.y,u=0,A=1,d=l.x-s,h=l.y-c;if(i=e-s,d||!(i>0)){if(i/=d,0>d){if(u>i)return;A>i&&(A=i)}else if(d>0){if(i>A)return;i>u&&(u=i)}if(i=n-s,d||!(0>i)){if(i/=d,0>d){if(i>A)return;i>u&&(u=i)}else if(d>0){if(u>i)return;A>i&&(A=i)}if(i=t-c,h||!(i>0)){if(i/=h,0>h){if(u>i)return;A>i&&(A=i)}else if(h>0){if(i>A)return;i>u&&(u=i)}if(i=o-c,h||!(0>i)){if(i/=h,0>h){if(i>A)return;i>u&&(u=i)}else if(h>0){if(u>i)return;A>i&&(A=i)}return u>0&&(r.a={x:s+u*d,y:c+u*h}),1>A&&(r.b={x:s+A*d,y:c+A*h}),r}}}}}}function Pt(e,t,n,o){function r(o,r){return ci(o[0]-e)<Ri?r>0?0:3:ci(o[0]-n)<Ri?r>0?2:1:ci(o[1]-t)<Ri?r>0?1:0:r>0?3:2}function i(e,t){return a(e.x,t.x)}function a(e,t){var n=r(e,1),o=r(t,1);return n!==o?n-o:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(l){function s(i,l,s,c){var u=0,A=0;if(null==i||(u=r(i,s))!==(A=r(l,s))||a(i,l)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?o:t)}while((u=(u+s+4)%4)!==A);else c.point(l[0],l[1])}function c(r,i){return r>=e&&n>=r&&i>=t&&o>=i}function u(e,t){c(e,t)&&l.point(e,t)}function A(e,t){var n=c(e=Math.max(-Ea,Math.min(Ea,e)),t=Math.max(-Ea,Math.min(Ea,t)));if(h&&f.push([e,t]),y)p=e,g=t,v=n,y=!1,n&&(l.lineStart(),l.point(e,t));else if(n&&_)l.point(e,t);else{var o={a:{x:m,y:b},b:{x:e,y:t}};k(o)?(_||(l.lineStart(),l.point(o.a.x,o.a.y)),l.point(o.b.x,o.b.y),n||l.lineEnd(),w=!1):n&&(l.lineStart(),l.point(e,t),w=!1)}m=e,b=t,_=n}var d,h,f,p,g,v,m,b,_,y,w,x=l,C=Dt(),k=It(e,t,n,o),M={point:u,lineStart:function(){M.point=A,h&&h.push(f=[]),y=!0,_=!1,m=b=NaN},lineEnd:function(){d&&(A(p,g),v&&_&&C.rejoin(),d.push(C.buffer())),M.point=u,_&&l.lineEnd()},polygonStart:function(){l=C,d=[],h=[],w=!0},polygonEnd:function(){l=x,d=Kr.merge(d);var t=function(e){for(var t=0,n=h.length,o=e[1],r=0;n>r;++r)for(var i,a=1,l=h[r],s=l.length,c=l[0];s>a;++a)i=l[a],c[1]<=o?i[1]>o&&te(c,i,e)>0&&++t:i[1]<=o&&te(c,i,e)<0&&--t,c=i;return 0!==t}([e,o]),n=w&&t,r=d.length;(n||r)&&(l.polygonStart(),n&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),r&&St(d,i,t,s,l),l.polygonEnd()),d=h=f=null}};return M}}function zt(e,t){function n(n,o){return n=e(n,o),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,o){return(n=t.invert(n,o))&&e.invert(n[0],n[1])}),n}function Ht(e){var t=0,n=Mi/3,o=Xt(e),r=o(t,n);return r.parallels=function(e){return arguments.length?o(t=e[0]*Mi/180,n=e[1]*Mi/180):[t/Mi*180,n/Mi*180]},r}function Ft(e,t){function n(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}var o=Math.sin(e),r=(o+Math.sin(t))/2,i=1+o*(2*r-o),a=Math.sqrt(i)/r;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,oe((i-(e*e+n*n)*r*r)/(2*r))]},n}function Bt(){function e(e,t){Na+=r*e-o*t,o=e,r=t}var t,n,o,r;Pa.point=function(i,a){Pa.point=e,t=o=i,n=r=a},Pa.lineEnd=function(){e(t,n)}}function $t(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vt(e,t){va+=e,ma+=t,++ba}function Ot(){function e(e,o){var r=e-t,i=o-n,a=Math.sqrt(r*r+i*i);_a+=a*(t+e)/2,ya+=a*(n+o)/2,wa+=a,Vt(t=e,n=o)}var t,n;Ha.point=function(o,r){Ha.point=e,Vt(t=o,n=r)}}function jt(){Ha.point=Vt}function Ut(){function e(e,t){var n=e-o,i=t-r,a=Math.sqrt(n*n+i*i);_a+=a*(o+e)/2,ya+=a*(r+t)/2,wa+=a,xa+=(a=r*e-o*t)*(o+e),Ca+=a*(r+t),ka+=3*a,Vt(o=e,r=t)}var t,n,o,r;Ha.point=function(i,a){Ha.point=e,Vt(t=o=i,n=r=a)},Ha.lineEnd=function(){e(t,n)}}function Wt(e){function t(e){return(l?o:n)(e)}function n(t){return Yt(t,function(n,o){n=e(n,o),t.point(n[0],n[1])})}function o(t){function n(n,o){n=e(n,o),t.point(n[0],n[1])}function o(){m=NaN,x.point=i,t.lineStart()}function i(n,o){var i=ht([n,o]),a=e(n,o);r(m,b,v,_,y,w,m=a[0],b=a[1],v=n,_=i[0],y=i[1],w=i[2],l,t),t.point(m,b)}function a(){x.point=n,t.lineEnd()}function s(){o(),x.point=c,x.lineEnd=u}function c(e,t){i(A=e,t),d=m,h=b,f=_,p=y,g=w,x.point=i}function u(){r(m,b,v,_,y,w,d,h,A,f,p,g,l,t),x.lineEnd=a,a()}var A,d,h,f,p,g,v,m,b,_,y,w,x={point:n,lineStart:o,lineEnd:a,polygonStart:function(){t.polygonStart(),x.lineStart=s},polygonEnd:function(){t.polygonEnd(),x.lineStart=o}};return x}function r(t,n,o,l,s,c,u,A,d,h,f,p,g,v){var m=u-t,b=A-n,_=m*m+b*b;if(_>4*i&&g--){var y=l+h,w=s+f,x=c+p,C=Math.sqrt(y*y+w*w+x*x),k=Math.asin(x/=C),M=ci(ci(x)-1)<Ri||ci(o-d)<Ri?(o+d)/2:Math.atan2(w,y),S=e(M,k),E=S[0],R=S[1],N=E-t,T=R-n,D=b*N-m*T;(D*D/_>i||ci((m*N+b*T)/_-.5)>.3||a>l*h+s*f+c*p)&&(r(t,n,o,l,s,c,E,R,M,y/=C,w/=C,x,g,v),v.point(E,R),r(E,R,M,y,w,x,u,A,d,h,f,p,g,v))}}var i=.5,a=Math.cos(30*Ti),l=16;return t.precision=function(e){return arguments.length?(l=(i=e*e)>0&&16,t):Math.sqrt(i)},t}function qt(e){this.stream=e}function Yt(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Gt(e){return Xt(function(){return e})()}function Xt(e){function t(e){return[(e=l(e[0]*Ti,e[1]*Ti))[0]*d+s,c-e[1]*d]}function n(e){return(e=l.invert((e[0]-s)/d,(c-e[1])/d))&&[e[0]*Di,e[1]*Di]}function o(){l=zt(a=Zt(v,m,b),i);var e=i(p,g);return s=h-e[0]*d,c=f+e[1]*d,r()}function r(){return u&&(u.valid=!1,u=null),t}var i,a,l,s,c,u,A=Wt(function(e,t){return[(e=i(e,t))[0]*d+s,c-e[1]*d]}),d=150,h=480,f=250,p=0,g=0,v=0,m=0,b=0,_=Sa,y=Te,w=null,x=null;return t.stream=function(e){return u&&(u.valid=!1),(u=Qt(_(a,A(y(e))))).valid=!0,u},t.clipAngle=function(e){return arguments.length?(_=null==e?(w=e,Sa):function(e){function t(e,t){return Math.cos(e)*Math.cos(t)>r}function n(e,t,n){var o=[1,0,0],i=pt(ht(e),ht(t)),a=ft(i,i),l=i[0],s=a-l*l;if(!s)return!n&&e;var c=r*a/s,u=-r*l/s,A=pt(o,i),d=vt(o,c);gt(d,vt(i,u));var h=A,f=ft(d,h),p=ft(h,h),g=f*f-p*(ft(d,d)-1);if(!(0>g)){var v=Math.sqrt(g),m=vt(h,(-f-v)/p);if(gt(m,d),m=bt(m),!n)return m;var b,_=e[0],y=t[0],w=e[1],x=t[1];_>y&&(b=_,_=y,y=b);var C=y-_,k=ci(C-Mi)<Ri;if(!k&&w>x&&(b=w,w=x,x=b),k||Ri>C?k?w+x>0^m[1]<(ci(m[0]-_)<Ri?w:x):w<=m[1]&&m[1]<=x:C>Mi^(_<=m[0]&&m[0]<=y)){var M=vt(h,(-f+v)/p);return gt(M,d),[m,bt(M)]}}}function o(t,n){var o=i?e:Mi-e,r=0;return-o>t?r|=1:t>o&&(r|=2),-o>n?r|=4:n>o&&(r|=8),r}var r=Math.cos(e),i=r>0,a=ci(r)>Ri;return Nt(t,function(e){var r,l,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(A,d){var h,f=[A,d],p=t(A,d),g=i?p?0:o(A,d):p?o(A+(0>A?Mi:-Mi),d):0;if(!r&&(c=s=p)&&e.lineStart(),p!==s&&(h=n(r,f),(_t(r,h)||_t(f,h))&&(f[0]+=Ri,f[1]+=Ri,p=t(f[0],f[1]))),p!==s)u=0,p?(e.lineStart(),h=n(f,r),e.point(h[0],h[1])):(h=n(r,f),e.point(h[0],h[1]),e.lineEnd()),r=h;else if(a&&r&&i^p){var v;g&l||!(v=n(f,r,!0))||(u=0,i?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!p||r&&_t(r,f)||e.point(f[0],f[1]),r=f,s=p,l=g},lineEnd:function(){s&&e.lineEnd(),r=null},clean:function(){return u|(c&&s)<<1}}},on(e,6*Ti),i?[0,-e]:[-Mi,e-Mi])}((w=+e)*Ti),r()):w},t.clipExtent=function(e){return arguments.length?(x=e,y=e?Pt(e[0][0],e[0][1],e[1][0],e[1][1]):Te,r()):x},t.scale=function(e){return arguments.length?(d=+e,o()):d},t.translate=function(e){return arguments.length?(h=+e[0],f=+e[1],o()):[h,f]},t.center=function(e){return arguments.length?(p=e[0]%360*Ti,g=e[1]%360*Ti,o()):[p*Di,g*Di]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Ti,m=e[1]%360*Ti,b=e.length>2?e[2]%360*Ti:0,o()):[v*Di,m*Di,b*Di]},Kr.rebind(t,A,"precision"),function(){return i=e.apply(this,arguments),t.invert=i.invert&&n,o()}}function Qt(e){return Yt(e,function(t,n){e.point(t*Ti,n*Ti)})}function Kt(e,t){return[e,t]}function Jt(e,t){return[e>Mi?e-Si:-Mi>e?e+Si:e,t]}function Zt(e,t,n){return e?t||n?zt(tn(e),nn(t,n)):tn(e):t||n?nn(t,n):Jt}function en(e){return function(t,n){return[(t+=e)>Mi?t-Si:-Mi>t?t+Si:t,n]}}function tn(e){var t=en(e);return t.invert=en(-e),t}function nn(e,t){function n(e,t){var n=Math.cos(t),l=Math.cos(e)*n,s=Math.sin(e)*n,c=Math.sin(t),u=c*o+l*r;return[Math.atan2(s*i-u*a,l*o-c*r),oe(u*i+s*a)]}var o=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),l=Math.cos(e)*n,s=Math.sin(e)*n,c=Math.sin(t),u=c*i-s*a;return[Math.atan2(s*i+c*a,l*o+u*r),oe(u*o-l*r)]},n}function on(e,t){var n=Math.cos(e),o=Math.sin(e);return function(r,i,a,l){var s=a*t;null!=r?(r=rn(n,r),i=rn(n,i),(a>0?i>r:r>i)&&(r+=a*Si)):(r=e+a*Si,i=e-.5*s);for(var c,u=r;a>0?u>i:i>u;u-=s)l.point((c=bt([n,-o*Math.cos(u),-o*Math.sin(u)]))[0],c[1])}}function rn(e,t){var n=ht(t);n[0]-=e,mt(n);var o=ne(-n[1]);return((-n[2]<0?-o:o)+2*Math.PI-Ri)%(2*Math.PI)}function an(e,t,n){var o=Kr.range(e,t-Ri,n).concat(t);return function(e){return o.map(function(t){return[e,t]})}}function ln(e,t,n){var o=Kr.range(e,t-Ri,n).concat(t);return function(e){return o.map(function(t){return[t,e]})}}function sn(e){return e.source}function cn(e){return e.target}function un(e,t){function n(t,n){var o=Math.cos(t),r=Math.cos(n),i=e(o*r);return[i*r*Math.sin(t),i*Math.sin(n)]}return n.invert=function(e,n){var o=Math.sqrt(e*e+n*n),r=t(o),i=Math.sin(r),a=Math.cos(r);return[Math.atan2(e*i,o*a),Math.asin(o&&n*i/o)]},n}function An(e,t){function n(e,t){a>0?-Ei+Ri>t&&(t=-Ei+Ri):t>Ei-Ri&&(t=Ei-Ri);var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var o=Math.cos(e),r=function(e){return Math.tan(Mi/4+e/2)},i=e===t?Math.sin(e):Math.log(o/Math.cos(t))/Math.log(r(t)/r(e)),a=o*Math.pow(r(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,o=ee(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/o,1/i))-Ei]},n):hn}function dn(e,t){function n(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var o=Math.cos(e),r=e===t?Math.sin(e):(o-Math.cos(t))/(t-e),i=o/r+e;return ci(r)<Ri?Kt:(n.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-ee(r)*Math.sqrt(e*e+n*n)]},n)}function hn(e,t){return[e,Math.log(Math.tan(Mi/4+t/2))]}function fn(e){var t,n=Gt(e),o=n.scale,r=n.translate,i=n.clipExtent;return n.scale=function(){var e=o.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=i.apply(n,arguments);if(a===n){if(t=null==e){var l=Mi*o(),s=r();i([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else t&&(a=null);return a},n.clipExtent(null)}function pn(e,t){return[Math.log(Math.tan(Mi/4+t/2)),-e]}function gn(e){return e[0]}function vn(e){return e[1]}function mn(e){for(var t=e.length,n=[0,1],o=2,r=2;t>r;r++){for(;o>1&&te(e[n[o-2]],e[n[o-1]],e[r])<=0;)--o;n[o++]=r}return n.slice(0,o)}function bn(e,t){return e[0]-t[0]||e[1]-t[1]}function _n(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function yn(e,t,n,o){var r=e[0],i=n[0],a=t[0]-r,l=o[0]-i,s=e[1],c=n[1],u=t[1]-s,A=o[1]-c,d=(l*(s-c)-A*(r-i))/(A*a-l*u);return[r+d*a,s+d*u]}function wn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function xn(e){var t=Ka.pop()||new function(){$n(this),this.edge=this.site=this.circle=null};return t.site=e,t}function Cn(e){Dn(e),Ga.remove(e),Ka.push(e),$n(e)}function kn(e){var t=e.circle,n=t.x,o=t.cy,r={x:n,y:o},i=e.P,a=e.N,l=[e];Cn(e);for(var s=i;s.circle&&ci(n-s.circle.x)<Ri&&ci(o-s.circle.cy)<Ri;)i=s.P,l.unshift(s),Cn(s),s=i;l.unshift(s),Dn(s);for(var c=a;c.circle&&ci(n-c.circle.x)<Ri&&ci(o-c.circle.cy)<Ri;)a=c.N,l.push(c),Cn(c),c=a;l.push(c),Dn(c);var u,A=l.length;for(u=1;A>u;++u)c=l[u],s=l[u-1],Hn(c.edge,s.site,c.site,r);s=l[0],(c=l[A-1]).edge=Pn(s.site,c.site,null,r),Tn(s),Tn(c)}function Mn(e){for(var t,n,o,r,i=e.x,a=e.y,l=Ga._;l;)if((o=Sn(l,a)-i)>Ri)l=l.L;else{if(!((r=i-En(l,a))>Ri)){o>-Ri?(t=l.P,n=l):r>-Ri?(t=l,n=l.N):t=n=l;break}if(!l.R){t=l;break}l=l.R}var s=xn(e);if(Ga.insert(t,s),t||n){if(t===n)return Dn(t),n=xn(t.site),Ga.insert(s,n),s.edge=n.edge=Pn(t.site,s.site),Tn(t),void Tn(n);if(!n)return void(s.edge=Pn(t.site,s.site));Dn(t),Dn(n);var c=t.site,u=c.x,A=c.y,d=e.x-u,h=e.y-A,f=n.site,p=f.x-u,g=f.y-A,v=2*(d*g-h*p),m=d*d+h*h,b=p*p+g*g,_={x:(g*m-h*b)/v+u,y:(d*b-p*m)/v+A};Hn(n.edge,c,f,_),s.edge=Pn(c,e,null,_),n.edge=Pn(e,f,null,_),Tn(t),Tn(n)}}function Sn(e,t){var n=e.site,o=n.x,r=n.y,i=r-t;if(!i)return o;var a=e.P;if(!a)return-1/0;var l=(n=a.site).x,s=n.y,c=s-t;if(!c)return l;var u=l-o,A=1/i-1/c,d=u/c;return A?(-d+Math.sqrt(d*d-2*A*(u*u/(-2*c)-s+c/2+r-i/2)))/A+o:(o+l)/2}function En(e,t){var n=e.N;if(n)return Sn(n,t);var o=e.site;return o.y===t?o.x:1/0}function Rn(e){this.site=e,this.edges=[]}function Nn(e,t){return t.angle-e.angle}function Tn(e){var t=e.P,n=e.N;if(t&&n){var o=t.site,r=e.site,i=n.site;if(o!==i){var a=r.x,l=r.y,s=o.x-a,c=o.y-l,u=i.x-a,A=2*(s*(g=i.y-l)-c*u);if(!(A>=-Ni)){var d=s*s+c*c,h=u*u+g*g,f=(g*d-c*h)/A,p=(s*h-u*d)/A,g=p+l,v=Ja.pop()||new function(){$n(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=e,v.site=r,v.x=f+a,v.y=g+Math.sqrt(f*f+p*p),v.cy=g,e.circle=v;for(var m=null,b=Qa._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}Qa.insert(m,v),m||(Xa=v)}}}}function Dn(e){var t=e.circle;t&&(t.P||(Xa=t.N),Qa.remove(t),Ja.push(t),$n(t),e.circle=null)}function Ln(e,t){var n=e.b;if(n)return!0;var o,r,i=e.a,a=t[0][0],l=t[1][0],s=t[0][1],c=t[1][1],u=e.l,A=e.r,d=u.x,h=u.y,f=A.x,p=A.y,g=(d+f)/2,v=(h+p)/2;if(p===h){if(a>g||g>=l)return;if(d>f){if(i){if(i.y>=c)return}else i={x:g,y:s};n={x:g,y:c}}else{if(i){if(i.y<s)return}else i={x:g,y:c};n={x:g,y:s}}}else if(r=v-(o=(d-f)/(p-h))*g,-1>o||o>1)if(d>f){if(i){if(i.y>=c)return}else i={x:(s-r)/o,y:s};n={x:(c-r)/o,y:c}}else{if(i){if(i.y<s)return}else i={x:(c-r)/o,y:c};n={x:(s-r)/o,y:s}}else if(p>h){if(i){if(i.x>=l)return}else i={x:a,y:o*a+r};n={x:l,y:o*l+r}}else{if(i){if(i.x<a)return}else i={x:l,y:o*l+r};n={x:a,y:o*a+r}}return e.a=i,e.b=n,!0}function In(e,t){this.l=e,this.r=t,this.a=this.b=null}function Pn(e,t,n,o){var r=new In(e,t);return qa.push(r),n&&Hn(r,e,t,n),o&&Hn(r,t,e,o),Ya[e.i].edges.push(new Fn(r,e,t)),Ya[t.i].edges.push(new Fn(r,t,e)),r}function zn(e,t,n){var o=new In(e,null);return o.a=t,o.b=n,qa.push(o),o}function Hn(e,t,n,o){e.a||e.b?e.l===n?e.b=o:e.a=o:(e.a=o,e.l=t,e.r=n)}function Fn(e,t,n){var o=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-o.x,o.y-r.y):Math.atan2(o.x-r.x,r.y-o.y)}function Bn(){this._=null}function $n(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Vn(e,t){var n=t,o=t.R,r=n.U;r?r.L===n?r.L=o:r.R=o:e._=o,o.U=r,n.U=o,n.R=o.L,n.R&&(n.R.U=n),o.L=n}function On(e,t){var n=t,o=t.L,r=n.U;r?r.L===n?r.L=o:r.R=o:e._=o,o.U=r,n.U=o,n.L=o.R,n.L&&(n.L.U=n),o.R=n}function jn(e){for(;e.L;)e=e.L;return e}function Un(e,t){var n,o,r,i=e.sort(Wn).pop();for(qa=[],Ya=new Array(e.length),Ga=new Bn,Qa=new Bn;;)if(r=Xa,i&&(!r||i.y<r.y||i.y===r.y&&i.x<r.x))(i.x!==n||i.y!==o)&&(Ya[i.i]=new Rn(i),Mn(i),n=i.x,o=i.y),i=e.pop();else{if(!r)break;kn(r.arc)}t&&(function(e){for(var t,n=qa,o=It(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)(!Ln(t=n[r],e)||!o(t)||ci(t.a.x-t.b.x)<Ri&&ci(t.a.y-t.b.y)<Ri)&&(t.a=t.b=null,n.splice(r,1))}(t),function(e){for(var t,n,o,r,i,a,l,s,c,u,A=e[0][0],d=e[1][0],h=e[0][1],f=e[1][1],p=Ya,g=p.length;g--;)if((i=p[g])&&i.prepare())for(s=(l=i.edges).length,a=0;s>a;)o=(u=l[a].end()).x,r=u.y,t=(c=l[++a%s].start()).x,n=c.y,(ci(o-t)>Ri||ci(r-n)>Ri)&&(l.splice(a,0,new Fn(zn(i.site,u,ci(o-A)<Ri&&f-r>Ri?{x:A,y:ci(t-A)<Ri?n:f}:ci(r-f)<Ri&&d-o>Ri?{x:ci(n-f)<Ri?t:d,y:f}:ci(o-d)<Ri&&r-h>Ri?{x:d,y:ci(t-d)<Ri?n:h}:ci(r-h)<Ri&&o-A>Ri?{x:ci(n-h)<Ri?t:A,y:h}:null),i.site,null)),++s)}(t));var a={cells:Ya,edges:qa};return Ga=Qa=qa=Ya=null,a}function Wn(e,t){return t.y-e.y||t.x-e.x}function qn(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function Yn(e){return e.x}function Gn(e){return e.y}function Xn(e,t){e=Kr.rgb(e),t=Kr.rgb(t);var n=e.r,o=e.g,r=e.b,i=t.r-n,a=t.g-o,l=t.b-r;return function(e){return"#"+Ce(Math.round(n+i*e))+Ce(Math.round(o+a*e))+Ce(Math.round(r+l*e))}}function Qn(e,t){var n,o={},r={};for(n in e)n in t?o[n]=Zn(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in o)r[n]=o[n](e);return r}}function Kn(e,t){return t-=e=+e,function(n){return e+t*n}}function Jn(e,t){var n,o,r,i=el.lastIndex=tl.lastIndex=0,a=-1,l=[],s=[];for(e+="",t+="";(n=el.exec(e))&&(o=tl.exec(t));)(r=o.index)>i&&(r=t.substring(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,s.push({i:a,x:Kn(n,o)})),i=tl.lastIndex;return i<t.length&&(r=t.substring(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?s[0]?(t=s[0].x,function(e){return t(e)+""}):function(){return t}:(t=s.length,function(e){for(var n,o=0;t>o;++o)l[(n=s[o]).i]=n.x(e);return l.join("")})}function Zn(e,t){for(var n,o=Kr.interpolators.length;--o>=0&&!(n=Kr.interpolators[o](e,t)););return n}function eo(e,t){var n,o=[],r=[],i=e.length,a=t.length,l=Math.min(e.length,t.length);for(n=0;l>n;++n)o.push(Zn(e[n],t[n]));for(;i>n;++n)r[n]=e[n];for(;a>n;++n)r[n]=t[n];return function(e){for(n=0;l>n;++n)r[n]=o[n](e);return r}}function to(e){return function(t){return 1-e(1-t)}}function no(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function oo(e){return e*e}function ro(e){return e*e*e}function io(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function ao(e){return 1-Math.cos(e*Ei)}function lo(e){return Math.pow(2,10*(e-1))}function so(e){return 1-Math.sqrt(1-e*e)}function co(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function uo(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Ao(e){var t=[e.a,e.b],n=[e.c,e.d],o=fo(t),r=ho(t,n),i=fo(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,o*=-1,r*=-1),this.rotate=(o?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Di,this.translate=[e.e,e.f],this.scale=[o,i],this.skew=i?Math.atan2(r,i)*Di:0}function ho(e,t){return e[0]*t[0]+e[1]*t[1]}function fo(e){var t=Math.sqrt(ho(e,e));return t&&(e[0]/=t,e[1]/=t),t}function po(e,t){var n,o=[],r=[],i=Kr.transform(e),a=Kr.transform(t),l=i.translate,s=a.translate,c=i.rotate,u=a.rotate,A=i.skew,d=a.skew,h=i.scale,f=a.scale;return l[0]!=s[0]||l[1]!=s[1]?(o.push("translate(",null,",",null,")"),r.push({i:1,x:Kn(l[0],s[0])},{i:3,x:Kn(l[1],s[1])})):s[0]||s[1]?o.push("translate("+s+")"):o.push(""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),r.push({i:o.push(o.pop()+"rotate(",null,")")-2,x:Kn(c,u)})):u&&o.push(o.pop()+"rotate("+u+")"),A!=d?r.push({i:o.push(o.pop()+"skewX(",null,")")-2,x:Kn(A,d)}):d&&o.push(o.pop()+"skewX("+d+")"),h[0]!=f[0]||h[1]!=f[1]?(n=o.push(o.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:Kn(h[0],f[0])},{i:n-2,x:Kn(h[1],f[1])})):(1!=f[0]||1!=f[1])&&o.push(o.pop()+"scale("+f+")"),n=r.length,function(e){for(var t,i=-1;++i<n;)o[(t=r[i]).i]=t.x(e);return o.join("")}}function go(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function vo(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function mo(e){for(var t=e.source,n=e.target,o=function(e,t){if(e===t)return e;for(var n=bo(e),o=bo(t),r=n.pop(),i=o.pop(),a=null;r===i;)a=r,r=n.pop(),i=o.pop();return a}(t,n),r=[t];t!==o;)t=t.parent,r.push(t);for(var i=r.length;n!==o;)r.splice(i,0,n),n=n.parent;return r}function bo(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function _o(e){e.fixed|=2}function yo(e){e.fixed&=-7}function wo(e){e.fixed|=4,e.px=e.x,e.py=e.y}function xo(e){e.fixed&=-5}function Co(e,t){return Kr.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Eo,e}function ko(e){return e.children}function Mo(e){return e.value}function So(e,t){return t.value-e.value}function Eo(e){return Kr.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Ro(e){return e.x}function No(e){return e.y}function To(e,t,n){e.y0=t,e.y=n}function Do(e){return Kr.range(e.length)}function Lo(e){for(var t=-1,n=e[0].length,o=[];++t<n;)o[t]=0;return o}function Io(e){for(var t,n=1,o=0,r=e[0][1],i=e.length;i>n;++n)(t=e[n][1])>r&&(o=n,r=t);return o}function Po(e){return e.reduce(zo,0)}function zo(e,t){return e+t[1]}function Ho(e,t){return Fo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Fo(e,t){for(var n=-1,o=+e[0],r=(e[1]-o)/t,i=[];++n<=t;)i[n]=r*n+o;return i}function Bo(e){return[Kr.min(e),Kr.max(e)]}function $o(e,t){return e.parent==t.parent?1:2}function Vo(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Oo(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function jo(e,t){var n=e.children;if(n&&(r=n.length))for(var o,r,i=-1;++i<r;)t(o=jo(n[i],t),e)>0&&(e=o);return e}function Uo(e,t){return e.x-t.x}function Wo(e,t){return t.x-e.x}function qo(e,t){return e.depth-t.depth}function Yo(e,t){!function e(n,o){var r=n.children;if(r&&(a=r.length))for(var i,a,l=null,s=-1;++s<a;)e(i=r[s],l),l=i;t(n,o)}(e,null)}function Go(e,t,n){e=e._tree;var o=n/((t=t._tree).number-e.number);e.change+=o,t.change-=o,t.shift+=n,t.prelim+=n,t.mod+=n}function Xo(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function Qo(e,t){return e.value-t.value}function Ko(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Jo(e,t){e._pack_next=t,t._pack_prev=e}function Zo(e,t){var n=t.x-e.x,o=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+o*o}function er(e){function t(e){u=Math.min(e.x-e.r,u),A=Math.max(e.x+e.r,A),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(c=n.length)){var n,o,r,i,a,l,s,c,u=1/0,A=-1/0,d=1/0,h=-1/0;if(n.forEach(tr),(o=n[0]).x=-o.r,o.y=0,t(o),c>1&&((r=n[1]).x=r.r,r.y=0,t(r),c>2))for(or(o,r,i=n[2]),t(i),Ko(o,i),o._pack_prev=i,Ko(i,r),r=o._pack_next,a=3;c>a;a++){or(o,r,i=n[a]);var f=0,p=1,g=1;for(l=r._pack_next;l!==r;l=l._pack_next,p++)if(Zo(l,i)){f=1;break}if(1==f)for(s=o._pack_prev;s!==l._pack_prev&&!Zo(s,i);s=s._pack_prev,g++);f?(g>p||p==g&&r.r<o.r?Jo(o,r=l):Jo(o=s,r),a--):(Ko(o,i),r=i,t(i))}var v=(u+A)/2,m=(d+h)/2,b=0;for(a=0;c>a;a++)(i=n[a]).x-=v,i.y-=m,b=Math.max(b,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=b,n.forEach(nr)}}function tr(e){e._pack_next=e._pack_prev=e}function nr(e){delete e._pack_next,delete e._pack_prev}function or(e,t,n){var o=e.r+n.r,r=t.x-e.x,i=t.y-e.y;if(o&&(r||i)){var a=t.r+n.r,l=r*r+i*i,s=.5+((o*=o)-(a*=a))/(2*l),c=Math.sqrt(Math.max(0,2*a*(o+l)-(o-=l)*o-a*a))/(2*l);n.x=e.x+s*r+c*i,n.y=e.y+s*i-c*r}else n.x=e.x+o,n.y=e.y}function rr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function ir(e,t){var n=e.x+t[3],o=e.y+t[0],r=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>i&&(o+=i/2,i=0),{x:n,y:o,dx:r,dy:i}}function ar(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function lr(e){return e.rangeExtent?e.rangeExtent():ar(e.range())}function sr(e,t,n,o){var r=n(e[0],e[1]),i=o(t[0],t[1]);return function(e){return i(r(e))}}function cr(e,t){var n,o=0,r=e.length-1,i=e[o],a=e[r];return i>a&&(n=o,o=r,r=n,n=i,i=a,a=n),e[o]=t.floor(i),e[r]=t.ceil(a),e}function ur(e,t,n,o){var r=[],i=[],a=0,l=Math.min(e.length,t.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=l;)r.push(n(e[a-1],e[a])),i.push(o(t[a-1],t[a]));return function(t){var n=Kr.bisect(e,t,1,l)-1;return i[n](r[n](t))}}function Ar(e,t){return Kr.rebind(e,t,"range","rangeRound","interpolate","clamp")}function dr(e,t){return cr(e,function(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:dl}(hr(e,t)[2]))}function hr(e,t){null==t&&(t=10);var n=ar(e),o=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(o/t)/Math.LN10)),i=t/o*r;return.15>=i?r*=10:.35>=i?r*=5:.75>=i&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function fr(e,t){return Kr.range.apply(Kr,hr(e,t))}function pr(e,t,n){var o=hr(e,t);if(n){var r=ea.exec(n);if(r.shift(),"s"===r[8]){var i=Kr.formatPrefix(Math.max(ci(o[0]),ci(o[1])));return r[7]||(r[7]="."+gr(i.scale(o[2]))),r[8]="f",n=Kr.format(r.join("")),function(e){return n(i.scale(e))+i.symbol}}r[7]||(r[7]="."+function(e,t){var n=gr(t[2]);return e in hl?Math.abs(n-gr(Math.max(ci(t[0]),ci(t[1]))))+ +("e"!==e):n-2*("%"===e)}(r[8],o)),n=r.join("")}else n=",."+gr(o[2])+"f";return Kr.format(n)}function gr(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function vr(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function mr(e){return e.innerRadius}function br(e){return e.outerRadius}function _r(e){return e.startAngle}function yr(e){return e.endAngle}function wr(e){function t(t){function a(){c.push("M",i(e(u),l))}for(var s,c=[],u=[],A=-1,d=t.length,h=Ne(n),f=Ne(o);++A<d;)r.call(this,s=t[A],A)?u.push([+h.call(this,s,A),+f.call(this,s,A)]):u.length&&(a(),u=[]);return u.length&&a(),c.length?c.join(""):null}var n=gn,o=vn,r=Mt,i=xr,a=i.key,l=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=wl.get(e)||xr).key,t):a},t.tension=function(e){return arguments.length?(l=e,t):l},t}function xr(e){return e.join("L")}function Cr(e){for(var t=0,n=e.length,o=e[0],r=[o[0],",",o[1]];++t<n;)r.push("V",(o=e[t])[1],"H",o[0]);return r.join("")}function kr(e){for(var t=0,n=e.length,o=e[0],r=[o[0],",",o[1]];++t<n;)r.push("H",(o=e[t])[0],"V",o[1]);return r.join("")}function Mr(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return xr(e);var n=e.length!=t.length,o="",r=e[0],i=e[1],a=t[0],l=a,s=1;if(n&&(o+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],r=e[1],s=2),t.length>1){l=t[1],i=e[s],s++,o+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,s++)i=e[s],l=t[c],o+="S"+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1]}if(n){var u=e[s];o+="Q"+(i[0]+2*l[0]/3)+","+(i[1]+2*l[1]/3)+","+u[0]+","+u[1]}return o}function Sr(e,t){for(var n,o=[],r=(1-t)/2,i=e[0],a=e[1],l=1,s=e.length;++l<s;)n=i,i=a,a=e[l],o.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return o}function Er(e){if(e.length<3)return xr(e);var t=1,n=e.length,o=e[0],r=o[0],i=o[1],a=[r,r,r,(o=e[1])[0]],l=[i,i,i,o[1]],s=[r,",",i,"L",Rr(kl,a),",",Rr(kl,l)];for(e.push(e[n-1]);++t<=n;)o=e[t],a.shift(),a.push(o[0]),l.shift(),l.push(o[1]),Nr(s,a,l);return e.pop(),s.push("L",o),s.join("")}function Rr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Nr(e,t,n){e.push("C",Rr(xl,t),",",Rr(xl,n),",",Rr(Cl,t),",",Rr(Cl,n),",",Rr(kl,t),",",Rr(kl,n))}function Tr(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Dr(e){for(var t,n,o,r,i=[],a=function(e){for(var t=0,n=e.length-1,o=[],r=e[0],i=e[1],a=o[0]=Tr(r,i);++t<n;)o[t]=(a+(a=Tr(r=i,i=e[t+1])))/2;return o[t]=a,o}(e),l=-1,s=e.length-1;++l<s;)t=Tr(e[l],e[l+1]),ci(t)<Ri?a[l]=a[l+1]=0:(r=(n=a[l]/t)*n+(o=a[l+1]/t)*o)>9&&(r=3*t/Math.sqrt(r),a[l]=r*n,a[l+1]=r*o);for(l=-1;++l<=s;)r=(e[Math.min(s,l+1)][0]-e[Math.max(0,l-1)][0])/(6*(1+a[l]*a[l])),i.push([r||0,a[l]*r||0]);return i}function Lr(e){for(var t,n,o,r=-1,i=e.length;++r<i;)n=(t=e[r])[0],o=t[1]+_l,t[0]=n*Math.cos(o),t[1]=n*Math.sin(o);return e}function Ir(e){function t(t){function s(){p.push("M",l(e(v),A),u,c(e(g.reverse()),A),"Z")}for(var d,h,f,p=[],g=[],v=[],m=-1,b=t.length,_=Ne(n),y=Ne(r),w=n===o?function(){return h}:Ne(o),x=r===i?function(){return f}:Ne(i);++m<b;)a.call(this,d=t[m],m)?(g.push([h=+_.call(this,d,m),f=+y.call(this,d,m)]),v.push([+w.call(this,d,m),+x.call(this,d,m)])):g.length&&(s(),g=[],v=[]);return g.length&&s(),p.length?p.join(""):null}var n=gn,o=gn,r=0,i=vn,a=Mt,l=xr,s=l.key,c=l,u="L",A=.7;return t.x=function(e){return arguments.length?(n=o=e,t):o},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(r=i=e,t):i},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(s="function"==typeof e?l=e:(l=wl.get(e)||xr).key,c=l.reverse||l,u=l.closed?"M":"L",t):s},t.tension=function(e){return arguments.length?(A=e,t):A},t}function Pr(e){return e.radius}function zr(e){return[e.x,e.y]}function Hr(){return 64}function Fr(){return"circle"}function Br(e){var t=Math.sqrt(e/Mi);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function $r(e,t){return fi(e,Tl),e.id=t,e}function Vr(e,t,n,o){var r=e.id;return j(e,"function"==typeof n?function(e,i,a){e.__transition__[r].tween.set(t,o(n.call(e,e.__data__,i,a)))}:(n=o(n),function(e){e.__transition__[r].tween.set(t,n)}))}function Or(e){return null==e&&(e=""),function(){this.textContent=e}}function jr(e,t,n,o){var r=e.__transition__||(e.__transition__={active:0,count:0}),i=r[n];if(!i){var a=o.time;i=r[n]={tween:new f,time:a,ease:o.ease,delay:o.delay,duration:o.duration},++r.count,Kr.timer(function(o){function l(o){return r.active>n?c():(r.active=n,i.event&&i.event.start.call(e,u,t),i.tween.forEach(function(n,o){(o=o.call(e,u,t))&&p.push(o)}),void Kr.timer(function(){return f.c=s(o||1)?Mt:s,1},0,a))}function s(o){if(r.active!==n)return c();for(var a=o/h,l=A(a),s=p.length;s>0;)p[--s].call(e,l);return a>=1?(i.event&&i.event.end.call(e,u,t),c()):void 0}function c(){return--r.count?delete r[n]:delete e.__transition__,1}var u=e.__data__,A=i.ease,d=i.delay,h=i.duration,f=Ki,p=[];return f.t=d+a,o>=d?l(o-d):void(f.c=l)},0,a)}}function Ur(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Wr(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function qr(e){return e.toISOString()}function Yr(e,t,n){function o(t){return e(t)}function r(e,n){var o=(e[1]-e[0])/n,r=Kr.bisect($l,o);return r==$l.length?[t.year,hr(e.map(function(e){return e/31536e6}),n)[2]]:r?t[o/$l[r-1]<$l[r]/o?r-1:r]:[jl,hr(e,n)[2]]}return o.invert=function(t){return Gr(e.invert(t))},o.domain=function(t){return arguments.length?(e.domain(t),o):e.domain().map(Gr)},o.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Gr(+n+1),t).length}var i=o.domain(),a=ar(i),l=null==e?r(a,10):"number"==typeof e&&r(a,e);return l&&(e=l[0],t=l[1]),o.domain(cr(i,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Gr(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Gr(+t+1);return t}}:e))},o.ticks=function(e,t){var n=ar(o.domain()),i=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return i&&(e=i[0],t=i[1]),e.range(n[0],Gr(+n[1]+1),1>t?1:t)},o.tickFormat=function(){return n},o.copy=function(){return Yr(e.copy(),t,n)},Ar(o,e)}function Gr(e){return new Date(e)}function Xr(e){return JSON.parse(e.responseText)}function Qr(e){var t=ei.createRange();return t.selectNode(ei.body),t.createContextualFragment(e.responseText)}var Kr={version:"3.4.6"};Date.now||(Date.now=function(){return+new Date});var Jr=[].slice,Zr=function(e){return Jr.call(e)},ei=document,ti=ei.documentElement,ni=window;try{Zr(ti.childNodes)[0].nodeType}catch(e){Zr=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{ei.createElement("div").style.setProperty("opacity",0,"")}catch(e){var oi=ni.Element.prototype,ri=oi.setAttribute,ii=oi.setAttributeNS,ai=ni.CSSStyleDeclaration.prototype,li=ai.setProperty;oi.setAttribute=function(e,t){ri.call(this,e,t+"")},oi.setAttributeNS=function(e,t,n){ii.call(this,e,t,n+"")},ai.setProperty=function(e,t,n){li.call(this,e,t+"",n)}}Kr.ascending=n,Kr.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},Kr.min=function(e,t){var n,o,r=-1,i=e.length;if(1===arguments.length){for(;++r<i&&!(null!=(n=e[r])&&n>=n);)n=void 0;for(;++r<i;)null!=(o=e[r])&&n>o&&(n=o)}else{for(;++r<i&&!(null!=(n=t.call(e,e[r],r))&&n>=n);)n=void 0;for(;++r<i;)null!=(o=t.call(e,e[r],r))&&n>o&&(n=o)}return n},Kr.max=function(e,t){var n,o,r=-1,i=e.length;if(1===arguments.length){for(;++r<i&&!(null!=(n=e[r])&&n>=n);)n=void 0;for(;++r<i;)null!=(o=e[r])&&o>n&&(n=o)}else{for(;++r<i&&!(null!=(n=t.call(e,e[r],r))&&n>=n);)n=void 0;for(;++r<i;)null!=(o=t.call(e,e[r],r))&&o>n&&(n=o)}return n},Kr.extent=function(e,t){var n,o,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a&&!(null!=(n=r=e[i])&&n>=n);)n=r=void 0;for(;++i<a;)null!=(o=e[i])&&(n>o&&(n=o),o>r&&(r=o))}else{for(;++i<a&&!(null!=(n=r=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<a;)null!=(o=t.call(e,e[i],i))&&(n>o&&(n=o),o>r&&(r=o))}return[n,r]},Kr.sum=function(e,t){var n,o=0,r=e.length,i=-1;if(1===arguments.length)for(;++i<r;)isNaN(n=+e[i])||(o+=n);else for(;++i<r;)isNaN(n=+t.call(e,e[i],i))||(o+=n);return o},Kr.mean=function(e,t){var n,o=0,r=e.length,i=-1,a=r;if(1===arguments.length)for(;++i<r;)u(n=e[i])?o+=n:--a;else for(;++i<r;)u(n=t.call(e,e[i],i))?o+=n:--a;return a?o/a:void 0},Kr.quantile=function(e,t){var n=(e.length-1)*t+1,o=Math.floor(n),r=+e[o-1],i=n-o;return i?r+i*(e[o]-r):r},Kr.median=function(e,t){return arguments.length>1&&(e=e.map(t)),(e=e.filter(u)).length?Kr.quantile(e.sort(n),.5):void 0};var si=A(n);Kr.bisectLeft=si.left,Kr.bisect=Kr.bisectRight=si.right,Kr.bisector=function(e){return A(1===e.length?function(t,o){return n(e(t),o)}:e)},Kr.shuffle=function(e){for(var t,n,o=e.length;o;)n=0|Math.random()*o--,t=e[o],e[o]=e[n],e[n]=t;return e},Kr.permute=function(e,t){for(var n=t.length,o=new Array(n);n--;)o[n]=e[t[n]];return o},Kr.pairs=function(e){for(var t=0,n=e.length-1,o=e[0],r=new Array(0>n?0:n);n>t;)r[t]=[o,o=e[++t]];return r},Kr.zip=function(){if(!(o=arguments.length))return[];for(var e=-1,t=Kr.min(arguments,d),n=new Array(t);++e<t;)for(var o,r=-1,i=n[e]=new Array(o);++r<o;)i[r]=arguments[r][e];return n},Kr.transpose=function(e){return Kr.zip.apply(Kr,e)},Kr.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Kr.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Kr.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Kr.merge=function(e){for(var t,n,o,r=e.length,i=-1,a=0;++i<r;)a+=e[i].length;for(n=new Array(a);--r>=0;)for(t=(o=e[r]).length;--t>=0;)n[--a]=o[t];return n};var ci=Math.abs;Kr.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0==(t-e)/n)throw new Error("infinite range");var o,r=[],i=function(e){for(var t=1;e*t%1;)t*=10;return t}(ci(n)),a=-1;if(e*=i,t*=i,0>(n*=i))for(;(o=e+n*++a)>t;)r.push(o/i);else for(;(o=e+n*++a)<t;)r.push(o/i);return r},Kr.map=function(e){var t=new f;if(e instanceof f)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},h(f,{has:p,get:function(e){return this[ui+e]},set:function(e,t){return this[ui+e]=t},remove:function(e){return(e=ui+e)in this&&delete this[e]},keys:g,values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},size:v,empty:m,forEach:function(e){for(var t in this)t.charCodeAt(0)===Ai&&e.call(this,t.substring(1),this[t])}});var ui="\0",Ai=ui.charCodeAt(0);Kr.nest=function(){function e(i,a,l){if(l>=r.length)return n?n.call(o,a):t?a.sort(t):a;for(var s,c,u,A,d=-1,h=a.length,p=r[l++],g=new f;++d<h;)(A=g.get(s=p(c=a[d])))?A.push(c):g.set(s,[c]);return i?(c=i(),u=function(t,n){c.set(t,e(i,n,l))}):(c={},u=function(t,n){c[t]=e(i,n,l)}),g.forEach(u),c}var t,n,o={},r=[],i=[];return o.map=function(t,n){return e(n,t,0)},o.entries=function(t){return function e(t,n){if(n>=r.length)return t;var o=[],a=i[n++];return t.forEach(function(t,r){o.push({key:t,values:e(r,n)})}),a?o.sort(function(e,t){return a(e.key,t.key)}):o}(e(Kr.map,t,0),0)},o.key=function(e){return r.push(e),o},o.sortKeys=function(e){return i[r.length-1]=e,o},o.sortValues=function(e){return t=e,o},o.rollup=function(e){return n=e,o},o},Kr.set=function(e){var t=new b;if(e)for(var n=0,o=e.length;o>n;++n)t.add(e[n]);return t},h(b,{has:p,add:function(e){return this[ui+e]=!0,e},remove:function(e){return(e=ui+e)in this&&delete this[e]},values:g,size:v,empty:m,forEach:function(e){for(var t in this)t.charCodeAt(0)===Ai&&e.call(this,t.substring(1))}}),Kr.behavior={},Kr.rebind=function(e,t){for(var n,o=1,r=arguments.length;++o<r;)e[n=arguments[o]]=_(e,t,t[n]);return e};var di=["webkit","ms","moz","Moz","o","O"];Kr.dispatch=function(){for(var e=new x,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=C(e);return e},x.prototype.on=function(e,t){var n=e.indexOf("."),o="";if(n>=0&&(o=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(o):this[e].on(o,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(o,null);return this}},Kr.event=null,Kr.requote=function(e){return e.replace(hi,"\\$&")};var hi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fi={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},pi=function(e,t){return t.querySelector(e)},gi=function(e,t){return t.querySelectorAll(e)},vi=ti[y(ti,"matchesSelector")],mi=function(e,t){return vi.call(e,t)};"function"==typeof Sizzle&&(pi=function(e,t){return Sizzle(e,t)[0]||null},gi=Sizzle,mi=Sizzle.matchesSelector),Kr.selection=function(){return wi};var bi=Kr.selection.prototype=[];bi.select=function(e){var t,n,o,r,i=[];e=R(e);for(var a=-1,l=this.length;++a<l;){i.push(t=[]),t.parentNode=(o=this[a]).parentNode;for(var s=-1,c=o.length;++s<c;)(r=o[s])?(t.push(n=e.call(r,r.__data__,s,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return E(i)},bi.selectAll=function(e){var t,n,o=[];e=N(e);for(var r=-1,i=this.length;++r<i;)for(var a=this[r],l=-1,s=a.length;++l<s;)(n=a[l])&&(o.push(t=Zr(e.call(n,n.__data__,l,r))),t.parentNode=n);return E(o)};var _i={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Kr.ns={prefix:_i,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),_i.hasOwnProperty(n)?{space:_i[n],local:e}:e}},bi.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=Kr.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(T(t,e[t]));return this}return this.each(T(e,t))},bi.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),o=(e=I(e)).length,r=-1;if(t=n.classList){for(;++r<o;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<o;)if(!L(e[r]).test(t))return!1;return!0}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},bi.style=function(e,t,n){var o=arguments.length;if(3>o){if("string"!=typeof e){for(n in 2>o&&(t=""),e)this.each(H(n,e[n],t));return this}if(2>o)return ni.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(H(e,t,n))},bi.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(F(t,e[t]));return this}return this.each(F(e,t))},bi.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},bi.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},bi.append=function(e){return e=B(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},bi.insert=function(e,t){return e=B(e),t=R(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},bi.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},bi.data=function(e,t){function n(e,n){var o,r,i,a=e.length,u=n.length,A=Math.min(a,u),d=new Array(u),h=new Array(u),p=new Array(a);if(t){var g,v=new f,m=new f,b=[];for(o=-1;++o<a;)g=t.call(r=e[o],r.__data__,o),v.has(g)?p[o]=r:v.set(g,r),b.push(g);for(o=-1;++o<u;)g=t.call(n,i=n[o],o),(r=v.get(g))?(d[o]=r,r.__data__=i):m.has(g)||(h[o]=$(i)),m.set(g,i),v.remove(g);for(o=-1;++o<a;)v.has(b[o])&&(p[o]=e[o])}else{for(o=-1;++o<A;)r=e[o],i=n[o],r?(r.__data__=i,d[o]=r):h[o]=$(i);for(;u>o;++o)h[o]=$(n[o]);for(;a>o;++o)p[o]=e[o]}h.update=d,h.parentNode=d.parentNode=p.parentNode=e.parentNode,l.push(h),s.push(d),c.push(p)}var o,r,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(o=this[0]).length);++i<a;)(r=o[i])&&(e[i]=r.__data__);return e}var l=U([]),s=E([]),c=E([]);if("function"==typeof e)for(;++i<a;)n(o=this[i],e.call(o,o.parentNode.__data__,i));else for(;++i<a;)n(o=this[i],e);return s.enter=function(){return l},s.exit=function(){return c},s},bi.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},bi.filter=function(e){var t,n,o,r=[];"function"!=typeof e&&(e=V(e));for(var i=0,a=this.length;a>i;i++){r.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var l=0,s=n.length;s>l;l++)(o=n[l])&&e.call(o,o.__data__,l,i)&&t.push(o)}return E(r)},bi.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,o=this[e],r=o.length-1,i=o[r];--r>=0;)(n=o[r])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},bi.sort=function(e){e=O.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},bi.each=function(e){return j(this,function(t,n,o){e.call(t,t.__data__,n,o)})},bi.call=function(e){var t=Zr(arguments);return e.apply(t[0]=this,t),this},bi.empty=function(){return!this.node()},bi.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],o=0,r=n.length;r>o;o++){var i=n[o];if(i)return i}return null},bi.size=function(){var e=0;return this.each(function(){++e}),e};var yi=[];Kr.selection.enter=U,Kr.selection.enter.prototype=yi,yi.append=bi.append,yi.empty=bi.empty,yi.node=bi.node,yi.call=bi.call,yi.size=bi.size,yi.select=function(e){for(var t,n,o,r,i,a=[],l=-1,s=this.length;++l<s;){o=(r=this[l]).update,a.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(i=r[c])?(t.push(o[c]=n=e.call(r.parentNode,i.__data__,c,l)),n.__data__=i.__data__):t.push(null)}return E(a)},yi.insert=function(e,t){return arguments.length<2&&(t=function(e){var t,n;return function(o,r,i){var a,l=e[i].update,s=l.length;for(i!=n&&(n=i,t=0),r>=t&&(t=r+1);!(a=l[t])&&++t<s;);return a}}(this)),bi.insert.call(this,e,t)},bi.transition=function(){for(var e,t,n=Sl||++Dl,o=[],r=El||{time:Date.now(),ease:io,delay:0,duration:250},i=-1,a=this.length;++i<a;){o.push(e=[]);for(var l=this[i],s=-1,c=l.length;++s<c;)(t=l[s])&&jr(t,s,n,r),e.push(t)}return $r(o,n)},bi.interrupt=function(){return this.each(W)},Kr.select=function(e){var t=["string"==typeof e?pi(e,ei):e];return t.parentNode=ti,E([t])},Kr.selectAll=function(e){var t=Zr("string"==typeof e?gi(e,ei):e);return t.parentNode=ti,E([t])};var wi=Kr.select(ti);bi.on=function(e,t,n){var o=arguments.length;if(3>o){if("string"!=typeof e){for(n in 2>o&&(t=!1),e)this.each(q(n,e[n],t));return this}if(2>o)return(o=this.node()["__on"+e])&&o._;n=!1}return this.each(q(e,t,n))};var xi=Kr.map({mouseenter:"mouseover",mouseleave:"mouseout"});xi.forEach(function(e){"on"+e in ei&&xi.remove(e)});var Ci="onselectstart"in ei?null:y(ti.style,"userSelect"),ki=0;Kr.mouse=function(e){return Q(e,M())},Kr.touches=function(e,t){return arguments.length<2&&(t=M().touches),t?Zr(t).map(function(t){var n=Q(e,t);return n.identifier=t.identifier,n}):[]},Kr.behavior.drag=function(){function e(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function t(e,t,r,i,a){return function(){var l,s=this,c=Kr.event.target,u=s.parentNode,A=n.of(s,arguments),d=0,h=e(),f=".drag"+(null==h?"":"-"+h),p=Kr.select(r()).on(i+f,function(){var e,n,o=t(u,h);o&&(e=o[0]-v[0],n=o[1]-v[1],d|=e|n,v=o,A({type:"drag",x:o[0]+l[0],y:o[1]+l[1],dx:e,dy:n}))}).on(a+f,function(){t(u,h)&&(p.on(i+f,null).on(a+f,null),g(d&&Kr.event.target===c),A({type:"dragend"}))}),g=X(),v=t(u,h);o?l=[(l=o.apply(s,arguments)).x-v[0],l.y-v[1]]:l=[0,0],A({type:"dragstart"})}}var n=S(e,"drag","dragstart","dragend"),o=null,r=t(w,Kr.mouse,Z,"mousemove","mouseup"),i=t(K,Kr.touch,J,"touchmove","touchend");return e.origin=function(t){return arguments.length?(o=t,e):o},Kr.rebind(e,n,"on")};var Mi=Math.PI,Si=2*Mi,Ei=Mi/2,Ri=1e-6,Ni=Ri*Ri,Ti=Mi/180,Di=180/Mi,Li=Math.SQRT2,Ii=2;Kr.interpolateZoom=function(e,t){function n(e){var t=e*v;if(g){var n=re(p),a=i/(Ii*d)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(Li*t+p)-function(e){return((e=Math.exp(e))-1/e)/2}(p));return[o+a*c,r+a*u,i*n/re(Li*t+p)]}return[o+e*c,r+e*u,i*Math.exp(Li*t)]}var o=e[0],r=e[1],i=e[2],a=t[0],l=t[1],s=t[2],c=a-o,u=l-r,A=c*c+u*u,d=Math.sqrt(A),h=(s*s-i*i+4*A)/(2*i*Ii*d),f=(s*s-i*i-4*A)/(2*s*Ii*d),p=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(f*f+1)-f)-p,v=(g||Math.log(s/i))/Li;return n.duration=1e3*v,n},Kr.behavior.zoom=function(){function e(e){e.on(C,s).on(Hi+".zoom",u).on(M,A).on("dblclick.zoom",d).on(R,c)}function t(e){return[(e[0]-y.x)/y.k,(e[1]-y.y)/y.k]}function n(e){y.k=Math.max(x[0],Math.min(x[1],e))}function o(e,t){t=function(e){return[e[0]*y.k+y.x,e[1]*y.k+y.y]}(t),y.x+=e[0]-t[0],y.y+=e[1]-t[1]}function r(){m&&m.domain(v.range().map(function(e){return(e-y.x)/y.k}).map(v.invert)),_&&_.domain(b.range().map(function(e){return(e-y.y)/y.k}).map(b.invert))}function i(e){e({type:"zoomstart"})}function a(e){r(),e({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function l(e){e({type:"zoomend"})}function s(){var e=this,n=Kr.event.target,r=N.of(e,arguments),s=0,c=Kr.select(ni).on(M,function(){s=1,o(Kr.mouse(e),u),a(r)}).on(E,function(){c.on(M,ni===e?A:null).on(E,null),d(s&&Kr.event.target===n),l(r)}),u=t(Kr.mouse(e)),d=X();W.call(e),i(r)}function c(){function e(){var e=Kr.touches(A);return u=y.k,e.forEach(function(e){e.identifier in h&&(h[e.identifier]=t(e))}),e}function r(){for(var t=Kr.event.changedTouches,r=0,i=t.length;i>r;++r)h[t[r].identifier]=null;var l=e(),s=Date.now();if(1===l.length){if(500>s-g){var c=l[0],u=h[c.identifier];n(2*y.k),o(c,u),k(),a(d)}g=s}else if(l.length>1){c=l[0];var A=l[1],p=c[0]-A[0],v=c[1]-A[1];f=p*p+v*v}}var u,A=this,d=N.of(A,arguments),h={},f=0,p=".zoom-"+Kr.event.changedTouches[0].identifier,v="touchmove"+p,m="touchend"+p,b=Kr.select(Kr.event.target).on(v,function(){for(var e,t,r,i,l=Kr.touches(A),s=0,c=l.length;c>s;++s,i=null)if(r=l[s],i=h[r.identifier]){if(t)break;e=r,t=i}if(i){var p=(p=r[0]-e[0])*p+(p=r[1]-e[1])*p,v=f&&Math.sqrt(p/f);e=[(e[0]+r[0])/2,(e[1]+r[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],n(v*u)}g=null,o(e,t),a(d)}).on(m,function(){if(Kr.event.touches.length){for(var t=Kr.event.changedTouches,n=0,o=t.length;o>n;++n)delete h[t[n].identifier];for(var r in h)return void e()}b.on(p,null),_.on(C,s).on(R,c),w(),l(d)}),_=Kr.select(A).on(C,null).on(R,r),w=X();W.call(A),r(),i(d)}function u(){var e=N.of(this,arguments);p?clearTimeout(p):(W.call(this),i(e)),p=setTimeout(function(){p=null,l(e)},50),k();var r=f||Kr.mouse(this);h||(h=t(r)),n(Math.pow(2,.002*Pi())*y.k),o(r,h),a(e)}function A(){h=null}function d(){var e=N.of(this,arguments),r=Kr.mouse(this),s=t(r),c=Math.log(y.k)/Math.LN2;i(e),n(Math.pow(2,Kr.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)),o(r,s),a(e),l(e)}var h,f,p,g,v,m,b,_,y={x:0,y:0,k:1},w=[960,500],x=zi,C="mousedown.zoom",M="mousemove.zoom",E="mouseup.zoom",R="touchstart.zoom",N=S(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=N.of(this,arguments),t=y;Sl?Kr.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(e)}).tween("zoom:zoom",function(){var n=w[0],o=w[1],r=n/2,i=o/2,l=Kr.interpolateZoom([(r-y.x)/y.k,(i-y.y)/y.k,n/y.k],[(r-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(t){var o=l(t),s=n/o[2];this.__chart__=y={x:r-o[0]*s,y:i-o[1]*s,k:s},a(e)}}).each("end.zoom",function(){l(e)}):(this.__chart__=y,i(e),a(e),l(e))})},e.translate=function(t){return arguments.length?(y={x:+t[0],y:+t[1],k:y.k},r(),e):[y.x,y.y]},e.scale=function(t){return arguments.length?(y={x:y.x,y:y.y,k:+t},r(),e):y.k},e.scaleExtent=function(t){return arguments.length?(x=null==t?zi:[+t[0],+t[1]],e):x},e.center=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],e):f},e.size=function(t){return arguments.length?(w=t&&[+t[0],+t[1]],e):w},e.x=function(t){return arguments.length?(m=t,v=t.copy(),y={x:0,y:0,k:1},e):m},e.y=function(t){return arguments.length?(_=t,b=t.copy(),y={x:0,y:0,k:1},e):_},Kr.rebind(e,N,"on")};var Pi,zi=[0,1/0],Hi="onwheel"in ei?(Pi=function(){return-Kr.event.deltaY*(Kr.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ei?(Pi=function(){return Kr.event.wheelDelta},"mousewheel"):(Pi=function(){return-Kr.event.detail},"MozMousePixelScroll");ae.prototype.toString=function(){return this.rgb()+""},Kr.hsl=function(e,t,n){return 1===arguments.length?e instanceof se?le(e.h,e.s,e.l):ke(""+e,Me,le):le(+e,+t,+n)};var Fi=se.prototype=new ae;Fi.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),le(this.h,this.s,this.l/e)},Fi.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),le(this.h,this.s,e*this.l)},Fi.rgb=function(){return ce(this.h,this.s,this.l)},Kr.hcl=function(e,t,n){return 1===arguments.length?e instanceof Ae?ue(e.h,e.c,e.l):ge(e instanceof fe?e.l:(e=Se((e=Kr.rgb(e)).r,e.g,e.b)).l,e.a,e.b):ue(+e,+t,+n)};var Bi=Ae.prototype=new ae;Bi.brighter=function(e){return ue(this.h,this.c,Math.min(100,this.l+$i*(arguments.length?e:1)))},Bi.darker=function(e){return ue(this.h,this.c,Math.max(0,this.l-$i*(arguments.length?e:1)))},Bi.rgb=function(){return de(this.h,this.c,this.l).rgb()},Kr.lab=function(e,t,n){return 1===arguments.length?e instanceof fe?he(e.l,e.a,e.b):e instanceof Ae?de(e.l,e.c,e.h):Se((e=Kr.rgb(e)).r,e.g,e.b):he(+e,+t,+n)};var $i=18,Vi=.95047,Oi=1,ji=1.08883,Ui=fe.prototype=new ae;Ui.brighter=function(e){return he(Math.min(100,this.l+$i*(arguments.length?e:1)),this.a,this.b)},Ui.darker=function(e){return he(Math.max(0,this.l-$i*(arguments.length?e:1)),this.a,this.b)},Ui.rgb=function(){return pe(this.l,this.a,this.b)},Kr.rgb=function(e,t,n){return 1===arguments.length?e instanceof xe?we(e.r,e.g,e.b):ke(""+e,we,ce):we(~~e,~~t,~~n)};var Wi=xe.prototype=new ae;Wi.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,o=this.b,r=30;return t||n||o?(t&&r>t&&(t=r),n&&r>n&&(n=r),o&&r>o&&(o=r),we(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(o/e)))):we(r,r,r)},Wi.darker=function(e){return we(~~((e=Math.pow(.7,arguments.length?e:1))*this.r),~~(e*this.g),~~(e*this.b))},Wi.hsl=function(){return Me(this.r,this.g,this.b)},Wi.toString=function(){return"#"+Ce(this.r)+Ce(this.g)+Ce(this.b)};var qi=Kr.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});qi.forEach(function(e,t){qi.set(e,_e(t))}),Kr.functor=Ne,Kr.xhr=De(Te),Kr.dsv=function(e,t){function n(e,n,i){arguments.length<3&&(i=n,n=null);var a=Le(e,t,null==n?o:r(n),i);return a.row=function(e){return arguments.length?a.response(null==(n=e)?o:r(e)):n},a}function o(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function i(t){return t.map(a).join(e)}function a(e){return l.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var l=new RegExp('["'+e+"\n]"),c=e.charCodeAt(0);return n.parse=function(e,t){var o;return n.parseRows(e,function(e,n){if(o)return o(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return(0,s.default)(e)+": d["+t+"]"}).join(",")+"}");o=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(u>=s)return a;if(r)return r=!1,i;var t=u;if(34===e.charCodeAt(t)){for(var n=t;n++<s;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return u=n+2,13===(o=e.charCodeAt(n+1))?(r=!0,10===e.charCodeAt(n+2)&&++u):10===o&&(r=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;s>u;){var o,l=1;if(10===(o=e.charCodeAt(u++)))r=!0;else if(13===o)r=!0,10===e.charCodeAt(u)&&(++u,++l);else if(o!==c)continue;return e.substring(t,u-l)}return e.substring(t)}for(var o,r,i={},a={},l=[],s=e.length,u=0,A=0;(o=n())!==a;){for(var d=[];o!==i&&o!==a;)d.push(o),o=n();(!t||(d=t(d,A++)))&&l.push(d)}return l},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var o=new b,r=[];return t.forEach(function(e){for(var t in e)o.has(t)||r.push(o.add(t))}),[r.map(a).join(e)].concat(t.map(function(t){return r.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(i).join("\n")},n},Kr.csv=Kr.dsv(",","text/csv"),Kr.tsv=Kr.dsv("\t","text/tab-separated-values"),Kr.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=M().changedTouches),t)for(var o,r=0,i=t.length;i>r;++r)if((o=t[r]).identifier===n)return Q(e,o)};var Yi,Gi,Xi,Qi,Ki,Ji=ni[y(ni,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Kr.timer=function(e,t,n){var o=arguments.length;2>o&&(t=0),3>o&&(n=Date.now());var r={c:e,t:n+t,f:!1,n:null};Gi?Gi.n=r:Yi=r,Gi=r,Xi||(Qi=clearTimeout(Qi),Xi=1,Ji(Ie))},Kr.timer.flush=function(){Pe(),ze()},Kr.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Zi=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*ci(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});Kr.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Kr.round(e,He(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Zi[8+n/3]};var ea=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ta=Kr.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Kr.round(e,He(e,t))).toFixed(Math.max(0,Math.min(20,He(e*(1+1e-15),t))))}}),na=Kr.time={},oa=Date;Be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ra.setUTCDate.apply(this._,arguments)},setDay:function(){ra.setUTCDay.apply(this._,arguments)},setFullYear:function(){ra.setUTCFullYear.apply(this._,arguments)},setHours:function(){ra.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ra.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ra.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ra.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ra.setUTCSeconds.apply(this._,arguments)},setTime:function(){ra.setTime.apply(this._,arguments)}};var ra=Date.prototype;na.year=$e(function(e){return(e=na.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),na.years=na.year.range,na.years.utc=na.year.utc.range,na.day=$e(function(e){var t=new oa(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),na.days=na.day.range,na.days.utc=na.day.utc.range,na.dayOfYear=function(e){var t=na.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=na[e]=$e(function(e){return(e=na.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=na.year(e).getDay();return Math.floor((na.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});na[e+"s"]=n.range,na[e+"s"].utc=n.utc.range,na[e+"OfYear"]=function(e){var n=na.year(e).getDay();return Math.floor((na.dayOfYear(e)+(n+t)%7)/7)}}),na.week=na.sunday,na.weeks=na.sunday.range,na.weeks.utc=na.sunday.utc.range,na.weekOfYear=na.sundayOfYear;var ia={"-":"",_:" ",0:"0"},aa=/^\s*\d+/,la=/^%/;Kr.locale=function(e){return{numberFormat:function(e){var t=e.decimal,n=e.thousands,o=e.grouping,r=e.currency,i=o?function(e){for(var t=e.length,r=[],i=0,a=o[0];t>0&&a>0;)r.push(e.substring(t-=a,t+a)),a=o[i=(i+1)%o.length];return r.reverse().join(n)}:Te;return function(e){var n=ea.exec(e),o=n[1]||" ",a=n[2]||">",l=n[3]||"",s=n[4]||"",c=n[5],u=+n[6],A=n[7],d=n[8],h=n[9],f=1,p="",g="",v=!1;switch(d&&(d=+d.substring(1)),(c||"0"===o&&"="===a)&&(c=o="0",a="=",A&&(u-=Math.floor((u-1)/4))),h){case"n":A=!0,h="g";break;case"%":f=100,g="%",h="f";break;case"p":f=100,g="%",h="r";break;case"b":case"o":case"x":case"X":"#"===s&&(p="0"+h.toLowerCase());case"c":case"d":v=!0,d=0;break;case"s":f=-1,h="r"}"$"===s&&(p=r[0],g=r[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=ta.get(h)||Fe;var m=c&&A;return function(e){var n=g;if(v&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):l;if(0>f){var s=Kr.formatPrefix(e,d);e=s.scale(e),n=s.symbol+g}else e*=f;var b=(e=h(e,d)).lastIndexOf("."),_=0>b?e:e.substring(0,b),y=0>b?"":t+e.substring(b+1);!c&&A&&(_=i(_));var w=p.length+_.length+y.length+(m?0:r.length),x=u>w?new Array(w=u-w+1).join(o):"";return m&&(_=i(x+_)),r+=p,e=_+y,("<"===a?r+e+x:">"===a?x+r+e:"^"===a?x.substring(0,w>>=1)+r+e+x.substring(w):r+(m?e:x+e))+n}}}(e),timeFormat:function(e){function t(e){function t(t){for(var n,r,i,a=[],l=-1,s=0;++l<o;)37===e.charCodeAt(l)&&(a.push(e.substring(s,l)),null!=(r=ia[n=e.charAt(++l)])&&(n=e.charAt(++l)),(i=_[n])&&(n=i(t,null==r?"e"===n?" ":"0":r)),a.push(n),s=l+1);return a.push(e.substring(s,l)),a.join("")}var o=e.length;return t.parse=function(t){var o={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(o,e,t,0)!=t.length)return null;"p"in o&&(o.H=o.H%12+12*o.p);var r=null!=o.Z&&oa!==Be,i=new(r?Be:oa);return"j"in o?i.setFullYear(o.y,0,o.j):"w"in o&&("W"in o||"U"in o)?(i.setFullYear(o.y,0,1),i.setFullYear(o.y,0,"W"in o?(o.w+6)%7+7*o.W-(i.getDay()+5)%7:o.w+7*o.U-(i.getDay()+6)%7)):i.setFullYear(o.y,o.m,o.d),i.setHours(o.H+Math.floor(o.Z/100),o.M+o.Z%100,o.S,o.L),r?i._:i},t.toString=function(){return e},t}function n(e,t,n,o){for(var r,i,a,l=0,s=t.length,c=n.length;s>l;){if(o>=c)return-1;if(37===(r=t.charCodeAt(l++))){if(a=t.charAt(l++),!(i=y[a in ia?t.charAt(l++):a])||(o=i(e,n,o))<0)return-1}else if(r!=n.charCodeAt(o++))return-1}return o}var o=e.dateTime,r=e.date,i=e.time,a=e.periods,l=e.days,s=e.shortDays,c=e.months,u=e.shortMonths;t.utc=function(e){function n(e){try{var t=new(oa=Be);return t._=e,o(t)}finally{oa=Date}}var o=t(e);return n.parse=function(e){try{oa=Be;var t=o.parse(e);return t&&t._}finally{oa=Date}},n.toString=o.toString,n},t.multi=t.utc.multi=at;var A=Kr.map(),d=je(l),h=Ue(l),f=je(s),p=Ue(s),g=je(c),v=Ue(c),m=je(u),b=Ue(u);a.forEach(function(e,t){A.set(e.toLowerCase(),t)});var _={a:function(e){return s[e.getDay()]},A:function(e){return l[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:t(o),d:function(e,t){return Oe(e.getDate(),t,2)},e:function(e,t){return Oe(e.getDate(),t,2)},H:function(e,t){return Oe(e.getHours(),t,2)},I:function(e,t){return Oe(e.getHours()%12||12,t,2)},j:function(e,t){return Oe(1+na.dayOfYear(e),t,3)},L:function(e,t){return Oe(e.getMilliseconds(),t,3)},m:function(e,t){return Oe(e.getMonth()+1,t,2)},M:function(e,t){return Oe(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return Oe(e.getSeconds(),t,2)},U:function(e,t){return Oe(na.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Oe(na.mondayOfYear(e),t,2)},x:t(r),X:t(i),y:function(e,t){return Oe(e.getFullYear()%100,t,2)},Y:function(e,t){return Oe(e.getFullYear()%1e4,t,4)},Z:rt,"%":function(){return"%"}},y={a:function(e,t,n){f.lastIndex=0;var o=f.exec(t.substring(n));return o?(e.w=p.get(o[0].toLowerCase()),n+o[0].length):-1},A:function(e,t,n){d.lastIndex=0;var o=d.exec(t.substring(n));return o?(e.w=h.get(o[0].toLowerCase()),n+o[0].length):-1},b:function(e,t,n){m.lastIndex=0;var o=m.exec(t.substring(n));return o?(e.m=b.get(o[0].toLowerCase()),n+o[0].length):-1},B:function(e,t,n){g.lastIndex=0;var o=g.exec(t.substring(n));return o?(e.m=v.get(o[0].toLowerCase()),n+o[0].length):-1},c:function(e,t,o){return n(e,_.c.toString(),t,o)},d:Je,e:Je,H:et,I:et,j:Ze,L:ot,m:Ke,M:tt,p:function(e,t,n){var o=A.get(t.substring(n,n+=2).toLowerCase());return null==o?-1:(e.p=o,n)},S:nt,U:qe,w:We,W:Ye,x:function(e,t,o){return n(e,_.x.toString(),t,o)},X:function(e,t,o){return n(e,_.X.toString(),t,o)},y:Xe,Y:Ge,Z:Qe,"%":it};return t}(e)}};var sa=Kr.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Kr.format=sa.numberFormat,Kr.geo={},lt.prototype={s:0,t:0,add:function(e){st(e,this.t,ca),st(ca.s,this.s,this),this.s?this.t+=ca.t:this.s=ca.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ca=new lt;Kr.geo.stream=function(e,t){e&&ua.hasOwnProperty(e.type)?ua[e.type](e,t):ct(e,t)};var ua={Feature:function(e,t){ct(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,o=-1,r=n.length;++o<r;)ct(n[o].geometry,t)}},Aa={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,o=-1,r=n.length;++o<r;)e=n[o],t.point(e[0],e[1],e[2])},LineString:function(e,t){ut(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,o=-1,r=n.length;++o<r;)ut(n[o],t,0)},Polygon:function(e,t){At(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,o=-1,r=n.length;++o<r;)At(n[o],t)},GeometryCollection:function(e,t){for(var n=e.geometries,o=-1,r=n.length;++o<r;)ct(n[o],t)}};Kr.geo.area=function(e){return da=0,Kr.geo.stream(e,fa),da};var da,ha=new lt,fa={sphere:function(){da+=4*Mi},point:w,lineStart:w,lineEnd:w,polygonStart:function(){ha.reset(),fa.lineStart=dt},polygonEnd:function(){var e=2*ha;da+=0>e?4*Mi+e:e,fa.lineStart=fa.lineEnd=fa.point=w}};Kr.geo.bounds=function(){function e(e,t){b.push(_=[u=e,d=e]),A>t&&(A=t),t>h&&(h=t)}function t(t,n){var o=ht([t*Ti,n*Ti]);if(v){var r=pt(v,o),i=pt([r[1],-r[0],0],r);mt(i),i=bt(i);var a=t-f,s=a>0?1:-1,c=i[0]*Di*s,p=ci(a)>180;if(p^(c>s*f&&s*t>c))(g=i[1]*Di)>h&&(h=g);else if(p^((c=(c+360)%360-180)>s*f&&s*t>c)){var g=-i[1]*Di;A>g&&(A=g)}else A>n&&(A=n),n>h&&(h=n);p?f>t?l(u,t)>l(u,d)&&(d=t):l(t,d)>l(u,d)&&(u=t):d>=u?(u>t&&(u=t),t>d&&(d=t)):t>f?l(u,t)>l(u,d)&&(d=t):l(t,d)>l(u,d)&&(u=t)}else e(t,n);v=o,f=t}function n(){y.point=t}function o(){_[0]=u,_[1]=d,y.point=e,v=null}function r(e,n){if(v){var o=e-f;m+=ci(o)>180?o+(o>0?360:-360):o}else p=e,g=n;fa.point(e,n),t(e,n)}function i(){fa.lineStart()}function a(){r(p,g),fa.lineEnd(),ci(m)>Ri&&(u=-(d=180)),_[0]=u,_[1]=d,v=null}function l(e,t){return(t-=e)<0?t+360:t}function s(e,t){return e[0]-t[0]}function c(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var u,A,d,h,f,p,g,v,m,b,_,y={point:e,lineStart:n,lineEnd:o,polygonStart:function(){y.point=r,y.lineStart=i,y.lineEnd=a,m=0,fa.polygonStart()},polygonEnd:function(){fa.polygonEnd(),y.point=e,y.lineStart=n,y.lineEnd=o,0>ha?(u=-(d=180),A=-(h=90)):m>Ri?h=90:-Ri>m&&(A=-90),_[0]=u,_[1]=d}};return function(e){if(h=d=-(u=A=1/0),b=[],Kr.geo.stream(e,y),i=b.length){b.sort(s);for(var t=1,n=[f=b[0]];i>t;++t)c((r=b[t])[0],f)||c(r[1],f)?(l(f[0],r[1])>l(f[0],f[1])&&(f[1]=r[1]),l(r[0],f[1])>l(f[0],f[1])&&(f[0]=r[0])):n.push(f=r);for(var o,r,i,a=-1/0,f=(t=0,n[i=n.length-1]);i>=t;f=r,++t)r=n[t],(o=l(f[1],r[0]))>a&&(a=o,u=r[0],d=f[1])}return b=_=null,1/0===u||1/0===A?[[NaN,NaN],[NaN,NaN]]:[[u,A],[d,h]]}}(),Kr.geo.centroid=function(e){pa=ga=va=ma=ba=_a=ya=wa=xa=Ca=ka=0,Kr.geo.stream(e,Ma);var t=xa,n=Ca,o=ka,r=t*t+n*n+o*o;return Ni>r&&(t=_a,n=ya,o=wa,Ri>ga&&(t=va,n=ma,o=ba),Ni>(r=t*t+n*n+o*o))?[NaN,NaN]:[Math.atan2(n,t)*Di,oe(o/Math.sqrt(r))*Di]};var pa,ga,va,ma,ba,_a,ya,wa,xa,Ca,ka,Ma={sphere:w,point:yt,lineStart:xt,lineEnd:Ct,polygonStart:function(){Ma.lineStart=kt},polygonEnd:function(){Ma.lineStart=xt}},Sa=Nt(Mt,function(e){var t,n=NaN,o=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,a){var l=i>0?Mi:-Mi,s=ci(i-n);ci(s-Mi)<Ri?(e.point(n,o=(o+a)/2>0?Ei:-Ei),e.point(r,o),e.lineEnd(),e.lineStart(),e.point(l,o),e.point(i,o),t=0):r!==l&&s>=Mi&&(ci(n-r)<Ri&&(n-=r*Ri),ci(i-l)<Ri&&(i-=l*Ri),o=function(e,t,n,o){var r,i,a=Math.sin(e-n);return ci(a)>Ri?Math.atan((Math.sin(t)*(i=Math.cos(o))*Math.sin(n)-Math.sin(o)*(r=Math.cos(t))*Math.sin(e))/(r*i*a)):(t+o)/2}(n,o,i,a),e.point(r,o),e.lineEnd(),e.lineStart(),e.point(l,o),t=0),e.point(n=i,o=a),r=l},lineEnd:function(){e.lineEnd(),n=o=NaN},clean:function(){return 2-t}}},function(e,t,n,o){var r;if(null==e)r=n*Ei,o.point(-Mi,r),o.point(0,r),o.point(Mi,r),o.point(Mi,0),o.point(Mi,-r),o.point(0,-r),o.point(-Mi,-r),o.point(-Mi,0),o.point(-Mi,r);else if(ci(e[0]-t[0])>Ri){var i=e[0]<t[0]?Mi:-Mi;r=n*i/2,o.point(-i,r),o.point(0,r),o.point(i,r)}else o.point(t[0],t[1])},[-Mi,-Mi/2]),Ea=1e9;Kr.geo.clipExtent=function(){var e,t,n,o,r,i,a={stream:function(e){return r&&(r.valid=!1),(r=i(e)).valid=!0,r},extent:function(l){return arguments.length?(i=Pt(e=+l[0][0],t=+l[0][1],n=+l[1][0],o=+l[1][1]),r&&(r.valid=!1,r=null),a):[[e,t],[n,o]]}};return a.extent([[0,0],[960,500]])},(Kr.geo.conicEqualArea=function(){return Ht(Ft)}).raw=Ft,Kr.geo.albers=function(){return Kr.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Kr.geo.albersUsa=function(){function e(e){var i=e[0],a=e[1];return t=null,n(i,a),t||(o(i,a),t)||r(i,a),t}var t,n,o,r,i=Kr.geo.albers(),a=Kr.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Kr.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=i.scale(),n=i.translate(),o=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&o>=-.425&&-.214>o?a:r>=.166&&.234>r&&o>=-.214&&-.115>o?l:i).invert(e)},e.stream=function(e){var t=i.stream(e),n=a.stream(e),o=l.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),o.point(e,r)},sphere:function(){t.sphere(),n.sphere(),o.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),o.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),o.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),o.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),o.polygonEnd()}}},e.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),l.precision(t),e):i.precision()},e.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),l.scale(t),e.translate(i.translate())):i.scale()},e.translate=function(t){if(!arguments.length)return i.translate();var c=i.scale(),u=+t[0],A=+t[1];return n=i.translate(t).clipExtent([[u-.455*c,A-.238*c],[u+.455*c,A+.238*c]]).stream(s).point,o=a.translate([u-.307*c,A+.201*c]).clipExtent([[u-.425*c+Ri,A+.12*c+Ri],[u-.214*c-Ri,A+.234*c-Ri]]).stream(s).point,r=l.translate([u-.205*c,A+.212*c]).clipExtent([[u-.214*c+Ri,A+.166*c+Ri],[u-.115*c-Ri,A+.234*c-Ri]]).stream(s).point,e},e.scale(1070)};var Ra,Na,Ta,Da,La,Ia,Pa={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Na=0,Pa.lineStart=Bt},polygonEnd:function(){Pa.lineStart=Pa.lineEnd=Pa.point=w,Ra+=ci(Na/2)}},za={point:function(e,t){Ta>e&&(Ta=e),e>La&&(La=e),Da>t&&(Da=t),t>Ia&&(Ia=t)},lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Ha={point:Vt,lineStart:Ot,lineEnd:jt,polygonStart:function(){Ha.lineStart=Ut},polygonEnd:function(){Ha.point=Vt,Ha.lineStart=Ot,Ha.lineEnd=jt}};Kr.geo.path=function(){function e(e){return e&&("function"==typeof l&&i.pointRadius(+l.apply(this,arguments)),a&&a.valid||(a=r(i)),Kr.geo.stream(e,a)),i.result()}function t(){return a=null,e}var n,o,r,i,a,l=4.5;return e.area=function(e){return Ra=0,Kr.geo.stream(e,r(Pa)),Ra},e.centroid=function(e){return va=ma=ba=_a=ya=wa=xa=Ca=ka=0,Kr.geo.stream(e,r(Ha)),ka?[xa/ka,Ca/ka]:wa?[_a/wa,ya/wa]:ba?[va/ba,ma/ba]:[NaN,NaN]},e.bounds=function(e){return La=Ia=-(Ta=Da=1/0),Kr.geo.stream(e,r(za)),[[Ta,Da],[La,Ia]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||function(e){var t=Wt(function(t,n){return e([t*Di,n*Di])});return function(e){return Qt(t(e))}}(e):Te,t()):n},e.context=function(e){return arguments.length?(i=null==(o=e)?new function(){function e(e,t){a.push("M",e,",",t,i)}function t(e,t){a.push("M",e,",",t),l.point=n}function n(e,t){a.push("L",e,",",t)}function o(){l.point=e}function r(){a.push("Z")}var i=$t(4.5),a=[],l={point:e,lineStart:function(){l.point=t},lineEnd:o,polygonStart:function(){l.lineEnd=r},polygonEnd:function(){l.lineEnd=o,l.point=e},pointRadius:function(e){return i=$t(e),l},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return l}:new function(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,a,0,Si)}function n(t,n){e.moveTo(t,n),l.point=o}function o(t,n){e.lineTo(t,n)}function r(){l.point=t}function i(){e.closePath()}var a=4.5,l={point:t,lineStart:function(){l.point=n},lineEnd:r,polygonStart:function(){l.lineEnd=i},polygonEnd:function(){l.lineEnd=r,l.point=t},pointRadius:function(e){return a=e,l},result:w};return l}(e),"function"!=typeof l&&i.pointRadius(l),t()):o},e.pointRadius=function(t){return arguments.length?(l="function"==typeof t?t:(i.pointRadius(+t),+t),e):l},e.projection(Kr.geo.albersUsa()).context(null)},Kr.geo.transform=function(e){return{stream:function(t){var n=new qt(t);for(var o in e)n[o]=e[o];return n}}},qt.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Kr.geo.projection=Gt,Kr.geo.projectionMutator=Xt,(Kr.geo.equirectangular=function(){return Gt(Kt)}).raw=Kt.invert=Kt,Kr.geo.rotation=function(e){function t(t){return(t=e(t[0]*Ti,t[1]*Ti))[0]*=Di,t[1]*=Di,t}return e=Zt(e[0]%360*Ti,e[1]*Ti,e.length>2?e[2]*Ti:0),t.invert=function(t){return(t=e.invert(t[0]*Ti,t[1]*Ti))[0]*=Di,t[1]*=Di,t},t},Jt.invert=Kt,Kr.geo.circle=function(){function e(){var e="function"==typeof o?o.apply(this,arguments):o,t=Zt(-e[0]*Ti,-e[1]*Ti,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=Di,e[1]*=Di}}),{type:"Polygon",coordinates:[r]}}var t,n,o=[0,0],r=6;return e.origin=function(t){return arguments.length?(o=t,e):o},e.angle=function(o){return arguments.length?(n=on((t=+o)*Ti,r*Ti),e):t},e.precision=function(o){return arguments.length?(n=on(t*Ti,(r=+o)*Ti),e):r},e.angle(90)},Kr.geo.distance=function(e,t){var n,o=(t[0]-e[0])*Ti,r=e[1]*Ti,i=t[1]*Ti,a=Math.sin(o),l=Math.cos(o),s=Math.sin(r),c=Math.cos(r),u=Math.sin(i),A=Math.cos(i);return Math.atan2(Math.sqrt((n=A*a)*n+(n=c*u-s*A*l)*n),s*u+c*A*l)},Kr.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Kr.range(Math.ceil(i/g)*g,r,g).map(d).concat(Kr.range(Math.ceil(c/v)*v,s,v).map(h)).concat(Kr.range(Math.ceil(o/f)*f,n,f).filter(function(e){return ci(e%g)>Ri}).map(u)).concat(Kr.range(Math.ceil(l/p)*p,a,p).filter(function(e){return ci(e%v)>Ri}).map(A))}var n,o,r,i,a,l,s,c,u,A,d,h,f=10,p=f,g=90,v=360,m=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(s).slice(1),d(r).reverse().slice(1),h(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],c=+t[0][1],s=+t[1][1],i>r&&(t=i,i=r,r=t),c>s&&(t=c,c=s,s=t),e.precision(m)):[[i,c],[r,s]]},e.minorExtent=function(t){return arguments.length?(o=+t[0][0],n=+t[1][0],l=+t[0][1],a=+t[1][1],o>n&&(t=o,o=n,n=t),l>a&&(t=l,l=a,a=t),e.precision(m)):[[o,l],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],e):[f,p]},e.precision=function(t){return arguments.length?(m=+t,u=an(l,a,90),A=ln(o,n,m),d=an(c,s,90),h=ln(i,r,m),e):m},e.majorExtent([[-180,-90+Ri],[180,90-Ri]]).minorExtent([[-180,-80-Ri],[180,80+Ri]])},Kr.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||o.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,o=sn,r=cn;return e.distance=function(){return Kr.geo.distance(t||o.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(o=n,t="function"==typeof n?null:n,e):o},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},Kr.geo.interpolate=function(e,t){return function(e,t,n,o){var r=Math.cos(t),i=Math.sin(t),a=Math.cos(o),l=Math.sin(o),s=r*Math.cos(e),c=r*Math.sin(e),u=a*Math.cos(n),A=a*Math.sin(n),d=2*Math.asin(Math.sqrt(ie(o-t)+r*a*ie(n-e))),h=1/Math.sin(d),f=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,o=n*s+t*u,r=n*c+t*A,a=n*i+t*l;return[Math.atan2(r,o)*Di,Math.atan2(a,Math.sqrt(o*o+r*r))*Di]}:function(){return[e*Di,t*Di]};return f.distance=d,f}(e[0]*Ti,e[1]*Ti,t[0]*Ti,t[1]*Ti)},Kr.geo.length=function(e){return Fa=0,Kr.geo.stream(e,Ba),Fa};var Fa,Ba={sphere:w,point:w,lineStart:function(){function e(e,r){var i=Math.sin(r*=Ti),a=Math.cos(r),l=ci((e*=Ti)-t),s=Math.cos(l);Fa+=Math.atan2(Math.sqrt((l=a*Math.sin(l))*l+(l=o*i-n*a*s)*l),n*i+o*a*s),t=e,n=i,o=a}var t,n,o;Ba.point=function(r,i){t=r*Ti,n=Math.sin(i*=Ti),o=Math.cos(i),Ba.point=e},Ba.lineEnd=function(){Ba.point=Ba.lineEnd=w}},lineEnd:w,polygonStart:w,polygonEnd:w},$a=un(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(Kr.geo.azimuthalEqualArea=function(){return Gt($a)}).raw=$a;var Va=un(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},Te);(Kr.geo.azimuthalEquidistant=function(){return Gt(Va)}).raw=Va,(Kr.geo.conicConformal=function(){return Ht(An)}).raw=An,(Kr.geo.conicEquidistant=function(){return Ht(dn)}).raw=dn;var Oa=un(function(e){return 1/e},Math.atan);(Kr.geo.gnomonic=function(){return Gt(Oa)}).raw=Oa,hn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ei]},(Kr.geo.mercator=function(){return fn(hn)}).raw=hn;var ja=un(function(){return 1},Math.asin);(Kr.geo.orthographic=function(){return Gt(ja)}).raw=ja;var Ua=un(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(Kr.geo.stereographic=function(){return Gt(Ua)}).raw=Ua,pn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ei]},(Kr.geo.transverseMercator=function(){var e=fn(pn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[-(e=t())[1],e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},e.rotate([0,0])}).raw=pn,Kr.geom={},Kr.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=Ne(n),i=Ne(o),a=e.length,l=[],s=[];for(t=0;a>t;t++)l.push([+r.call(this,e[t],t),+i.call(this,e[t],t),t]);for(l.sort(bn),t=0;a>t;t++)s.push([l[t][0],-l[t][1]]);var c=mn(l),u=mn(s),A=u[0]===c[0],d=u[u.length-1]===c[c.length-1],h=[];for(t=c.length-1;t>=0;--t)h.push(e[l[c[t]][2]]);for(t=+A;t<u.length-d;++t)h.push(e[l[u[t]][2]]);return h}var n=gn,o=vn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(o=e,t):o},t)},Kr.geom.polygon=function(e){return fi(e,Wa),e};var Wa=Kr.geom.polygon.prototype=[];Wa.area=function(){for(var e,t=-1,n=this.length,o=this[n-1],r=0;++t<n;)e=o,o=this[t],r+=e[1]*o[0]-e[0]*o[1];return.5*r},Wa.centroid=function(e){var t,n,o=-1,r=this.length,i=0,a=0,l=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++o<r;)t=l,l=this[o],n=t[0]*l[1]-l[0]*t[1],i+=(t[0]+l[0])*n,a+=(t[1]+l[1])*n;return[i*e,a*e]},Wa.clip=function(e){for(var t,n,o,r,i,a,l=wn(e),s=-1,c=this.length-wn(this),u=this[c-1];++s<c;){for(t=e.slice(),e.length=0,r=this[s],i=t[(o=t.length-l)-1],n=-1;++n<o;)_n(a=t[n],u,r)?(_n(i,u,r)||e.push(yn(i,a,u,r)),e.push(a)):_n(i,u,r)&&e.push(yn(i,a,u,r)),i=a;l&&e.push(e[0]),u=r}return e};var qa,Ya,Ga,Xa,Qa,Ka=[],Ja=[];Rn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Nn),t.length},Fn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Bn.prototype={insert:function(e,t){var n,o,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=jn(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(o=n.U).L?(r=o.R)&&r.C?(n.C=r.C=!1,o.C=!0,e=o):(e===n.R&&(Vn(this,n),n=(e=n).U),n.C=!1,o.C=!0,On(this,o)):(r=o.L)&&r.C?(n.C=r.C=!1,o.C=!0,e=o):(e===n.L&&(On(this,n),n=(e=n).U),n.C=!1,o.C=!0,Vn(this,o)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,o,r=e.U,i=e.L,a=e.R;if(n=i?a?jn(a):i:a,r?r.L===e?r.L=n:r.R=n:this._=n,i&&a?(o=n.C,n.C=e.C,n.L=i,i.U=n,n!==a?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=a,a.U=n):(n.U=r,r=n,e=n.R)):(o=e.C,e=n),e&&(e.U=r),!o){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Vn(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,On(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Vn(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,On(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Vn(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,On(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},Kr.geom.voronoi=function(e){function t(e){var t=new Array(e.length),o=l[0][0],r=l[0][1],i=l[1][0],a=l[1][1];return Un(n(e),l).cells.forEach(function(n,l){var s=n.edges,c=n.site;(t[l]=s.length?s.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=o&&c.x<=i&&c.y>=r&&c.y<=a?[[o,a],[i,a],[i,r],[o,r]]:[]).point=e[l]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(i(e,t)/Ri)*Ri,y:Math.round(a(e,t)/Ri)*Ri,i:t}})}var o=gn,r=vn,i=o,a=r,l=Za;return e?t(e):(t.links=function(e){return Un(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return Un(n(e)).cells.forEach(function(n,o){for(var r,i=n.site,a=n.edges.sort(Nn),l=-1,s=a.length,c=a[s-1].edge,u=c.l===i?c.r:c.l;++l<s;)c,r=u,u=(c=a[l].edge).l===i?c.r:c.l,o<r.i&&o<u.i&&qn(i,r,u)<0&&t.push([e[o],e[r.i],e[u.i]])}),t},t.x=function(e){return arguments.length?(i=Ne(o=e),t):o},t.y=function(e){return arguments.length?(a=Ne(r=e),t):r},t.clipExtent=function(e){return arguments.length?(l=null==e?Za:e,t):l===Za?null:l},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):l===Za?null:l&&l[1]},t)};var Za=[[-1e6,-1e6],[1e6,1e6]];Kr.geom.delaunay=function(e){return Kr.geom.voronoi().triangles(e)},Kr.geom.quadtree=function(e,t,n,o,r){function i(e){function i(e,t,n,o,r,i,a,l){if(!isNaN(n)&&!isNaN(o))if(e.leaf){var s=e.x,u=e.y;if(null!=s)if(ci(s-n)+ci(u-o)<.01)c(e,t,n,o,r,i,a,l);else{var A=e.point;e.x=e.y=e.point=null,c(e,A,s,u,r,i,a,l),c(e,t,n,o,r,i,a,l)}else e.x=n,e.y=o,e.point=t}else c(e,t,n,o,r,i,a,l)}function c(e,t,n,o,r,a,l,s){var c=.5*(r+l),u=.5*(a+s),A=n>=c,d=o>=u,h=(d<<1)+A;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){i(k,e,+b(e,++h),+_(e,h),p,g,v,m)}}),A?r=c:l=c,d?a=u:s=u,i(e,t,n,o,r,a,l,s)}var u,A,d,h,f,p,g,v,m,b=Ne(l),_=Ne(s);if(null!=t)p=t,g=n,v=o,m=r;else if(v=m=-(p=g=1/0),A=[],d=[],f=e.length,a)for(h=0;f>h;++h)(u=e[h]).x<p&&(p=u.x),u.y<g&&(g=u.y),u.x>v&&(v=u.x),u.y>m&&(m=u.y),A.push(u.x),d.push(u.y);else for(h=0;f>h;++h){var y=+b(u=e[h],h),w=+_(u,h);p>y&&(p=y),g>w&&(g=w),y>v&&(v=y),w>m&&(m=w),A.push(y),d.push(w)}var x=v-p,C=m-g;x>C?m=g+x:v=p+C;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){i(k,e,+b(e,++h),+_(e,h),p,g,v,m)}};if(k.visit=function(e){!function e(t,n,o,r,i,a){if(!t(n,o,r,i,a)){var l=.5*(o+i),s=.5*(r+a),c=n.nodes;c[0]&&e(t,c[0],o,r,l,s),c[1]&&e(t,c[1],l,r,i,s),c[2]&&e(t,c[2],o,s,l,a),c[3]&&e(t,c[3],l,s,i,a)}}(e,k,p,g,v,m)},h=-1,null==t){for(;++h<f;)i(k,e[h],A[h],d[h],p,g,v,m);--h}else e.forEach(k.add);return A=d=e=u=null,k}var a,l=gn,s=vn;return(a=arguments.length)?(l=Yn,s=Gn,3===a&&(r=n,o=t,n=t=0),i(e)):(i.x=function(e){return arguments.length?(l=e,i):l},i.y=function(e){return arguments.length?(s=e,i):s},i.extent=function(e){return arguments.length?(null==e?t=n=o=r=null:(t=+e[0][0],n=+e[0][1],o=+e[1][0],r=+e[1][1]),i):null==t?null:[[t,n],[o,r]]},i.size=function(e){return arguments.length?(null==e?t=n=o=r=null:(t=n=0,o=+e[0],r=+e[1]),i):null==t?null:[o-t,r-n]},i)},Kr.interpolateRgb=Xn,Kr.interpolateObject=Qn,Kr.interpolateNumber=Kn,Kr.interpolateString=Jn;var el=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tl=new RegExp(el.source,"g");Kr.interpolate=Zn,Kr.interpolators=[function(e,t){var n=void 0===t?"undefined":(0,l.default)(t);return("string"===n?qi.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Xn:Jn:t instanceof ae?Xn:Array.isArray(t)?eo:"object"===n&&isNaN(t)?Qn:Kn)(e,t)}],Kr.interpolateArray=eo;var nl=function(){return Te},ol=Kr.map({linear:nl,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return oo},cubic:function(){return ro},sin:function(){return ao},exp:function(){return lo},circle:function(){return so},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Si*Math.asin(1/e):(e=1,n=t/4),function(o){return 1+e*Math.pow(2,-10*o)*Math.sin((o-n)*Si/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return co}}),rl=Kr.map({in:Te,out:to,"in-out":no,"out-in":function(e){return no(to(e))}});Kr.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,o=t>=0?e.substring(t+1):"in";return n=ol.get(n)||nl,function(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}((o=rl.get(o)||Te)(n.apply(null,Jr.call(arguments,1))))},Kr.interpolateHcl=function(e,t){e=Kr.hcl(e),t=Kr.hcl(t);var n=e.h,o=e.c,r=e.l,i=t.h-n,a=t.c-o,l=t.l-r;return isNaN(a)&&(a=0,o=isNaN(o)?t.c:o),isNaN(i)?(i=0,n=isNaN(n)?t.h:n):i>180?i-=360:-180>i&&(i+=360),function(e){return de(n+i*e,o+a*e,r+l*e)+""}},Kr.interpolateHsl=function(e,t){e=Kr.hsl(e),t=Kr.hsl(t);var n=e.h,o=e.s,r=e.l,i=t.h-n,a=t.s-o,l=t.l-r;return isNaN(a)&&(a=0,o=isNaN(o)?t.s:o),isNaN(i)?(i=0,n=isNaN(n)?t.h:n):i>180?i-=360:-180>i&&(i+=360),function(e){return ce(n+i*e,o+a*e,r+l*e)+""}},Kr.interpolateLab=function(e,t){e=Kr.lab(e),t=Kr.lab(t);var n=e.l,o=e.a,r=e.b,i=t.l-n,a=t.a-o,l=t.b-r;return function(e){return pe(n+i*e,o+a*e,r+l*e)+""}},Kr.interpolateRound=uo,Kr.transform=function(e){var t=ei.createElementNS(Kr.ns.prefix.svg,"g");return(Kr.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Ao(n?n.matrix:il)})(e)},Ao.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var il={a:1,b:0,c:0,d:1,e:0,f:0};Kr.interpolateTransform=po,Kr.layout={},Kr.layout.bundle=function(){return function(e){for(var t=[],n=-1,o=e.length;++n<o;)t.push(mo(e[n]));return t}},Kr.layout.chord=function(){function e(){var e,c,A,d,h,f={},p=[],g=Kr.range(i),v=[];for(n=[],o=[],e=0,d=-1;++d<i;){for(c=0,h=-1;++h<i;)c+=r[d][h];p.push(c),v.push(Kr.range(i)),e+=c}for(a&&g.sort(function(e,t){return a(p[e],p[t])}),l&&v.forEach(function(e,t){e.sort(function(e,n){return l(r[t][e],r[t][n])})}),e=(Si-u*i)/e,c=0,d=-1;++d<i;){for(A=c,h=-1;++h<i;){var m=g[d],b=v[m][h],_=r[m][b],y=c,w=c+=_*e;f[m+"-"+b]={index:m,subindex:b,startAngle:y,endAngle:w,value:_}}o[m]={index:m,startAngle:A,endAngle:c,value:(c-A)/e},c+=u}for(d=-1;++d<i;)for(h=d-1;++h<i;){var x=f[d+"-"+h],C=f[h+"-"+d];(x.value||C.value)&&n.push(x.value<C.value?{source:C,target:x}:{source:x,target:C})}s&&t()}function t(){n.sort(function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,o,r,i,a,l,s,c={},u=0;return c.matrix=function(e){return arguments.length?(i=(r=e)&&r.length,n=o=null,c):r},c.padding=function(e){return arguments.length?(u=e,n=o=null,c):u},c.sortGroups=function(e){return arguments.length?(a=e,n=o=null,c):a},c.sortSubgroups=function(e){return arguments.length?(l=e,n=null,c):l},c.sortChords=function(e){return arguments.length?(s=e,n&&t(),c):s},c.chords=function(){return n||e(),n},c.groups=function(){return o||e(),o},c},Kr.layout.force=function(){function e(e){return function(t,n,o,r){if(t.point!==e){var i=t.cx-e.x,a=t.cy-e.y,l=r-n,s=i*i+a*a;if(s>l*l/g){if(f>s){var c=t.charge/s;e.px-=i*c,e.py-=a*c}return!0}if(t.point&&s&&f>s){c=t.pointCharge/s;e.px-=i*c,e.py-=a*c}}return!t.charge}}function t(e){e.px=Kr.event.x,e.py=Kr.event.y,l.resume()}var n,o,r,i,a,l={},s=Kr.dispatch("start","tick","end"),c=[1,1],u=.9,A=al,d=ll,h=-30,f=sl,p=.1,g=.64,v=[],m=[];return l.tick=function(){if((o*=.99)<.005)return s.end({type:"end",alpha:o=0}),!0;var t,n,l,A,d,f,g,b,_,y=v.length,w=m.length;for(n=0;w>n;++n)A=(l=m[n]).source,(f=(b=(d=l.target).x-A.x)*b+(_=d.y-A.y)*_)&&(b*=f=o*i[n]*((f=Math.sqrt(f))-r[n])/f,_*=f,d.x-=b*(g=A.weight/(d.weight+A.weight)),d.y-=_*g,A.x+=b*(g=1-g),A.y+=_*g);if((g=o*p)&&(b=c[0]/2,_=c[1]/2,n=-1,g))for(;++n<y;)(l=v[n]).x+=(b-l.x)*g,l.y+=(_-l.y)*g;if(h)for(function e(t,n,o){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,l=t.nodes,s=l.length,c=-1;++c<s;)null!=(a=l[c])&&(e(a,n,o),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=n*o[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}(t=Kr.geom.quadtree(v),o,a),n=-1;++n<y;)(l=v[n]).fixed||t.visit(e(l));for(n=-1;++n<y;)(l=v[n]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*u,l.y-=(l.py-(l.py=l.y))*u);s.tick({type:"tick",alpha:o})},l.nodes=function(e){return arguments.length?(v=e,l):v},l.links=function(e){return arguments.length?(m=e,l):m},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(A="function"==typeof e?e:+e,l):A},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,l):d},l.friction=function(e){return arguments.length?(u=+e,l):u},l.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,l):h},l.chargeDistance=function(e){return arguments.length?(f=e*e,l):Math.sqrt(f)},l.gravity=function(e){return arguments.length?(p=+e,l):p},l.theta=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.alpha=function(e){return arguments.length?(e=+e,o?o=e>0?e:0:e>0&&(s.start({type:"start",alpha:o=e}),Kr.timer(l.tick)),l):o},l.start=function(){function e(e,o){if(!n){for(n=new Array(s),l=0;s>l;++l)n[l]=[];for(l=0;c>l;++l){var r=m[l];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var i,a=n[t],l=-1,c=a.length;++l<c;)if(!isNaN(i=a[l][e]))return i;return Math.random()*o}var t,n,o,s=v.length,u=m.length,f=c[0],p=c[1];for(t=0;s>t;++t)(o=v[t]).index=t,o.weight=0;for(t=0;u>t;++t)"number"==typeof(o=m[t]).source&&(o.source=v[o.source]),"number"==typeof o.target&&(o.target=v[o.target]),++o.source.weight,++o.target.weight;for(t=0;s>t;++t)o=v[t],isNaN(o.x)&&(o.x=e("x",f)),isNaN(o.y)&&(o.y=e("y",p)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(r=[],"function"==typeof A)for(t=0;u>t;++t)r[t]=+A.call(this,m[t],t);else for(t=0;u>t;++t)r[t]=A;if(i=[],"function"==typeof d)for(t=0;u>t;++t)i[t]=+d.call(this,m[t],t);else for(t=0;u>t;++t)i[t]=d;if(a=[],"function"==typeof h)for(t=0;s>t;++t)a[t]=+h.call(this,v[t],t);else for(t=0;s>t;++t)a[t]=h;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return n||(n=Kr.behavior.drag().origin(Te).on("dragstart.force",_o).on("drag.force",t).on("dragend.force",yo)),arguments.length?void this.on("mouseover.force",wo).on("mouseout.force",xo).call(n):n},Kr.rebind(l,s,"on")};var al=20,ll=1,sl=1/0;Kr.layout.hierarchy=function(){function e(i,a,l){var s=o.call(t,i,a);if(i.depth=a,l.push(i),s&&(c=s.length)){for(var c,u,A=-1,d=i.children=new Array(c),h=0,f=a+1;++A<c;)(u=d[A]=e(s[A],f,l)).parent=i,h+=u.value;n&&d.sort(n),r&&(i.value=h)}else delete i.children,r&&(i.value=+r.call(t,i,a)||0);return i}function t(t){var n=[];return e(t,0,n),n}var n=So,o=ko,r=Mo;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(e){return arguments.length?(o=e,t):o},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return function e(n,o){var i=n.children,a=0;if(i&&(l=i.length))for(var l,s=-1,c=o+1;++s<l;)a+=e(i[s],c);else r&&(a=+r.call(t,n,o)||0);return r&&(n.value=a),a}(e,0),e},t},Kr.layout.partition=function(){function e(e,o){var r=t.call(this,e,o);return function e(t,n,o,r){var i=t.children;if(t.x=n,t.y=t.depth*r,t.dx=o,t.dy=r,i&&(a=i.length)){var a,l,s,c=-1;for(o=t.value?o/t.value:0;++c<a;)e(l=i[c],n,s=l.value*o,r),n+=s}}(r[0],0,n[0],n[1]/function e(t){var n=t.children,o=0;if(n&&(r=n.length))for(var r,i=-1;++i<r;)o=Math.max(o,e(n[i]));return 1+o}(r[0])),r}var t=Kr.layout.hierarchy(),n=[1,1];return e.size=function(t){return arguments.length?(n=t,e):n},Co(e,t)},Kr.layout.pie=function(){function e(i){var a=i.map(function(n,o){return+t.call(e,n,o)}),l=+("function"==typeof o?o.apply(this,arguments):o),s=(("function"==typeof r?r.apply(this,arguments):r)-l)/Kr.sum(a),c=Kr.range(i.length);null!=n&&c.sort(n===cl?function(e,t){return a[t]-a[e]}:function(e,t){return n(i[e],i[t])});var u=[];return c.forEach(function(e){var t;u[e]={data:i[e],value:t=a[e],startAngle:l,endAngle:l+=t*s}}),u}var t=Number,n=cl,o=0,r=Si;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(o=t,e):o},e.endAngle=function(t){return arguments.length?(r=t,e):r},e};var cl={};Kr.layout.stack=function(){function e(l,s){var c=l.map(function(n,o){return t.call(e,n,o)}),u=c.map(function(t){return t.map(function(t,n){return[i.call(e,t,n),a.call(e,t,n)]})}),A=n.call(e,u,s);c=Kr.permute(c,A),u=Kr.permute(u,A);var d,h,f,p=o.call(e,u,s),g=c.length,v=c[0].length;for(h=0;v>h;++h)for(r.call(e,c[0][h],f=p[h],u[0][h][1]),d=1;g>d;++d)r.call(e,c[d][h],f+=u[d-1][h][1],u[d][h][1]);return l}var t=Te,n=Do,o=Lo,r=To,i=Ro,a=No;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ul.get(t)||Do,e):n},e.offset=function(t){return arguments.length?(o="function"==typeof t?t:Al.get(t)||Lo,e):o},e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(r=t,e):r},e};var ul=Kr.map({"inside-out":function(e){var t,n,o=e.length,r=e.map(Io),i=e.map(Po),a=Kr.range(o).sort(function(e,t){return r[e]-r[t]}),l=0,s=0,c=[],u=[];for(t=0;o>t;++t)n=a[t],s>l?(l+=i[n],c.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return Kr.range(e.length).reverse()},default:Do}),Al=Kr.map({silhouette:function(e){var t,n,o,r=e.length,i=e[0].length,a=[],l=0,s=[];for(n=0;i>n;++n){for(t=0,o=0;r>t;t++)o+=e[t][n][1];o>l&&(l=o),a.push(o)}for(n=0;i>n;++n)s[n]=(l-a[n])/2;return s},wiggle:function(e){var t,n,o,r,i,a,l,s,c,u=e.length,A=e[0],d=A.length,h=[];for(h[0]=s=c=0,n=1;d>n;++n){for(t=0,r=0;u>t;++t)r+=e[t][n][1];for(t=0,i=0,l=A[n][0]-A[n-1][0];u>t;++t){for(o=0,a=(e[t][n][1]-e[t][n-1][1])/(2*l);t>o;++o)a+=(e[o][n][1]-e[o][n-1][1])/l;i+=a*e[t][n][1]}h[n]=s-=r?i/r*l:0,c>s&&(c=s)}for(n=0;d>n;++n)h[n]-=c;return h},expand:function(e){var t,n,o,r=e.length,i=e[0].length,a=1/r,l=[];for(n=0;i>n;++n){for(t=0,o=0;r>t;t++)o+=e[t][n][1];if(o)for(t=0;r>t;t++)e[t][n][1]/=o;else for(t=0;r>t;t++)e[t][n][1]=a}for(n=0;i>n;++n)l[n]=0;return l},zero:Lo});Kr.layout.histogram=function(){function e(e,i){for(var a,l,s=[],c=e.map(n,this),u=o.call(this,c,i),A=r.call(this,u,c,i),d=(i=-1,c.length),h=A.length-1,f=t?1:1/d;++i<h;)(a=s[i]=[]).dx=A[i+1]-(a.x=A[i]),a.y=0;if(h>0)for(i=-1;++i<d;)(l=c[i])>=u[0]&&l<=u[1]&&((a=s[Kr.bisect(A,l,1,h)-1]).y+=f,a.push(e[i]));return s}var t=!0,n=Number,o=Bo,r=Ho;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(o=Ne(t),e):o},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Fo(e,t)}:Ne(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Kr.layout.tree=function(){function e(e,i){function a(e,t,o){if(t){for(var r,i=e,a=e,l=t,s=e.parent.children[0],c=i._tree.mod,u=a._tree.mod,A=l._tree.mod,d=s._tree.mod;l=Oo(l),i=Vo(i),l&&i;)s=Vo(s),(a=Oo(a))._tree.ancestor=e,(r=l._tree.prelim+A-i._tree.prelim-c+n(l,i))>0&&(Go(Xo(l,e,o),e,r),c+=r,u+=r),A+=l._tree.mod,c+=i._tree.mod,d+=s._tree.mod,u+=a._tree.mod;l&&!Oo(a)&&(a._tree.thread=l,a._tree.mod+=A-u),i&&!Vo(s)&&(s._tree.thread=i,s._tree.mod+=c-d,o=e)}return o}var l=t.call(this,e,i),s=l[0];Yo(s,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),function e(t,o){var r=t.children,i=t._tree;if(r&&(l=r.length)){for(var l,s,c,u=r[0],A=u,d=-1;++d<l;)e(c=r[d],s),A=a(c,s,A),s=c;!function(e){for(var t,n=0,o=0,r=e.children,i=r.length;--i>=0;)(t=r[i]._tree).prelim+=n,t.mod+=n,n+=t.shift+(o+=t.change)}(t);var h=.5*(u._tree.prelim+c._tree.prelim);o?(i.prelim=o._tree.prelim+n(t,o),i.mod=i.prelim-h):i.prelim=h}else o&&(i.prelim=o._tree.prelim+n(t,o))}(s),function e(t,n){t.x=t._tree.prelim+n;var o=t.children;if(o&&(r=o.length)){var r,i=-1;for(n+=t._tree.mod;++i<r;)e(o[i],n)}}(s,-s._tree.prelim);var c=jo(s,Wo),u=jo(s,Uo),A=jo(s,qo),d=c.x-n(c,u)/2,h=u.x+n(u,c)/2,f=A.depth||1;return Yo(s,r?function(e){e.x*=o[0],e.y=e.depth*o[1],delete e._tree}:function(e){e.x=(e.x-d)/(h-d)*o[0],e.y=e.depth/f*o[1],delete e._tree}),l}var t=Kr.layout.hierarchy().sort(null).value(null),n=$o,o=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(o=t),e):r?null:o},e.nodeSize=function(t){return arguments.length?(r=null!=(o=t),e):r?o:null},Co(e,t)},Kr.layout.pack=function(){function e(e,i){var a=n.call(this,e,i),l=a[0],s=r[0],c=r[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(l.x=l.y=0,Yo(l,function(e){e.r=+u(e.value)}),Yo(l,er),o){var A=o*(t?1:Math.max(2*l.r/s,2*l.r/c))/2;Yo(l,function(e){e.r+=A}),Yo(l,er),Yo(l,function(e){e.r-=A})}return function e(t,n,o,r){var i=t.children;if(t.x=n+=r*t.x,t.y=o+=r*t.y,t.r*=r,i)for(var a=-1,l=i.length;++a<l;)e(i[a],n,o,r)}(l,s/2,c/2,t?1:1/Math.max(2*l.r/s,2*l.r/c)),a}var t,n=Kr.layout.hierarchy().sort(Qo),o=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(o=+t,e):o},Co(e,n)},Kr.layout.cluster=function(){function e(e,i){var a,l=t.call(this,e,i),s=l[0],c=0;Yo(s,function(e){var t=e.children;t&&t.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(t),e.y=function(e){return 1+Kr.max(e,function(e){return e.y})}(t)):(e.x=a?c+=n(e,a):0,e.y=0,a=e)});var u=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(s),A=function e(t){var n,o=t.children;return o&&(n=o.length)?e(o[n-1]):t}(s),d=u.x-n(u,A)/2,h=A.x+n(A,u)/2;return Yo(s,r?function(e){e.x=(e.x-s.x)*o[0],e.y=(s.y-e.y)*o[1]}:function(e){e.x=(e.x-d)/(h-d)*o[0],e.y=(1-(s.y?e.y/s.y:1))*o[1]}),l}var t=Kr.layout.hierarchy().sort(null).value(null),n=$o,o=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(o=t),e):r?null:o},e.nodeSize=function(t){return arguments.length?(r=null!=(o=t),e):r?o:null},Co(e,t)},Kr.layout.treemap=function(){function e(e,t){for(var n,o,r=-1,i=e.length;++r<i;)o=(n=e[r]).value*(0>t?0:t),n.area=isNaN(o)||0>=o?0:o}function t(n){var i=n.children;if(i&&i.length){var a,l,s,c=d(n),u=[],A=i.slice(),h=1/0,p="slice"===f?c.dx:"dice"===f?c.dy:"slice-dice"===f?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(e(A,c.dx*c.dy/n.value),u.area=0;(s=A.length)>0;)u.push(a=A[s-1]),u.area+=a.area,"squarify"!==f||(l=o(u,p))<=h?(A.pop(),h=l):(u.area-=u.pop().area,r(u,p,c,!1),p=Math.min(c.dx,c.dy),u.length=u.area=0,h=1/0);u.length&&(r(u,p,c,!0),u.length=u.area=0),i.forEach(t)}}function n(t){var o=t.children;if(o&&o.length){var i,a=d(t),l=o.slice(),s=[];for(e(l,a.dx*a.dy/t.value),s.area=0;i=l.pop();)s.push(i),s.area+=i.area,null!=i.z&&(r(s,i.z?a.dx:a.dy,a,!l.length),s.length=s.area=0);o.forEach(n)}}function o(e,t){for(var n,o=e.area,r=0,i=1/0,a=-1,l=e.length;++a<l;)(n=e[a].area)&&(i>n&&(i=n),n>r&&(r=n));return t*=t,(o*=o)?Math.max(t*r*p/o,o/(t*i*p)):1/0}function r(e,t,n,o){var r,i=-1,a=e.length,l=n.x,s=n.y,u=t?c(e.area/t):0;if(t==n.dx){for((o||u>n.dy)&&(u=n.dy);++i<a;)(r=e[i]).x=l,r.y=s,r.dy=u,l+=r.dx=Math.min(n.x+n.dx-l,u?c(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-l,n.y+=u,n.dy-=u}else{for((o||u>n.dx)&&(u=n.dx);++i<a;)(r=e[i]).x=l,r.y=s,r.dx=u,s+=r.dy=Math.min(n.y+n.dy-s,u?c(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-s,n.x+=u,n.dx-=u}}function i(o){var r=a||s(o),i=r[0];return i.x=0,i.y=0,i.dx=u[0],i.dy=u[1],a&&s.revalue(i),e([i],i.dx*i.dy/i.value),(a?n:t)(i),h&&(a=r),r}var a,s=Kr.layout.hierarchy(),c=Math.round,u=[1,1],A=null,d=rr,h=!1,f="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(e){return arguments.length?(u=e,i):u},i.padding=function(e){function t(t){return ir(t,e)}return arguments.length?(d=null==(A=e)?rr:"function"==(n=void 0===e?"undefined":(0,l.default)(e))?function(t){var n=e.call(i,t,t.depth);return null==n?rr(t):ir(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,i):A;var n},i.round=function(e){return arguments.length?(c=e?Math.round:Number,i):c!=Number},i.sticky=function(e){return arguments.length?(h=e,a=null,i):h},i.ratio=function(e){return arguments.length?(p=e,i):p},i.mode=function(e){return arguments.length?(f=e+"",i):f},Co(i,s)},Kr.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,o,r;do{r=(n=2*Math.random()-1)*n+(o=2*Math.random()-1)*o}while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=Kr.random.normal.apply(Kr,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=Kr.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},Kr.scale={};var dl={floor:Te,ceil:Te};Kr.scale.linear=function(){return function e(t,n,o,r){function i(){var e=Math.min(t.length,n.length)>2?ur:sr,i=r?vo:go;return l=e(t,n,i,o),s=e(n,t,i,Zn),a}function a(e){return l(e)}var l,s;return a.invert=function(e){return s(e)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(e){return arguments.length?(n=e,i()):n},a.rangeRound=function(e){return a.range(e).interpolate(uo)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(o=e,i()):o},a.ticks=function(e){return fr(t,e)},a.tickFormat=function(e,n){return pr(t,e,n)},a.nice=function(e){return dr(t,e),i()},a.copy=function(){return e(t,n,o,r)},i()}([0,1],[0,1],Zn,!1)};var hl={s:1,g:1,p:1,r:1,e:1};Kr.scale.log=function(){return function e(t,n,o,r){function i(e){return(o?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function a(e){return o?Math.pow(n,e):-Math.pow(n,-e)}function l(e){return t(i(e))}return l.invert=function(e){return a(t.invert(e))},l.domain=function(e){return arguments.length?(o=e[0]>=0,t.domain((r=e.map(Number)).map(i)),l):r},l.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),l):n},l.nice=function(){var e=cr(r.map(i),o?Math:pl);return t.domain(e),r=e.map(a),l},l.ticks=function(){var e=ar(r),t=[],l=e[0],s=e[1],c=Math.floor(i(l)),u=Math.ceil(i(s)),A=n%1?2:n;if(isFinite(u-c)){if(o){for(;u>c;c++)for(var d=1;A>d;d++)t.push(a(c)*d);t.push(a(c))}else for(t.push(a(c));c++<u;)for(d=A-1;d>0;d--)t.push(a(c)*d);for(c=0;t[c]<l;c++);for(u=t.length;t[u-1]>s;u--);t=t.slice(c,u)}return t},l.tickFormat=function(e,t){if(!arguments.length)return fl;arguments.length<2?t=fl:"function"!=typeof t&&(t=Kr.format(t));var n,r=Math.max(.1,e/l.ticks().length),s=o?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(e){return e/a(s(i(e)+n))<=r?t(e):""}},l.copy=function(){return e(t.copy(),n,o,r)},Ar(l,t)}(Kr.scale.linear().domain([0,1]),10,!0,[1,10])};var fl=Kr.format(".0e"),pl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};Kr.scale.pow=function(){return function e(t,n,o){function r(e){return t(i(e))}var i=vr(n),a=vr(1/n);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((o=e.map(Number)).map(i)),r):o},r.ticks=function(e){return fr(o,e)},r.tickFormat=function(e,t){return pr(o,e,t)},r.nice=function(e){return r.domain(dr(o,e))},r.exponent=function(e){return arguments.length?(i=vr(n=e),a=vr(1/n),t.domain(o.map(i)),r):n},r.copy=function(){return e(t.copy(),n,o)},Ar(r,t)}(Kr.scale.linear(),1,[0,1])},Kr.scale.sqrt=function(){return Kr.scale.pow().exponent(.5)},Kr.scale.ordinal=function(){return function e(t,n){function o(e){return a[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):NaN))-1)%a.length]}function r(e,n){return Kr.range(t.length).map(function(t){return e+n*t})}var i,a,l;return o.domain=function(e){if(!arguments.length)return t;t=[],i=new f;for(var r,a=-1,l=e.length;++a<l;)i.has(r=e[a])||i.set(r,t.push(r));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(a=e,l=0,n={t:"range",a:arguments},o):a},o.rangePoints=function(e,i){arguments.length<2&&(i=0);var s=e[0],c=e[1],u=(c-s)/(Math.max(1,t.length-1)+i);return a=r(t.length<2?(s+c)/2:s+u*i/2,u),l=0,n={t:"rangePoints",a:arguments},o},o.rangeBands=function(e,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var c=e[1]<e[0],u=e[c-0],A=(e[1-c]-u)/(t.length-i+2*s);return a=r(u+A*s,A),c&&a.reverse(),l=A*(1-i),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,i,s){arguments.length<2&&(i=0),arguments.length<3&&(s=i);var c=e[1]<e[0],u=e[c-0],A=e[1-c],d=Math.floor((A-u)/(t.length-i+2*s)),h=A-u-(t.length-i)*d;return a=r(u+Math.round(h/2),d),c&&a.reverse(),l=Math.round(d*(1-i)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return l},o.rangeExtent=function(){return ar(n.a[0])},o.copy=function(){return e(t,n)},o.domain(t)}([],{t:"range",a:[[]]})},Kr.scale.category10=function(){return Kr.scale.ordinal().range(gl)},Kr.scale.category20=function(){return Kr.scale.ordinal().range(vl)},Kr.scale.category20b=function(){return Kr.scale.ordinal().range(ml)},Kr.scale.category20c=function(){return Kr.scale.ordinal().range(bl)};var gl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ye),vl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ye),ml=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ye),bl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ye);Kr.scale.quantile=function(){return function e(t,o){function r(){var e=0,n=o.length;for(a=[];++e<n;)a[e-1]=Kr.quantile(t,e/n);return i}function i(e){return isNaN(e=+e)?void 0:o[Kr.bisect(a,e)]}var a;return i.domain=function(e){return arguments.length?(t=e.filter(u).sort(n),r()):t},i.range=function(e){return arguments.length?(o=e,r()):o},i.quantiles=function(){return a},i.invertExtent=function(e){return 0>(e=o.indexOf(e))?[NaN,NaN]:[e>0?a[e-1]:t[0],e<a.length?a[e]:t[t.length-1]]},i.copy=function(){return e(t,o)},r()}([],[])},Kr.scale.quantize=function(){return function e(t,n,o){function r(e){return o[Math.max(0,Math.min(l,Math.floor(a*(e-t))))]}function i(){return a=o.length/(n-t),l=o.length-1,r}var a,l;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(e){return arguments.length?(o=e,i()):o},r.invertExtent=function(e){return[e=0>(e=o.indexOf(e))?NaN:e/a+t,e+1/a]},r.copy=function(){return e(t,n,o)},i()}(0,1,[0,1])},Kr.scale.threshold=function(){return function e(t,n){function o(e){return e>=e?n[Kr.bisect(t,e)]:void 0}return o.domain=function(e){return arguments.length?(t=e,o):t},o.range=function(e){return arguments.length?(n=e,o):n},o.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},o.copy=function(){return e(t,n)},o}([.5],[0,1])},Kr.scale.identity=function(){return function e(t){function n(e){return+e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(e){return fr(t,e)},n.tickFormat=function(e,n){return pr(t,e,n)},n.copy=function(){return e(t)},n}([0,1])},Kr.svg={},Kr.svg.arc=function(){function e(){var e=t.apply(this,arguments),i=n.apply(this,arguments),a=o.apply(this,arguments)+_l,l=r.apply(this,arguments)+_l,s=(a>l&&(s=a,a=l,l=s),l-a),c=Mi>s?"0":"1",u=Math.cos(a),A=Math.sin(a),d=Math.cos(l),h=Math.sin(l);return s>=yl?e?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":e?"M"+i*u+","+i*A+"A"+i+","+i+" 0 "+c+",1 "+i*d+","+i*h+"L"+e*d+","+e*h+"A"+e+","+e+" 0 "+c+",0 "+e*u+","+e*A+"Z":"M"+i*u+","+i*A+"A"+i+","+i+" 0 "+c+",1 "+i*d+","+i*h+"L0,0Z"}var t=mr,n=br,o=_r,r=yr;return e.innerRadius=function(n){return arguments.length?(t=Ne(n),e):t},e.outerRadius=function(t){return arguments.length?(n=Ne(t),e):n},e.startAngle=function(t){return arguments.length?(o=Ne(t),e):o},e.endAngle=function(t){return arguments.length?(r=Ne(t),e):r},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,i=(o.apply(this,arguments)+r.apply(this,arguments))/2+_l;return[Math.cos(i)*e,Math.sin(i)*e]},e};var _l=-Ei,yl=Si-Ri;Kr.svg.line=function(){return wr(Te)};var wl=Kr.map({linear:xr,"linear-closed":function(e){return xr(e)+"Z"},step:function(e){for(var t=0,n=e.length,o=e[0],r=[o[0],",",o[1]];++t<n;)r.push("H",(o[0]+(o=e[t])[0])/2,"V",o[1]);return n>1&&r.push("H",o[0]),r.join("")},"step-before":Cr,"step-after":kr,basis:Er,"basis-open":function(e){if(e.length<4)return xr(e);for(var t,n=[],o=-1,r=e.length,i=[0],a=[0];++o<3;)t=e[o],i.push(t[0]),a.push(t[1]);for(n.push(Rr(kl,i)+","+Rr(kl,a)),--o;++o<r;)t=e[o],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Nr(n,i,a);return n.join("")},"basis-closed":function(e){for(var t,n,o=-1,r=e.length,i=r+4,a=[],l=[];++o<4;)n=e[o%r],a.push(n[0]),l.push(n[1]);for(t=[Rr(kl,a),",",Rr(kl,l)],--o;++o<i;)n=e[o%r],a.shift(),a.push(n[0]),l.shift(),l.push(n[1]),Nr(t,a,l);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var o,r,i=e[0][0],a=e[0][1],l=e[n][0]-i,s=e[n][1]-a,c=-1;++c<=n;)r=c/n,(o=e[c])[0]=t*o[0]+(1-t)*(i+r*l),o[1]=t*o[1]+(1-t)*(a+r*s);return Er(e)},cardinal:function(e,t){return e.length<3?xr(e):e[0]+Mr(e,Sr(e,t))},"cardinal-open":function(e,t){return e.length<4?xr(e):e[1]+Mr(e.slice(1,e.length-1),Sr(e,t))},"cardinal-closed":function(e,t){return e.length<3?xr(e):e[0]+Mr((e.push(e[0]),e),Sr([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?xr(e):e[0]+Mr(e,Dr(e))}});wl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var xl=[0,2/3,1/3,0],Cl=[0,1/3,2/3,0],kl=[0,1/6,2/3,1/6];Kr.svg.line.radial=function(){var e=wr(Lr);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Cr.reverse=kr,kr.reverse=Cr,Kr.svg.area=function(){return Ir(Te)},Kr.svg.area.radial=function(){var e=Ir(Lr);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Kr.svg.chord=function(){function e(e,a){var l=t(this,r,e,a),s=t(this,i,e,a);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(l,s)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,s.r,s.p0)+n(s.r,s.p1,s.a1-s.a0)+o(s.r,s.p1,l.r,l.p0))+"Z"}function t(e,t,n,o){var r=t.call(e,n,o),i=a.call(e,r,o),c=l.call(e,r,o)+_l,u=s.call(e,r,o)+_l;return{r:i,a0:c,a1:u,p0:[i*Math.cos(c),i*Math.sin(c)],p1:[i*Math.cos(u),i*Math.sin(u)]}}function n(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Mi)+",1 "+t}function o(e,t,n,o){return"Q 0,0 "+o}var r=sn,i=cn,a=Pr,l=_r,s=yr;return e.radius=function(t){return arguments.length?(a=Ne(t),e):a},e.source=function(t){return arguments.length?(r=Ne(t),e):r},e.target=function(t){return arguments.length?(i=Ne(t),e):i},e.startAngle=function(t){return arguments.length?(l=Ne(t),e):l},e.endAngle=function(t){return arguments.length?(s=Ne(t),e):s},e},Kr.svg.diagonal=function(){function e(e,r){var i=t.call(this,e,r),a=n.call(this,e,r),l=(i.y+a.y)/2,s=[i,{x:i.x,y:l},{x:a.x,y:l},a];return"M"+(s=s.map(o))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var t=sn,n=cn,o=zr;return e.source=function(n){return arguments.length?(t=Ne(n),e):t},e.target=function(t){return arguments.length?(n=Ne(t),e):n},e.projection=function(t){return arguments.length?(o=t,e):o},e},Kr.svg.diagonal.radial=function(){var e=Kr.svg.diagonal(),t=zr,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],o=t[1]+_l;return[n*Math.cos(o),n*Math.sin(o)]}}(t=e)):t},e},Kr.svg.symbol=function(){function e(e,o){return(Ml.get(t.call(this,e,o))||Br)(n.call(this,e,o))}var t=Fr,n=Hr;return e.type=function(n){return arguments.length?(t=Ne(n),e):t},e.size=function(t){return arguments.length?(n=Ne(t),e):n},e};var Ml=Kr.map({circle:Br,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Nl)),n=t*Nl;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});Kr.svg.symbolTypes=Ml.keys();var Sl,El,Rl=Math.sqrt(3),Nl=Math.tan(30*Ti),Tl=[],Dl=0;Tl.call=bi.call,Tl.empty=bi.empty,Tl.node=bi.node,Tl.size=bi.size,Kr.transition=function(e){return arguments.length?Sl?e.transition():e:wi.transition()},Kr.transition.prototype=Tl,Tl.select=function(e){var t,n,o,r=this.id,i=[];e=R(e);for(var a=-1,l=this.length;++a<l;){i.push(t=[]);for(var s=this[a],c=-1,u=s.length;++c<u;)(o=s[c])&&(n=e.call(o,o.__data__,c,a))?("__data__"in o&&(n.__data__=o.__data__),jr(n,c,r,o.__transition__[r]),t.push(n)):t.push(null)}return $r(i,r)},Tl.selectAll=function(e){var t,n,o,r,i,a=this.id,l=[];e=N(e);for(var s=-1,c=this.length;++s<c;)for(var u=this[s],A=-1,d=u.length;++A<d;)if(o=u[A]){i=o.__transition__[a],n=e.call(o,o.__data__,A,s),l.push(t=[]);for(var h=-1,f=n.length;++h<f;)(r=n[h])&&jr(r,h,a,i),t.push(r)}return $r(l,a)},Tl.filter=function(e){var t,n,o=[];"function"!=typeof e&&(e=V(e));for(var r=0,i=this.length;i>r;r++){o.push(t=[]);for(var a,l=0,s=(a=this[r]).length;s>l;l++)(n=a[l])&&e.call(n,n.__data__,l,r)&&t.push(n)}return $r(o,this.id)},Tl.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):j(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(o){o.__transition__[n].tween.set(e,t)})},Tl.attr=function(e,t){function n(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?po:Zn,i=Kr.ns.qualify(e);return Vr(this,"attr."+e,t,i.local?function(e){return null==e?o:(e+="",function(){var t,n=this.getAttributeNS(i.space,i.local);return n!==e&&(t=r(n,e),function(e){this.setAttributeNS(i.space,i.local,t(e))})})}:function(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(i);return n!==e&&(t=r(n,e),function(e){this.setAttribute(i,t(e))})})})},Tl.attrTween=function(e,t){var n=Kr.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,o){var r=t.call(this,e,o,this.getAttributeNS(n.space,n.local));return r&&function(e){this.setAttributeNS(n.space,n.local,r(e))}}:function(e,o){var r=t.call(this,e,o,this.getAttribute(n));return r&&function(e){this.setAttribute(n,r(e))}})},Tl.style=function(e,t,n){function o(){this.style.removeProperty(e)}var r=arguments.length;if(3>r){if("string"!=typeof e){for(n in 2>r&&(t=""),e)this.style(n,e[n],t);return this}n=""}return Vr(this,"style."+e,t,function(t){return null==t?o:(t+="",function(){var o,r=ni.getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(o=Zn(r,t),function(t){this.style.setProperty(e,o(t),n)})})})},Tl.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(o,r){var i=t.call(this,o,r,ni.getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),n)}})},Tl.text=function(e){return Vr(this,"text",e,Or)},Tl.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Tl.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=Kr.ease.apply(Kr,arguments)),j(this,function(n){n.__transition__[t].ease=e}))},Tl.delay=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:j(this,"function"==typeof e?function(n,o,r){n.__transition__[t].delay=+e.call(n,n.__data__,o,r)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Tl.duration=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:j(this,"function"==typeof e?function(n,o,r){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,o,r))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Tl.each=function(e,t){var n=this.id;if(arguments.length<2){var o=El,r=Sl;Sl=n,j(this,function(t,o,r){El=t.__transition__[n],e.call(t,t.__data__,o,r)}),El=o,Sl=r}else j(this,function(o){var r=o.__transition__[n];(r.event||(r.event=Kr.dispatch("start","end"))).on(e,t)});return this},Tl.transition=function(){for(var e,t,n,o=this.id,r=++Dl,i=[],l=0,s=this.length;s>l;l++){i.push(e=[]);for(var c,u=0,A=(c=this[l]).length;A>u;u++)(t=c[u])&&((n=(0,a.default)(t.__transition__[o])).delay+=n.duration,jr(t,u,r,n)),e.push(t)}return $r(i,r)},Kr.svg.axis=function(){function e(e){e.each(function(){var e,c=Kr.select(this),u=this.__chart__||n,A=this.__chart__=n.copy(),d=null==s?A.ticks?A.ticks.apply(A,l):A.domain():s,h=null==t?A.tickFormat?A.tickFormat.apply(A,l):Te:t,f=c.selectAll(".tick").data(d,A),p=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Ri),g=Kr.transition(f.exit()).style("opacity",Ri).remove(),v=Kr.transition(f.order()).style("opacity",1),m=lr(A),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),Kr.transition(b));p.append("line"),p.append("text");var y=p.select("line"),w=v.select("line"),x=f.select("text").text(h),C=p.select("text"),k=v.select("text");switch(o){case"bottom":e=Ur,y.attr("y2",r),C.attr("y",Math.max(r,0)+a),w.attr("x2",0).attr("y2",r),k.attr("x",0).attr("y",Math.max(r,0)+a),x.attr("dy",".71em").style("text-anchor","middle"),_.attr("d","M"+m[0]+","+i+"V0H"+m[1]+"V"+i);break;case"top":e=Ur,y.attr("y2",-r),C.attr("y",-(Math.max(r,0)+a)),w.attr("x2",0).attr("y2",-r),k.attr("x",0).attr("y",-(Math.max(r,0)+a)),x.attr("dy","0em").style("text-anchor","middle"),_.attr("d","M"+m[0]+","+-i+"V0H"+m[1]+"V"+-i);break;case"left":e=Wr,y.attr("x2",-r),C.attr("x",-(Math.max(r,0)+a)),w.attr("x2",-r).attr("y2",0),k.attr("x",-(Math.max(r,0)+a)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),_.attr("d","M"+-i+","+m[0]+"H0V"+m[1]+"H"+-i);break;case"right":e=Wr,y.attr("x2",r),C.attr("x",Math.max(r,0)+a),w.attr("x2",r).attr("y2",0),k.attr("x",Math.max(r,0)+a).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),_.attr("d","M"+i+","+m[0]+"H0V"+m[1]+"H"+i)}if(A.rangeBand){var M=A,S=M.rangeBand()/2;u=A=function(e){return M(e)+S}}else u.rangeBand?u=A:g.call(e,A);p.call(e,u),v.call(e,A)})}var t,n=Kr.scale.linear(),o=Ll,r=6,i=6,a=3,l=[10],s=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(o=t in Il?t+"":Ll,e):o},e.ticks=function(){return arguments.length?(l=arguments,e):l},e.tickValues=function(t){return arguments.length?(s=t,e):s},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,i=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(i=+t,e):i},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Ll="bottom",Il={top:1,right:1,bottom:1,left:1};Kr.svg.brush=function(){function e(i){i.each(function(){var i=Kr.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=i.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=i.selectAll(".resize").data(f,Te);l.exit().remove(),l.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Pl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),l.style("display",e.empty()?"none":null);var u,A=Kr.transition(i),d=Kr.transition(a);s&&(u=lr(s),d.attr("x",u[0]).attr("width",u[1]-u[0]),n(A)),c&&(u=lr(c),d.attr("y",u[0]).attr("height",u[1]-u[0]),o(A)),t(A)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+u[+/e$/.test(e)]+","+A[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",u[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function o(e){e.select(".extent").attr("y",A[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",A[1]-A[0])}function r(){function r(){var e=Kr.mouse(m),r=!1;v&&(e[0]+=v[0],e[1]+=v[1]),M||(Kr.event.altKey?(g||(g=[(u[0]+u[1])/2,(A[0]+A[1])/2]),E[0]=u[+(e[0]<g[0])],E[1]=A[+(e[1]<g[1])]):g=null),x&&f(e,s,0)&&(n(y),r=!0),C&&f(e,c,1)&&(o(y),r=!0),r&&(t(y),_({type:"brush",mode:M?"move":"resize"}))}function f(e,t,n){var o,r,l=lr(t),s=l[0],c=l[1],f=E[n],p=n?A:u,v=p[1]-p[0];return M&&(s-=f,c-=v+f),o=(n?h:d)?Math.max(s,Math.min(c,e[n])):e[n],M?r=(o+=f)+v:(g&&(f=Math.max(s,Math.min(c,2*g[n]-o))),o>f?(r=o,o=f):r=f),p[0]!=o||p[1]!=r?(n?a=null:i=null,p[0]=o,p[1]=r,!0):void 0}function p(){r(),y.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Kr.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),_({type:"brushend"})}var g,v,m=this,b=Kr.select(Kr.event.target),_=l.of(m,arguments),y=Kr.select(m),w=b.datum(),x=!/^(n|s)$/.test(w)&&s,C=!/^(e|w)$/.test(w)&&c,M=b.classed("extent"),S=X(),E=Kr.mouse(m),R=Kr.select(ni).on("keydown.brush",function(){32==Kr.event.keyCode&&(M||(g=null,E[0]-=u[1],E[1]-=A[1],M=2),k())}).on("keyup.brush",function(){32==Kr.event.keyCode&&2==M&&(E[0]+=u[1],E[1]+=A[1],M=0,k())});if(Kr.event.changedTouches?R.on("touchmove.brush",r).on("touchend.brush",p):R.on("mousemove.brush",r).on("mouseup.brush",p),y.interrupt().selectAll("*").interrupt(),M)E[0]=u[0]-E[0],E[1]=A[0]-E[1];else if(w){var N=+/w$/.test(w),T=+/^n/.test(w);v=[u[1-N]-E[0],A[1-T]-E[1]],E[0]=u[N],E[1]=A[T]}else Kr.event.altKey&&(g=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Kr.select("body").style("cursor",b.style("cursor")),_({type:"brushstart"}),r()}var i,a,l=S(e,"brushstart","brush","brushend"),s=null,c=null,u=[0,0],A=[0,0],d=!0,h=!0,f=zl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:u,y:A,i:i,j:a},n=this.__chart__||t;this.__chart__=t,Sl?Kr.select(this).transition().each("start.brush",function(){i=n.i,a=n.j,u=n.x,A=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=eo(u,t.x),o=eo(A,t.y);return i=a=null,function(r){u=t.x=n(r),A=t.y=o(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=t.i,a=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(f=zl[!(s=t)<<1|!c],e):s},e.y=function(t){return arguments.length?(f=zl[!s<<1|!(c=t)],e):c},e.clamp=function(t){return arguments.length?(s&&c?(d=!!t[0],h=!!t[1]):s?d=!!t:c&&(h=!!t),e):s&&c?[d,h]:s?d:c?h:null},e.extent=function(t){var n,o,r,l,d;return arguments.length?(s&&(n=t[0],o=t[1],c&&(n=n[0],o=o[0]),i=[n,o],s.invert&&(n=s(n),o=s(o)),n>o&&(d=n,n=o,o=d),(n!=u[0]||o!=u[1])&&(u=[n,o])),c&&(r=t[0],l=t[1],s&&(r=r[1],l=l[1]),a=[r,l],c.invert&&(r=c(r),l=c(l)),r>l&&(d=r,r=l,l=d),(r!=A[0]||l!=A[1])&&(A=[r,l])),e):(s&&(i?(n=i[0],o=i[1]):(n=u[0],o=u[1],s.invert&&(n=s.invert(n),o=s.invert(o)),n>o&&(d=n,n=o,o=d))),c&&(a?(r=a[0],l=a[1]):(r=A[0],l=A[1],c.invert&&(r=c.invert(r),l=c.invert(l)),r>l&&(d=r,r=l,l=d))),s&&c?[[n,r],[o,l]]:s?[n,o]:c&&[r,l])},e.clear=function(){return e.empty()||(u=[0,0],A=[0,0],i=a=null),e},e.empty=function(){return!!s&&u[0]==u[1]||!!c&&A[0]==A[1]},Kr.rebind(e,l,"on")};var Pl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Hl=na.format=sa.timeFormat,Fl=Hl.utc,Bl=Fl("%Y-%m-%dT%H:%M:%S.%LZ");Hl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qr:Bl,qr.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},qr.toString=Bl.toString,na.second=$e(function(e){return new oa(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),na.seconds=na.second.range,na.seconds.utc=na.second.utc.range,na.minute=$e(function(e){return new oa(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),na.minutes=na.minute.range,na.minutes.utc=na.minute.utc.range,na.hour=$e(function(e){var t=e.getTimezoneOffset()/60;return new oa(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),na.hours=na.hour.range,na.hours.utc=na.hour.utc.range,na.month=$e(function(e){return(e=na.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),na.months=na.month.range,na.months.utc=na.month.utc.range;var $l=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Vl=[[na.second,1],[na.second,5],[na.second,15],[na.second,30],[na.minute,1],[na.minute,5],[na.minute,15],[na.minute,30],[na.hour,1],[na.hour,3],[na.hour,6],[na.hour,12],[na.day,1],[na.day,2],[na.week,1],[na.month,1],[na.month,3],[na.year,1]],Ol=Hl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Mt]]),jl={range:function(e,t,n){return Kr.range(Math.ceil(e/n)*n,+t,n).map(Gr)},floor:Te,ceil:Te};Vl.year=na.year,na.scale=function(){return Yr(Kr.scale.linear(),Vl,Ol)};var Ul=Vl.map(function(e){return[e[0].utc,e[1]]}),Wl=Fl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Mt]]);Ul.year=na.year.utc,na.scale.utc=function(){return Yr(Kr.scale.linear(),Ul,Wl)},Kr.text=De(function(e){return e.responseText}),Kr.json=function(e,t){return Le(e,"application/json",Xr,t)},Kr.html=function(e,t){return Le(e,"text/html",Qr,t)},Kr.xml=De(function(e){return e.responseXML}),r=[],void 0===(i="function"==typeof(o=Kr)?o.apply(t,r):o)||(e.exports=i)}()},284:function(e,t){e.exports="data:image/gif;base64,R0lGODlhAgAYAIcAANDQ0Ovs7uzt7+3u8O7v8e/w8vDx8/Hy9Pn5+QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAP8ALAAAAAACABgAAAghABEIHEiwYMEDCA8YWMiwgMMCBAgMmDhAgIAAGAMAABAQADs="},285:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FFBEYNbyjf9QAAAAqSURBVAjXY2BAA8ePH/+PLsaIS4GlpSUjhiJsJsAUMuJSgKyQEZ8CGAAALJASrUlNPiEAAAAASUVORK5CYII="},286:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FAQEEApmIg1sAAAAIdEVYdENvbW1lbnQA9syWvwAAAClJREFUCNdjYEAD7e3t/9HFGHEpqKysZMRQhM0EmEJGXAqQFTLiUwADAGgBES2sBUVoAAAAAElFTkSuQmCC"},287:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.is_little_endian=n,t.get_model_array_attribute_metadata=o,t.cast_array_buffer=r,t.get_model_array_attribute=function(t){var i=e.Deferred();void 0===t.metadata?(t.metadataSuccess=a,o(t,i)):a(t);return i;function a(e){var t=[],o="",a=e.metadata,l=e.attribute,s="string"==a.attributes[l].type,c="&byteorder="+(n()?"little":"big");for(var u in s&&(c=""),a.dimensions)o="",o+=a.dimensions[u].begin,o+=":",o+=a.dimensions[u].end,t.push(o);t=t.join("|");var A=new XMLHttpRequest;A.open("GET",e.api_root+"models/"+e.mid+"/arraysets/"+e.aid+"/data?hyperchunks="+e.array+"/"+e.attribute+"/"+t+c),s||(A.responseType="arraybuffer"),A.success=e.success,A.attribute=e.attribute,A.metadata=a,A.isStringAttribute=s,A.onload=function(e){var t=this.response,n=this.metadata,o=this.metadata.attributes[this.attribute];if(1==n.dimensions.length)s=this.isStringAttribute?JSON.parse(this.responseText):r(t,o.type);else if(2==n.dimensions.length)for(var a=n.dimensions[0].end-n.dimensions[0].begin,l=n.dimensions[1].end-n.dimensions[1].begin,s=[],c=0;c!=a;++c)s.push(r(t,o.type,c*l,l));else window.alert("Can't handle array with "+n.dimensions.length+" dimensions.");this.success(s),i.resolve()},A.send()}};t.arrayset_metadata_cache={};function n(){return void 0===window.result&&(window.result=67305985===new Uint32Array(new Uint8Array([1,2,3,4]).buffer)[0]),window.result}function o(t,n){return e.ajax({url:t.api_root+"models/"+t.mid+"/arraysets/"+t.aid+"/metadata?arrays="+t.array,contentType:"application/json",success:function(e){t.metadata=e.arrays[0],void 0!==t.metadataSuccess?t.metadataSuccess(t):t.success(t)},error:function(e,n,o){t.error&&t.error(e,n,o)},always:function(){n.resolve()}})}function r(e,t,n,o){return"int32"==t?void 0!==n?new Int32Array(e,4*n,o):new Int32Array(e):"int16"==t?void 0!==n?new Int16Array(e,2*n,o):new Int16Array(e):"int8"==t?void 0!==n?new Int8Array(e,n,o):new Int8Array(e):"uint32"==t?void 0!==n?new Uint32Array(e,4*n,o):new Uint32Array(e):"uint16"==t?void 0!==n?new Uint16Array(e,2*n,o):new Uint16Array(e):"uint8"==t?void 0!==n?new Uint8Array(e,n,o):new Uint8Array(e):"float64"==t?void 0!==n?new Float64Array(e,8*n,o):new Float64Array(e):"float32"==t?void 0!==n?new Float32Array(e,4*n,o):new Float32Array(e):void console.error("Unknown array buffer type: "+t)}}).call(this,n(1))},289:function(e,t,n){var o=n(290);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,r);o.locals&&(e.exports=o.locals)},290:function(e,t,n){var o=n(38);(e.exports=n(36)(!1)).push([e.i,"/*\nIMPORTANT:\nIn order to preserve the uniform grid appearance, all cell styles need to have padding, margin and border sizes.\nNo built-in (selected, editable, highlight, flashing, invalid, loading, :focus) or user-specified CSS\nclasses should alter those!\n*/\n\n.slick-header.ui-state-default, .slick-headerrow.ui-state-default {\n  width: 100%;\n  overflow: hidden;\n  border-left: 0px;\n}\n\n.slick-header-columns, .slick-headerrow-columns {\n  position: relative;\n  white-space: nowrap;\n  cursor: default;\n  overflow: hidden;\n}\n\n.slick-header-column.ui-state-default {\n  position: relative;\n  display: inline-block;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  height: 16px;\n  line-height: 16px;\n  margin: 0;\n  padding: 4px;\n  border-right: 1px solid silver;\n  border-left: 0px;\n  border-top: 0px;\n  border-bottom: 0px;\n  float: left;\n}\n\n.slick-headerrow-column.ui-state-default {\n  padding: 4px;\n}\n\n.slick-header-column-sorted {\n  font-style: italic;\n}\n\n.slick-sort-indicator {\n  display: inline-block;\n  width: 8px;\n  height: 5px;\n  margin-left: 4px;\n  margin-top: 6px;\n  float: left;\n}\n\n.slick-sort-indicator-desc {\n  background: url("+o(n(291))+");\n}\n\n.slick-sort-indicator-asc {\n  background: url("+o(n(292))+");\n}\n\n.slick-resizable-handle {\n  position: absolute;\n  font-size: 0.1px;\n  display: block;\n  cursor: col-resize;\n  width: 4px;\n  right: 0px;\n  top: 0;\n  height: 100%;\n}\n\n.slick-sortable-placeholder {\n  background: silver;\n}\n\n.grid-canvas {\n  position: relative;\n  outline: 0;\n}\n\n.slick-row.ui-widget-content, .slick-row.ui-state-active {\n  position: absolute;\n  border: 0px;\n  width: 100%;\n}\n\n.slick-cell, .slick-headerrow-column {\n  position: absolute;\n  border: 1px solid transparent;\n  border-right: 1px dotted silver;\n  border-bottom-color: silver;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  z-index: 1;\n  padding: 1px 2px 2px 1px;\n  margin: 0;\n  white-space: nowrap;\n  cursor: default;\n}\n\n.slick-group {\n}\n\n.slick-group-toggle {\n  display: inline-block;\n}\n\n.slick-cell.highlighted {\n  background: lightskyblue;\n  background: rgba(0, 0, 255, 0.2);\n  -webkit-transition: all 0.5s;\n  -moz-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n}\n\n.slick-cell.flashing {\n  border: 1px solid red !important;\n}\n\n.slick-cell.editable {\n  z-index: 11;\n  overflow: visible;\n  background: white;\n  border-color: black;\n  border-style: solid;\n}\n\n.slick-cell:focus {\n  outline: none;\n}\n\n.slick-reorder-proxy {\n  display: inline-block;\n  background: blue;\n  opacity: 0.15;\n  filter: alpha(opacity = 15);\n  cursor: move;\n}\n\n.slick-reorder-guide {\n  display: inline-block;\n  height: 2px;\n  background: blue;\n  opacity: 0.7;\n  filter: alpha(opacity = 70);\n}\n\n.slick-selection {\n  z-index: 10;\n  position: absolute;\n  border: 2px dashed black;\n}\n",""])},291:function(e,t){e.exports="data:image/gif;base64,R0lGODlhDQAFAIcAAGGQzUD/QOPu+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAANAAUAAAgeAAUAGEgQgIAACBEKLHgwYcKFBh1KFNhQosOKEgMCADs="},292:function(e,t){e.exports="data:image/gif;base64,R0lGODlhDQAFAIcAAGGQzUD/QOPu+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAANAAUAAAgbAAMIDABgoEGDABIeRJhQ4cKGEA8KmEiRosGAADs="},293:function(e,t,n){var o=n(294);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,r);o.locals&&(e.exports=o.locals)},294:function(e,t,n){var o=n(38);(e.exports=n(36)(!1)).push([e.i,"/*\nIMPORTANT:\nIn order to preserve the uniform grid appearance, all cell styles need to have padding, margin and border sizes.\nNo built-in (selected, editable, highlight, flashing, invalid, loading, :focus) or user-specified CSS\nclasses should alter those!\n*/\n\n.slick-header-columns {\n  background: url("+o(n(284))+") repeat-x center bottom;\n  border-bottom: 1px solid silver;\n}\n\n.slick-header-column {\n  background: url("+o(n(284))+") repeat-x center bottom;\n  border-right: 1px solid silver;\n}\n\n.slick-header-column:hover, .slick-header-column-active {\n  background: white url("+o(n(295))+") repeat-x center bottom;\n}\n\n.slick-headerrow {\n  background: #fafafa;\n}\n\n.slick-headerrow-column {\n  background: #fafafa;\n  border-bottom: 0;\n  height: 100%;\n}\n\n.slick-row.ui-state-active {\n  background: #F5F7D7;\n}\n\n.slick-row {\n  position: absolute;\n  background: white;\n  border: 0px;\n  line-height: 20px;\n}\n\n.slick-row.selected {\n  z-index: 10;\n  background: #DFE8F6;\n}\n\n.slick-cell {\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n.slick-group {\n  border-bottom: 2px solid silver;\n}\n\n.slick-group-toggle {\n  width: 9px;\n  height: 9px;\n  margin-right: 5px;\n}\n\n.slick-group-toggle.expanded {\n  background: url("+o(n(296))+") no-repeat center center;\n}\n\n.slick-group-toggle.collapsed {\n  background: url("+o(n(297))+") no-repeat center center;\n}\n\n.slick-group-totals {\n  color: gray;\n  background: white;\n}\n\n.slick-cell.selected {\n  background-color: beige;\n}\n\n.slick-cell.active {\n  border-color: gray;\n  border-style: solid;\n}\n\n.slick-sortable-placeholder {\n  background: silver !important;\n}\n\n.slick-row.odd {\n  background: #fafafa;\n}\n\n.slick-row.ui-state-active {\n  background: #F5F7D7;\n}\n\n.slick-row.loading {\n  opacity: 0.5;\n  filter: alpha(opacity = 50);\n}\n\n.slick-cell.invalid {\n  border-color: red;\n  -moz-animation-duration: 0.2s;\n  -webkit-animation-duration: 0.2s;\n  -moz-animation-name: slickgrid-invalid-hilite;\n  -webkit-animation-name: slickgrid-invalid-hilite;  \n}\n\n@-moz-keyframes slickgrid-invalid-hilite {\n  from { box-shadow: 0 0 6px red; }\n  to { box-shadow: none; }\n}\n\n@-webkit-keyframes slickgrid-invalid-hilite {\n  from { box-shadow: 0 0 6px red; }\n  to { box-shadow: none; }\n}",""])},295:function(e,t){e.exports="data:image/gif;base64,R0lGODlhAgAWAIcAAKrM9tno++vz/QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAP8ALAAAAAACABYAAAgUAAUIHEiwoIAACBMqXMhwIQAAAQEAOw=="},296:function(e,t){e.exports="data:image/gif;base64,R0lGODlhCQAJAPcAAAFGeoCAgNXz/+v5/+v6/+z5/+36//L7//X8//j9/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAACQAJAAAIMwADCBxIUIDBgwIEChgwwECBAgQUFjBAkaJCABgxGlB4AGHCAAIQiBypEEECkScJqgwQEAA7"},297:function(e,t){e.exports="data:image/gif;base64,R0lGODlhCQAJAPcAAAFGeoCAgNXz/+v5/+v6/+z5/+36//L7//X8//j9/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAACQAJAAAIOAADCBxIUIDBgwIEChgwAECBAgQUFjAAQIABAwoBaNSIMYCAAwIqGlSIAEHFkiQTIBCgkqDLAAEBADs="},298:function(e,t,n){var o=n(299);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,r);o.locals&&(e.exports=o.locals)},299:function(e,t,n){(e.exports=n(36)(!1)).push([e.i,'.slick-column-name,\n.slick-sort-indicator {\n  /**\n   * This makes all "float:right" elements after it that spill over to the next line\n   * display way below the lower boundary of the column thus hiding them.\n   */\n  display: inline-block;\n  float: left;\n  margin-bottom: 100px;\n}\n\n.slick-header-button {\n  display: inline-block;\n  float: right;\n  vertical-align: top;\n  margin: 1px;\n  /**\n  * This makes all "float:right" elements after it that spill over to the next line\n  * display way below the lower boundary of the column thus hiding them.\n  */\n  margin-bottom: 100px;\n  height: 15px;\n  width: 15px;\n  background-repeat: no-repeat;\n  background-position: center center;\n  cursor: pointer;\n}\n\n.slick-header-button-hidden {\n  width: 0;\n\n  -webkit-transition: 0.2s width;\n  -ms-transition: 0.2s width;\n  transition: 0.2s width;\n}\n\n.slick-header-column:hover > .slick-header-button {\n  width: 15px;\n}',""])},300:function(e,t,n){var o=n(301);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,r);o.locals&&(e.exports=o.locals)},301:function(e,t,n){var o=n(38);(e.exports=n(36)(!1)).push([e.i,'/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n/* Absolute positioning SlickGrid container to get it to fit the box completely */\n#timeseries-table-slickgrid {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n}\n\n.ui-widget {\n\tfont-family: helvetica,arial,sans-serif;\n}\n.slick-header-columns,\n.slick-header-column,\n.slick-header-column:hover, \n.slick-header-column-active\n{\n  background-image: none;\n}\n.slick-header-column.headerSimId.selected {\n\tbackground-color: #888888;\n\tcolor: white;\n}\n.slick-header-column.headerInput.selected {\n\tbackground-color: #3CA654;\n\tcolor: white;\n}\n.slick-header {\n\tbackground-color: transparent;\n\tbackground-image: none;\n}\n.headerSimId,\n.headerOther {\n\tbackground-color: transparent;\n}\n.rowSimId,\n.rowOther {\n\tbackground-color: transparent;\n}\n.rowSimId.selected,\n.rowOther.selected {\n\tbackground-color: #DDDDDD;\n}\n.headerInput {\n    background-color: #EEFFE0;\n}\n.rowInput {\n\tbackground-color: #C7E9C0;\n}\n.rowInput.selected {\n\tbackground-color: #3CA654;\n\tcolor: white;\n}\n.headerOutput {\n    background-color: #EEEEFF;\n}\n.rowOutput {\n\tbackground-color: #DBD9EB;\n}\n.rowOutput.selected {\n\tbackground-color: #7767B0;\n\tcolor: white;\n}\n\n/* Removing zebra striping */\n.slick-row[row$="1"], .slick-row[row$="3"], .slick-row[row$="5"], .slick-row[row$="7"], .slick-row[row$="9"] {\n    background-color: transparent;\n}\n.slick-row.odd {\n\tbackground-color: white;\n}\n\n.slick-cell,\n.slick-header-column\n{\n\tcolor: #666655;\n\tfont-size: small;\n}\n.slick-header-column {\n\tfont-weight: bold;\n}\n.highlight {\n\tpadding: 0;\n\theight: auto !important;\n}\n.highlightWrapper {\n  color: white;\n\tpadding: 2px 4px 3px 4px;\n}\n.highlightWrapper.light {\n\t/*color: #666655;*/\n\tcolor: black;\n}\n/* Stripe backgrounds generated using http://www.stripegenerator.com */\n.highlightWrapper.null {\n\tbackground: #DDDDDD url('+o(n(302))+") !important;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.selected .highlightWrapper.null {\n\tbackground-image: url("+o(n(303))+") !important;\n}\n.highlight .highlightWrapper.null {\n\tposition: static;\n}\n\n/* Removing borders around cells */\n.slick-cell, .slick-headerrow-column {\n\tborder-width: 0px;\n}\n.slick-header-columns {\n\tborder-bottom-width: 0px;\n}\n\n/* Styling sort controls */\n.icon-sort-off {\n\tborder: 1px solid transparent;\n}\n.slick-header-column:hover .icon-sort-off {\n\tborder: 1px solid transparent;\n\tbackground: transparent url("+o(n(285))+") no-repeat center center;\n}\n.icon-sort-off:hover {\n\tborder: 1px solid #C7C7C7 !important;\n}\n.icon-sort-ascending {\n\tborder: 1px solid transparent;\n\tbackground: transparent url("+o(n(286))+") no-repeat center center;\n}\n.icon-sort-descending {\n\tborder: 1px solid transparent;\n\tbackground: transparent url("+o(n(304))+") no-repeat center center;\n}\n.icon-sort-ascending:hover,\n.icon-sort-descending:hover\n{\n\tborder: 1px solid #878787;\n}\n\n/* Alex making buttons always have space */\n.slick-column-name, \n.slick-sort-indicator\n{\n\tdisplay: inline;\n\tfloat: none;\n\tmargin-bottom: 0px;\n}\n.slick-header-button {\n\tfloat: none;\n\tposition: absolute;\n\ttop: 3px;\n  right: 3px;\n}\n.slick-header-button.image-test-class {\n  right: 20px;\n}\n.slick-header-column {\n\tpadding-right: 23px !important;\n}\n.slick-row.nullRow .slick-cell,\n.slick-row.nullRow .slick-cell .highlightWrapper\n{\n\tbackground-color: white !important;\n\tcolor: #666655 !important;\n}\n.slick-row.nullRow .slick-cell.selected,\n.slick-row.nullRow .slick-cell.selected .highlightWrapper\n{\n\tbackground-color: #DDDDDD !important;\n\tcolor: #666655 !important;\n}\n.slick-row.hiddenRow .slick-cell,\n.slick-row.hiddenRow .slick-cell .highlightWrapper\n{\n\tbackground-color: white !important;\n\tcolor: #c7c7c7 !important;\n}\n.slick-row.hiddenRow .slick-cell.selected,\n.slick-row.hiddenRow .slick-cell.selected .highlightWrapper\n{\n\tbackground-color: #F5F5DC !important;\n\tcolor: #c7c7c7 !important;\n}",""])},302:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAAAH0lEQVQImSXIMQEAMAwCMOpfC1jMjuVM2gKHJNuC3w87vxULvAnaoQAAAABJRU5ErkJggg=="},303:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAAAIklEQVQImWNcu3atgYEBAwMD4927dxkYGC5cuMAEoQwMDACgZgqjfO75sQAAAABJRU5ErkJggg=="},304:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FAQECOX7ZzfkAAAAIdEVYdENvbW1lbnQA9syWvwAAAC5JREFUCNdjbG9v/89AADAyMDAw4FNYWVnJyAjjYFNYWVnJCDcJm0KYAqwAm4kAaJURLWsFPcIAAAAASUVORK5CYII="},305:function(e,t,n){"use strict";(function(e){!function(e){e.fn.drag=function(t,n,o){var r="string"==typeof t?t:"",i=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==r.indexOf("drag")&&(r="drag"+r),o=(t==i?n:o)||{},i?this.bind(r,o,i):this.trigger(r)};var t=e.event,n=t.special,o=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,o.datakey),r=t.data||{};n.related+=1,e.each(o.defaults,function(e,t){void 0!==r[e]&&(n[e]=r[e])})},remove:function(){e.data(this,o.datakey).related-=1},setup:function(){if(!e.data(this,o.datakey)){var n=e.extend({related:0},o.defaults);e.data(this,o.datakey,n),t.add(this,"touchstart mousedown",o.init,n),this.attachEvent&&this.attachEvent("ondragstart",o.dontstart)}},teardown:function(){(e.data(this,o.datakey)||{}).related||(e.removeData(this,o.datakey),t.remove(this,"touchstart mousedown",o.init),o.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",o.dontstart))},init:function(r){if(!o.touched){var i,a=r.data;if(!(0!=r.which&&a.which>0&&r.which!=a.which)&&!e(r.target).is(a.not)&&(!a.handle||e(r.target).closest(a.handle,r.currentTarget).length)&&(o.touched="touchstart"==r.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[o.interaction(this,a)],a.target=r.target,a.pageX=r.pageX,a.pageY=r.pageY,a.dragging=null,i=o.hijack(r,"draginit",a),a.propagates))return(i=o.flatten(i))&&i.length&&(a.interactions=[],e.each(i,function(){a.interactions.push(o.interaction(this,a))})),a.propagates=a.interactions.length,!1!==a.drop&&n.drop&&n.drop.handler(r,a),o.textselect(!1),o.touched?t.add(o.touched,"touchmove touchend",o.handler,a):t.add(document,"mousemove mouseup",o.handler,a),!(!o.touched||a.live)&&void 0}},interaction:function(t,n){var r=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new o.callback,droppable:[],offset:r}},handler:function(r){var i=r.data;switch(r.type){case!i.dragging&&"touchmove":r.preventDefault();case!i.dragging&&"mousemove":if(Math.pow(r.pageX-i.pageX,2)+Math.pow(r.pageY-i.pageY,2)<Math.pow(i.distance,2))break;r.target=i.target,o.hijack(r,"dragstart",i),i.propagates&&(i.dragging=!0);case"touchmove":r.preventDefault();case"mousemove":if(i.dragging){if(o.hijack(r,"drag",i),i.propagates){!1!==i.drop&&n.drop&&n.drop.handler(r,i);break}r.type="mouseup"}case"touchend":case"mouseup":default:o.touched?t.remove(o.touched,"touchmove touchend",o.handler):t.remove(document,"mousemove mouseup",o.handler),i.dragging&&(!1!==i.drop&&n.drop&&n.drop.handler(r,i),o.hijack(r,"dragend",i)),o.textselect(!0),!1===i.click&&i.dragging&&e.data(i.mousedown,"suppress.click",(new Date).getTime()+5),i.dragging=o.touched=!1}},hijack:function(n,r,i,a,l){if(i){var s,c,u,A={event:n.originalEvent,type:n.type},d=r.indexOf("drop")?"drag":"drop",h=a||0,f=isNaN(a)?i.interactions.length:a;n.type=r,n.originalEvent=null,i.results=[];do{if(c=i.interactions[h]){if("dragend"!==r&&c.cancelled)continue;u=o.properties(n,i,c),c.results=[],e(l||c[d]||i.droppable).each(function(a,l){if(u.target=l,n.isPropagationStopped=function(){return!1},!1===(s=l?t.dispatch.call(l,n,u):null)?("drag"==d&&(c.cancelled=!0,i.propagates-=1),"drop"==r&&(c[d][a]=null)):"dropinit"==r&&c.droppable.push(o.element(s)||l),"dragstart"==r&&(c.proxy=e(o.element(s)||c.drag)[0]),c.results.push(s),delete n.result,"dropinit"!==r)return s}),i.results[h]=o.flatten(c.results),"dropinit"==r&&(c.droppable=o.flatten(c.droppable)),"dragstart"!=r||c.cancelled||u.update()}}while(++h<f);return n.type=A.type,n.originalEvent=A.event,o.flatten(i.results)}},properties:function(e,t,n){var r=n.callback;return r.drag=n.drag,r.proxy=n.proxy||n.drag,r.startX=t.pageX,r.startY=t.pageY,r.deltaX=e.pageX-t.pageX,r.deltaY=e.pageY-t.pageY,r.originalX=n.offset.left,r.originalY=n.offset.top,r.offsetX=r.originalX+r.deltaX,r.offsetY=r.originalY+r.deltaY,r.drop=o.flatten((n.drop||[]).slice()),r.available=o.flatten((n.droppable||[]).slice()),r},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?o.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",o.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};o.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var r=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return r.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var i=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var o=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;o&&e.each(i.props,function(e,n){t[n]=o[n]})}return t}};n.draginit=n.dragstart=n.dragend=o}(e)}).call(this,n(1))},306:function(e,t,n){"use strict";(function(e){!function(t){function n(){var e=!1,t=!1;this.stopPropagation=function(){e=!0},this.isPropagationStopped=function(){return e},this.stopImmediatePropagation=function(){t=!0},this.isImmediatePropagationStopped=function(){return t}}function o(){this.__nonDataRow=!0}function r(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function i(){this.__groupTotals=!0,this.group=null,this.initialized=!1}function a(){var e=null;this.isActive=function(t){return t?e===t:null!==e},this.activate=function(t){if(t!==e){if(null!==e)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t}},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return!e||e.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!e||e.cancelCurrentEdit()}}e.extend(!0,window,{Slick:{Event:function(){var e=[];this.subscribe=function(t){e.push(t)},this.unsubscribe=function(t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},this.notify=function(t,o,r){var i;o=o||new n,r=r||this;for(var a=0;a<e.length&&!o.isPropagationStopped()&&!o.isImmediatePropagationStopped();a++)i=e[a].call(r,o,t);return i}},EventData:n,EventHandler:function(){var e=[];this.subscribe=function(t,n){return e.push({event:t,handler:n}),t.subscribe(n),this},this.unsubscribe=function(t,n){for(var o=e.length;o--;)if(e[o].event===t&&e[o].handler===n)return e.splice(o,1),void t.unsubscribe(n);return this},this.unsubscribeAll=function(){for(var t=e.length;t--;)e[t].event.unsubscribe(e[t].handler);return e=[],this}},Range:function(e,t,n,o){void 0===n&&void 0===o&&(n=e,o=t);this.fromRow=Math.min(e,n),this.fromCell=Math.min(t,o),this.toRow=Math.max(e,n),this.toCell=Math.max(t,o),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}},NonDataRow:o,Group:r,GroupTotals:i,EditorLock:a,GlobalEditorLock:new a}}),r.prototype=new o,r.prototype.equals=function(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title},i.prototype=new o}()}).call(this,n(1))},307:function(module,exports,__webpack_require__){"use strict";(function(jQuery){
/**
 * @license
 * (c) 2009-2013 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.2
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */
if(void 0===jQuery)throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";!function($){var scrollbarDimensions,maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row"},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent;function init(){if(($container=$(container)).length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var e=0;e<columns.length;e++){var t=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[t.id]=e,t.minWidth&&t.width<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&t.width>t.maxWidth&&(t.width=t.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),($headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller)).width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),($viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container)).css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(e){return $(e.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&$canvas.bind("mousewheel",handleMouseWheel))}function registerPlugin(e){plugins.unshift(e),e.init(self)}function unregisterPlugin(e){for(var t=plugins.length;t>=0;t--)if(plugins[t]===e){plugins[t].destroy&&plugins[t].destroy(),plugins.splice(t,1);break}}function setSelectionModel(e){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),(selectionModel=e)&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}function getHeadersWidth(){for(var e=0,t=0,n=columns.length;t<n;t++){e+=columns[t].width}return e+=scrollbarDimensions.width,Math.max(e,viewportW)+1e3}function getCanvasWidth(){for(var e=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,t=0,n=columns.length;n--;)t+=columns[n].width;return options.fullWidthRows?Math.max(t,e):t}function updateCanvasWidth(e){var t=canvasWidth;(canvasWidth=getCanvasWidth())!=t&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),(canvasWidth!=t||e)&&applyColumnWidths()}function disableSelection(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);;){var o=2*e;if(n.css("height",o),o>t||n.height()!==o)break;e=o}return n.remove(),e}function bindAncestorScrollEvents(){for(var e=$canvas[0];(e=e.parentNode)!=document.body&&null!=e;)if(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight){var t=$(e);$boundAncestors=$boundAncestors?$boundAncestors.add(t):t,t.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.unbind("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(e,t,n){if(initialized){var o=getColumnIndex(e);if(null!=o){var r=columns[o],i=$headers.children().eq(o);i&&(void 0!==t&&(columns[o].name=t),void 0!==n&&(columns[o].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:i[0],column:r}),i.attr("title",n||"").children().eq(0).html(t),trigger(self.onHeaderCellRendered,{node:i[0],column:r}))}}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(e){var t=getColumnIndex(e),n=$headerRow.children().eq(t);return n&&n[0]}function createColumnHeaders(){function e(){$(this).addClass("ui-state-hover")}function t(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:e})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:e})}),$headerRow.empty();for(var n=0;n<columns.length;n++){var o=columns[n],r=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+o.name+"</span>").width(o.width-headerColumnWidthDiff).attr("id",""+uid+o.id).attr("title",o.toolTip||"").data("column",o).addClass(o.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||o.sortable)&&r.on("mouseenter",e).on("mouseleave",t),o.sortable&&(r.addClass("slick-header-sortable"),r.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:r[0],column:o}),options.showHeaderRow){var i=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",o).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:i[0],column:o})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){if(e.metaKey=e.metaKey||e.ctrlKey,!$(e.target).hasClass("slick-resizable-handle")){var t=$(e.target).closest(".slick-header-column");if(t.length){var n=t.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var o=null,r=0;r<sortColumns.length;r++)if(sortColumns[r].columnId==n.id){(o=sortColumns[r]).sortAsc=!o.sortAsc;break}e.metaKey&&options.multiColumnSort?o&&sortColumns.splice(r,1):((e.shiftKey||e.metaKey)&&options.multiColumnSort||(sortColumns=[]),o?0==sortColumns.length&&sortColumns.push(o):(o={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(o))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(e){return{sortCol:columns[getColumnIndex(e.columnId)],sortAsc:e.sortAsc}})},e):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:o.sortAsc},e)}}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(e,t){t.placeholder.width(t.helper.outerWidth()-headerColumnWidthDiff),$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(getEditorLock().commitCurrentEdit()){for(var t=$headers.sortable("toArray"),n=[],o=0;o<t.length;o++)n.push(columns[getColumnIndex(t[o].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),e.stopPropagation(),setupColumnResize()}else $(this).sortable("cancel")}})}function setupColumnResize(){var e,t,n,o,r,i,a,l;(o=$headers.children()).find(".slick-resizable-handle").remove(),o.each(function(e,t){columns[e].resizable&&(void 0===a&&(a=e),l=e)}),void 0!==a&&o.each(function(s,c){s<a||options.forceFitColumns&&s>=l||($(c),$("<div class='slick-resizable-handle' />").appendTo(c).bind("dragstart",function(a,l){if(!getEditorLock().commitCurrentEdit())return!1;n=a.pageX,$(this).parent().addClass("slick-header-column-active");var c=null,u=null;if(o.each(function(e,t){columns[e].previousWidth=$(t).outerWidth()}),options.forceFitColumns)for(c=0,u=0,e=s+1;e<o.length;e++)(t=columns[e]).resizable&&(null!==u&&(t.maxWidth?u+=t.maxWidth-t.previousWidth:u=null),c+=t.previousWidth-Math.max(t.minWidth||0,absoluteColumnMinWidth));var A=0,d=0;for(e=0;e<=s;e++)(t=columns[e]).resizable&&(null!==d&&(t.maxWidth?d+=t.maxWidth-t.previousWidth:d=null),A+=t.previousWidth-Math.max(t.minWidth||0,absoluteColumnMinWidth));null===c&&(c=1e5),null===A&&(A=1e5),null===u&&(u=1e5),null===d&&(d=1e5),i=n+Math.min(c,d),r=n-Math.min(A,u)}).bind("drag",function(a,l){var c,u,A=Math.min(i,Math.max(r,a.pageX))-n;if(A<0){for(u=A,e=s;e>=0;e--)(t=columns[e]).resizable&&(c=Math.max(t.minWidth||0,absoluteColumnMinWidth),u&&t.previousWidth+u<c?(u+=t.previousWidth-c,t.width=c):(t.width=t.previousWidth+u,u=0));if(options.forceFitColumns)for(u=-A,e=s+1;e<o.length;e++)(t=columns[e]).resizable&&(u&&t.maxWidth&&t.maxWidth-t.previousWidth<u?(u-=t.maxWidth-t.previousWidth,t.width=t.maxWidth):(t.width=t.previousWidth+u,u=0))}else{for(u=A,e=s;e>=0;e--)(t=columns[e]).resizable&&(u&&t.maxWidth&&t.maxWidth-t.previousWidth<u?(u-=t.maxWidth-t.previousWidth,t.width=t.maxWidth):(t.width=t.previousWidth+u,u=0));if(options.forceFitColumns)for(u=-A,e=s+1;e<o.length;e++)(t=columns[e]).resizable&&(c=Math.max(t.minWidth||0,absoluteColumnMinWidth),u&&t.previousWidth+u<c?(u+=t.previousWidth-c,t.width=c):(t.width=t.previousWidth+u,u=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(n,r){var i;for($(this).parent().removeClass("slick-header-column-active"),e=0;e<o.length;e++)t=columns[e],i=$(o[e]).outerWidth(),t.previousWidth!==i&&t.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})}))})}function getVBoxDelta(e){var t=0;return $.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],function(n,o){t+=parseFloat(e.css(o))||0}),t}function measureCellPaddingAndBorder(){var e,t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];e=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,"border-box"!=e.css("box-sizing")&&"border-box"!=e.css("-moz-box-sizing")&&"border-box"!=e.css("-webkit-box-sizing")&&($.each(t,function(t,n){headerColumnWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){headerColumnHeightDiff+=parseFloat(e.css(n))||0})),e.remove();var o=$("<div class='slick-row' />").appendTo($canvas);e=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(o),cellWidthDiff=cellHeightDiff=0,"border-box"!=e.css("box-sizing")&&"border-box"!=e.css("-moz-box-sizing")&&"border-box"!=e.css("-webkit-box-sizing")&&($.each(t,function(t,n){cellWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){cellHeightDiff+=parseFloat(e.css(n))||0})),o.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var e=options.rowHeight-cellHeightDiff,t=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+e+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],n=0;n<columns.length;n++)t.push("."+uid+" .l"+n+" { }"),t.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=t.join(" "):$style[0].appendChild(document.createTextNode(t.join(" ")))}function getColumnCssRules(e){if(!stylesheet){for(var t=document.styleSheets,n=0;n<t.length;n++)if((t[n].ownerNode||t[n].owningElement)==$style[0]){stylesheet=t[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var o,r,i=stylesheet.cssRules||stylesheet.rules;for(n=0;n<i.length;n++){var a=i[n].selectorText;(o=/\.l\d+/.exec(a))?(r=parseInt(o[0].substr(2,o[0].length-2),10),columnCssRulesL[r]=i[n]):(o=/\.r\d+/.exec(a))&&(r=parseInt(o[0].substr(2,o[0].length-2),10),columnCssRulesR[r]=i[n])}}return{left:columnCssRulesL[e],right:columnCssRulesR[e]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var e=plugins.length;e--;)unregisterPlugin(plugins[e]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(e,t,n){return n=n||new Slick.EventData,(t=t||{}).grid=self,e.notify(t,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,n,o=[],r=0,i=0,a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(e=0;e<columns.length;e++)t=columns[e],o.push(t.width),i+=t.width,t.resizable&&(r+=t.width-Math.max(t.minWidth,absoluteColumnMinWidth));for(n=i;i>a&&r;){var l=(i-a)/r;for(e=0;e<columns.length&&i>a;e++){t=columns[e];var s=o[e];if(!(!t.resizable||s<=t.minWidth||s<=absoluteColumnMinWidth)){var c=Math.max(t.minWidth,absoluteColumnMinWidth),u=Math.floor(l*(s-c))||1;i-=u=Math.min(u,s-c),r-=u,o[e]-=u}}if(n<=i)break;n=i}for(n=i;i<a;){var A=a/i;for(e=0;e<columns.length&&i<a;e++){t=columns[e];var d,h=o[e];i+=d=!t.resizable||t.maxWidth<=h?0:Math.min(Math.floor(A*h)-h,t.maxWidth-h||1e6)||1,o[e]+=d}if(n>=i)break;n=i}var f=!1;for(e=0;e<columns.length;e++)columns[e].rerenderOnResize&&columns[e].width!=o[e]&&(f=!0),columns[e].width=o[e];applyColumnHeaderWidths(),updateCanvasWidth(!0),f&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var e,t=0,n=$headers.children(),o=n.length;t<o;t++)(e=$(n[t])).width()!==columns[t].width-headerColumnWidthDiff&&e.width(columns[t].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var e,t,n=0,o=0;o<columns.length;o++)e=columns[o].width,(t=getColumnCssRules(o)).left.style.left=n+"px",t.right.style.right=canvasWidth-n-e+"px",n+=columns[o].width}function setSortColumn(e,t){setSortColumns([{columnId:e,sortAsc:t}])}function setSortColumns(e){sortColumns=e;var t=$headers.children();t.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(e,n){null==n.sortAsc&&(n.sortAsc=!0);var o=getColumnIndex(n.columnId);null!=o&&t.eq(o).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,t){selectedRows=[];for(var n={},o=0;o<t.length;o++)for(var r=t[o].fromRow;r<=t[o].toRow;r++){n[r]||(selectedRows.push(r),n[r]={});for(var i=t[o].fromCell;i<=t[o].toCell;i++)canCellBeSelected(r,i)&&(n[r][columns[i].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var e=0,t=0,n=columns.length;t<n;t++)columnPosLeft[t]=e,columnPosRight[t]=e+columns[t].width,e+=columns[t].width}function setColumns(e){columns=e,columnsById={};for(var t=0;t<columns.length;t++){var n=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[n.id]=t,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(e){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==e.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,e),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(e,t){data=e,invalidateAllRows(),updateRowCount(),t&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0)}function getDataItem(e){return data.getItem?data.getItem(e):data[e]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(e){options.showTopPanel!=e&&(options.showTopPanel=e,e?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(e){options.showHeaderRow!=e&&(options.showHeaderRow=e,e?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(e){return options.rowHeight*e-offset}function getRowFromPosition(e){return Math.floor((e+offset)/options.rowHeight)}function scrollTo(e){e=Math.max(e,0),e=Math.min(e,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var t=offset;page=Math.min(n-1,Math.floor(e/ph));var o=e-(offset=Math.round(page*cj));offset!=t&&(cleanupRows(getVisibleRange(o)),updateRowPositions());prevScrollTop!=o&&(vScrollDir=prevScrollTop+t<o+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=o,trigger(self.onViewportChanged,{}))}function defaultFormatter(e,t,n,o,r){return null==n?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e),o=n&&n.columns&&(n.columns[t.id]||n.columns[getColumnIndex(t.id)]);return o&&o.formatter||n&&n.formatter||t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||options.defaultFormatter}function getEditor(e,t){var n=columns[t],o=data.getItemMetadata&&data.getItemMetadata(e),r=o&&o.columns;return r&&r[n.id]&&void 0!==r[n.id].editor?r[n.id].editor:r&&r[t]&&void 0!==r[t].editor?r[t].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(e,t){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(e,t):e[t.field]}function appendRowHtml(e,t,n,o){var r=getDataItem(t),i="slick-row"+(t<o&&!r?" loading":"")+(t===activeRow?" active":"")+(t%2==1?" odd":" even");r||(i+=" "+options.addNewRowCssClass);var a,l,s=data.getItemMetadata&&data.getItemMetadata(t);s&&s.cssClasses&&(i+=" "+s.cssClasses),e.push("<div class='ui-widget-content "+i+"' style='top:"+getRowTop(t)+"px'>");for(var c=0,u=columns.length;c<u;c++){if(l=columns[c],a=1,s&&s.columns){var A=s.columns[l.id]||s.columns[c];"*"===(a=A&&A.colspan||1)&&(a=u-c)}if(columnPosRight[Math.min(u-1,c+a-1)]>n.leftPx){if(columnPosLeft[c]>n.rightPx)break;appendCellHtml(e,t,c,a,r)}a>1&&(c+=a-1)}e.push("</div>")}function appendCellHtml(e,t,n,o,r){var i=columns[n],a="slick-cell l"+n+" r"+Math.min(columns.length-1,n+o-1)+(i.cssClass?" "+i.cssClass:"");for(var l in t===activeRow&&n===activeCell&&(a+=" active"),cellCssClasses)cellCssClasses[l][t]&&cellCssClasses[l][t][i.id]&&(a+=" "+cellCssClasses[l][t][i.id]);if(e.push("<div class='"+a+"'>"),r){var s=getDataItemValueForColumn(r,i);e.push(getFormatter(t,i)(t,n,s,i,r))}e.push("</div>"),rowsCache[t].cellRenderQueue.push(n),rowsCache[t].cellColSpans[n]=o}function cleanupRows(e){for(var t in rowsCache)(t=parseInt(t,10))!==activeRow&&(t<e.top||t>e.bottom)&&removeRowFromCache(t)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){for(var e in currentEditor&&makeActiveCellNormal(),rowsCache)removeRowFromCache(e)}function removeRowFromCache(e){var t=rowsCache[e];t&&(rowNodeFromLastMouseWheelEvent==t.rowNode?(t.rowNode.style.display="none",zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent):$canvas[0].removeChild(t.rowNode),delete rowsCache[e],delete postProcessedRows[e],renderedRows--,counter_rows_removed++)}function invalidateRows(e){var t,n;if(e&&e.length)for(vScrollDir=0,t=0,n=e.length;t<n;t++)currentEditor&&activeRow===e[t]&&makeActiveCellNormal(),rowsCache[e[t]]&&removeRowFromCache(e[t])}function invalidateRow(e){invalidateRows([e])}function updateCell(e,t){var n=getCellNode(e,t);if(n){var o=columns[t],r=getDataItem(e);currentEditor&&activeRow===e&&activeCell===t?currentEditor.loadValue(r):(n.innerHTML=r?getFormatter(e,o)(e,t,getDataItemValueForColumn(r,o),o,r):"",invalidatePostProcessingResults(e))}}function updateRow(e){var t=rowsCache[e];if(t){ensureCellNodesInRowsCache(e);var n=getDataItem(e);for(var o in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(o)){var r=columns[o|=0],i=t.cellNodesByColumnIdx[o];e===activeRow&&o===activeCell&&currentEditor?currentEditor.loadValue(n):i.innerHTML=n?getFormatter(e,r)(e,o,getDataItemValueForColumn(n,r),r,n):""}invalidatePostProcessingResults(e)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*getDataLengthIncludingAddNew():getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render())}function updateRowCount(){if(initialized){var e=getDataLengthIncludingAddNew(),t=e+(options.leaveSpaceForNewRows?numVisibleRows-1:0),o=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&t*options.rowHeight>viewportH,makeActiveCellNormal();var r=e-1;for(var i in rowsCache)i>=r&&removeRowFromCache(i);activeCellNode&&activeRow>r&&resetActiveCell();var a=h;(th=Math.max(options.rowHeight*t,viewportH-scrollbarDimensions.height))<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(ph=(h=maxSupportedCssHeight)/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==a&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var l=scrollTop+offset<=th-viewportH;0==th||0==scrollTop?page=offset=0:scrollTo(l?scrollTop+offset:th-viewportH),h!=a&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&o!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(e,t){return null==e&&(e=scrollTop),null==t&&(t=scrollLeft),{top:getRowFromPosition(e),bottom:getRowFromPosition(e+viewportH)+1,leftPx:t,rightPx:t+viewportW}}function getRenderedRange(e,t){var n=getVisibleRange(e,t),o=Math.round(viewportH/options.rowHeight);return-1==vScrollDir?(n.top-=o,n.bottom+=3):1==vScrollDir?(n.top-=3,n.bottom+=o):(n.top-=3,n.bottom+=3),n.top=Math.max(0,n.top),n.bottom=Math.min(getDataLengthIncludingAddNew()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(e){var t=rowsCache[e];if(t&&t.cellRenderQueue.length)for(var n=t.rowNode.lastChild;t.cellRenderQueue.length;){var o=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[o]=n,n=n.previousSibling}}function cleanUpCells(e,t){var n,o=rowsCache[t],r=[];for(var i in o.cellNodesByColumnIdx)if(o.cellNodesByColumnIdx.hasOwnProperty(i)){i|=0;var a=o.cellColSpans[i];(columnPosLeft[i]>e.rightPx||columnPosRight[Math.min(columns.length-1,i+a-1)]<e.leftPx)&&(t==activeRow&&i==activeCell||r.push(i))}for(;null!=(n=r.pop());)o.rowNode.removeChild(o.cellNodesByColumnIdx[n]),delete o.cellColSpans[n],delete o.cellNodesByColumnIdx[n],postProcessedRows[t]&&delete postProcessedRows[t][n],0}function cleanUpAndRenderCells(e){for(var t,n,o,r=[],i=[],a=e.top,l=e.bottom;a<=l;a++)if(t=rowsCache[a]){ensureCellNodesInRowsCache(a),cleanUpCells(e,a),n=0;var s=data.getItemMetadata&&data.getItemMetadata(a);s=s&&s.columns;for(var c=getDataItem(a),u=0,A=columns.length;u<A&&!(columnPosLeft[u]>e.rightPx);u++)if(null==(o=t.cellColSpans[u])){if(o=1,s){var d=s[columns[u].id]||s[u];"*"===(o=d&&d.colspan||1)&&(o=A-u)}columnPosRight[Math.min(A-1,u+o-1)]>e.leftPx&&(appendCellHtml(r,a,u,o,c),n++),u+=o>1?o-1:0}else u+=o>1?o-1:0;n&&(n,i.push(a))}if(r.length){var h,f,p=document.createElement("div");for(p.innerHTML=r.join("");null!=(h=i.pop());){var g;for(t=rowsCache[h];null!=(g=t.cellRenderQueue.pop());)f=p.lastChild,t.rowNode.appendChild(f),t.cellNodesByColumnIdx[g]=f}}}function renderRows(e){for(var t=$canvas[0],n=[],o=[],r=!1,i=getDataLength(),a=e.top,l=e.bottom;a<=l;a++)rowsCache[a]||(renderedRows++,o.push(a),rowsCache[a]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,a,e,i),activeCellNode&&activeRow===a&&(r=!0),counter_rows_rendered++);if(o.length){var s=document.createElement("div");s.innerHTML=n.join("");for(a=0,l=o.length;a<l;a++)rowsCache[o[a]].rowNode=t.appendChild(s.firstChild);r&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(e){delete postProcessedRows[e],postProcessFromRow=Math.min(postProcessFromRow,e),postProcessToRow=Math.max(postProcessToRow,e),startPostProcessing()}function updateRowPositions(){for(var e in rowsCache)rowsCache[e].rowNode.style.top=getRowTop(e)+"px"}function render(){if(initialized){var e=getVisibleRange(),t=getRenderedRange();cleanupRows(t),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(t),renderRows(t),postProcessFromRow=e.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,e.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderRowScroll(){var e=$headerRowScroller[0].scrollLeft;e!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=e)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var e=Math.abs(scrollTop-prevScrollTop),t=Math.abs(scrollLeft-prevScrollLeft);if(t&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft),e)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,e<viewportH)scrollTo(scrollTop+offset);else{var o=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),o!=(offset=Math.round(page*cj))&&invalidateAllRows()}(t||e)&&(h_render&&clearTimeout(h_render),(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)&&(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{}))),trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){for(var e=getDataLength();postProcessFromRow<=postProcessToRow;){var t=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,n=rowsCache[t];if(n&&!(t>=e)){for(var o in postProcessedRows[t]||(postProcessedRows[t]={}),ensureCellNodesInRowsCache(t),n.cellNodesByColumnIdx)if(n.cellNodesByColumnIdx.hasOwnProperty(o)){var r=columns[o|=0];if(r.asyncPostRender&&!postProcessedRows[t][o]){var i=n.cellNodesByColumnIdx[o];i&&r.asyncPostRender(i,t,getDataItem(t),r),postProcessedRows[t][o]=!0}}return void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function updateCellCssStylesOnRenderedRows(e,t){var n,o,r,i;for(var a in rowsCache){if(i=t&&t[a],r=e&&e[a],i)for(o in i)r&&i[o]==r[o]||(n=getCellNode(a,getColumnIndex(o)))&&$(n).removeClass(i[o]);if(r)for(o in r)i&&i[o]==r[o]||(n=getCellNode(a,getColumnIndex(o)))&&$(n).addClass(r[o])}}function addCellCssStyles(e,t){if(cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,null),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function removeCellCssStyles(e){cellCssClasses[e]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[e]),delete cellCssClasses[e],trigger(self.onCellCssStylesChanged,{key:e,hash:null}))}function setCellCssStyles(e,t){var n=cellCssClasses[e];cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,n),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function getCellCssStyles(e){return cellCssClasses[e]}function flashCell(e,t,n){if(n=n||100,rowsCache[e]){var o=$(getCellNode(e,t));!function e(t){t&&setTimeout(function(){o.queue(function(){o.toggleClass(options.cellFlashingCssClass).dequeue(),e(t-1)})},n)}(4)}}function handleMouseWheel(e){var t=$(e.target).closest(".slick-row")[0];t!=rowNodeFromLastMouseWheelEvent&&(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=t&&($canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent),zombieRowNodeFromLastMouseWheelEvent=null),rowNodeFromLastMouseWheelEvent=t)}function handleDragInit(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var o=trigger(self.onDragInit,t,e);return!!e.isImmediatePropagationStopped()&&o}function handleDragStart(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var o=trigger(self.onDragStart,t,e);return!!e.isImmediatePropagationStopped()&&o}function handleDrag(e,t){return trigger(self.onDrag,t,e)}function handleDragEnd(e,t){trigger(self.onDragEnd,t,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var t=e.isImmediatePropagationStopped();if(!t)if(e.shiftKey||e.altKey||e.ctrlKey)9!=e.which||!e.shiftKey||e.ctrlKey||e.altKey||(t=navigatePrev());else if(27==e.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else 34==e.which?(navigatePageDown(),t=!0):33==e.which?(navigatePageUp(),t=!0):37==e.which?t=navigateLeft():39==e.which?t=navigateRight():38==e.which?t=navigateUp():40==e.which?t=navigateDown():9==e.which?t=navigateNext():13==e.which&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),t=!0);if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(e){}}}function handleClick(e){currentEditor||(e.target!=document.activeElement||$(e.target).hasClass("slick-cell"))&&setFocus();var t=getCellFromEvent(e);!t||null!==currentEditor&&activeRow==t.row&&activeCell==t.cell||(trigger(self.onClick,{row:t.row,cell:t.cell},e),e.isImmediatePropagationStopped()||activeCell==t.cell&&activeRow==t.row||!canCellBeActive(t.row,t.cell)||getEditorLock().isActive()&&!getEditorLock().commitCurrentEdit()||(scrollRowIntoView(t.row,!1),setActiveCellInternal(getCellNode(t.row,t.cell))))}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);0!==t.length&&(activeCellNode===t[0]&&null!==currentEditor||trigger(self.onContextMenu,{},e))}function handleDblClick(e){var t=getCellFromEvent(e);!t||null!==currentEditor&&activeRow==t.row&&activeCell==t.cell||(trigger(self.onDblClick,{row:t.row,cell:t.cell},e),e.isImmediatePropagationStopped()||options.editable&&gotoCell(t.row,t.cell,!0))}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},e)}function handleHeaderContextMenu(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");trigger(self.onHeaderContextMenu,{column:n},e)}function handleHeaderClick(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");n&&trigger(self.onHeaderClick,{column:n},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(e,t){return!(e<0||e>=getDataLength()||t<0||t>=columns.length)}function getCellFromPoint(e,t){for(var n=getRowFromPosition(t),o=0,r=0,i=0;i<columns.length&&r<e;i++)r+=columns[i].width,o++;return o<0&&(o=0),{row:n,cell:o-1}}function getCellFromNode(e){var t=/l\d+/.exec(e.className);if(!t)throw"getCellFromNode: cannot get cell - "+e.className;return parseInt(t[0].substr(1,t[0].length-1),10)}function getRowFromNode(e){for(var t in rowsCache)if(rowsCache[t].rowNode===e)return 0|t;return null}function getCellFromEvent(e){var t=$(e.target).closest(".slick-cell",$canvas);if(!t.length)return null;var n=getRowFromNode(t[0].parentNode),o=getCellFromNode(t[0]);return null==n||null==o?null:{row:n,cell:o}}function getCellNodeBox(e,t){if(!cellExists(e,t))return null;for(var n=getRowTop(e),o=n+options.rowHeight-1,r=0,i=0;i<t;i++)r+=columns[i].width;return{top:n,left:r,bottom:o,right:r+columns[t].width}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){-1==tabbingDirection?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(e,t,n){scrollRowIntoView(e,n);var o=getColspan(e,t),r=columnPosLeft[t],i=columnPosRight[t+(o>1?o-1:0)],a=scrollLeft+viewportW;r<scrollLeft?($viewport.scrollLeft(r),handleScroll(),render()):i>a&&($viewport.scrollLeft(Math.min(r,i-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(e,t){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var n=activeCellNode!==e;null!=(activeCellNode=e)?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),null==t&&(t=activeRow==getDataLength()||options.autoEdit),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&t&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}function isCellPotentiallyEditable(e,t){var n=getDataLength();return!(e<n&&!getDataItem(e))&&(!(columns[t].cannotTriggerInsert&&e>=n)&&!!getEditor(e,t))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var e=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),e){var t=columns[activeCell],n=getFormatter(activeRow,t);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(e,t),t,e),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(e){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var t=columns[activeCell],n=getDataItem(activeRow);!1!==trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:t})?(getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),e||(activeCellNode.innerHTML=""),currentEditor=new(e||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:t,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()):setFocus()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;for(var n=e.offsetParent;(e=e.parentNode)!=document.body;)t.visible&&e.scrollHeight!=e.offsetHeight&&"visible"!=$(e).css("overflowY")&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&"visible"!=$(e).css("overflowX")&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===n&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,n=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width;return t}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var e=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(e.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(e)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(e,t){var n=e*options.rowHeight,o=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(e+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(t?n:o),render()):e*options.rowHeight<scrollTop+offset&&(scrollTo(t?o:n),render())}function scrollRowToTop(e){scrollTo(e*options.rowHeight),render()}function scrollPage(e){var t=e*numVisibleRows;if(scrollTo((getRowFromPosition(scrollTop)+t)*options.rowHeight),render(),options.enableCellNavigation&&null!=activeRow){var n=activeRow+t,o=getDataLengthIncludingAddNew();n>=o&&(n=o-1),n<0&&(n=0);for(var r=0,i=null,a=activePosX;r<=activePosX;)canCellBeActive(n,r)&&(i=r),r+=getColspan(n,r);null!==i?(setActiveCellInternal(getCellNode(n,i)),activePosX=a):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function getColspan(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e);if(!n||!n.columns)return 1;var o=n.columns[columns[t].id]||n.columns[t],r=o&&o.colspan;return r="*"===r?columns.length-t:r||1}function findFirstFocusableCell(e){for(var t=0;t<columns.length;){if(canCellBeActive(e,t))return t;t+=getColspan(e,t)}return null}function findLastFocusableCell(e){for(var t=0,n=null;t<columns.length;)canCellBeActive(e,t)&&(n=t),t+=getColspan(e,t);return n}function gotoRight(e,t,n){if(t>=columns.length)return null;do{t+=getColspan(e,t)}while(t<columns.length&&!canCellBeActive(e,t));return t<columns.length?{row:e,cell:t,posX:t}:null}function gotoLeft(e,t,n){if(t<=0)return null;var o=findFirstFocusableCell(e);if(null===o||o>=t)return null;for(var r,i={row:e,cell:o,posX:o};;){if(!(r=gotoRight(i.row,i.cell,i.posX)))return null;if(r.cell>=t)return i;i=r}}function gotoDown(e,t,n){for(var o,r=getDataLengthIncludingAddNew();;){if(++e>=r)return null;for(o=t=0;t<=n;)o=t,t+=getColspan(e,t);if(canCellBeActive(e,o))return{row:e,cell:o,posX:n}}}function gotoUp(e,t,n){for(var o;;){if(--e<0)return null;for(o=t=0;t<=n;)o=t,t+=getColspan(e,t);if(canCellBeActive(e,o))return{row:e,cell:o,posX:n}}}function gotoNext(e,t,n){if(null==e&&null==t&&canCellBeActive(e=t=n=0,t))return{row:e,cell:t,posX:t};var o=gotoRight(e,t,n);if(o)return o;for(var r=null,i=getDataLengthIncludingAddNew();++e<i;)if(null!==(r=findFirstFocusableCell(e)))return{row:e,cell:r,posX:r};return null}function gotoPrev(e,t,n){if(null==e&&null==t&&canCellBeActive(e=getDataLengthIncludingAddNew()-1,t=n=columns.length-1))return{row:e,cell:t,posX:t};for(var o,r;!o&&!(o=gotoLeft(e,t,n));){if(--e<0)return null;t=0,null!==(r=findLastFocusableCell(e))&&(o={row:e,cell:r,posX:r})}return o}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(e){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=e&&"next"!=e)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();tabbingDirection={up:-1,down:1,left:-1,right:1,prev:-1,next:1}[e];var t=(0,{up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext}[e])(activeRow,activeCell,activePosX);if(t){var n=t.row==getDataLength();return scrollCellIntoView(t.row,t.cell,!n),setActiveCellInternal(getCellNode(t.row,t.cell)),activePosX=t.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(e,t){return rowsCache[e]?(ensureCellNodesInRowsCache(e),rowsCache[e].cellNodesByColumnIdx[t]):null}function setActiveCell(e,t){initialized&&(e>getDataLength()||e<0||t>=columns.length||t<0||options.enableCellNavigation&&(scrollCellIntoView(e,t,!1),setActiveCellInternal(getCellNode(e,t),!1)))}function canCellBeActive(e,t){if(!options.enableCellNavigation||e>=getDataLengthIncludingAddNew()||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&"boolean"==typeof n.focusable)return n.focusable;var o=n&&n.columns;return o&&o[columns[t].id]&&"boolean"==typeof o[columns[t].id].focusable?o[columns[t].id].focusable:o&&o[t]&&"boolean"==typeof o[t].focusable?o[t].focusable:columns[t].focusable}function canCellBeSelected(e,t){if(e>=getDataLength()||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&"boolean"==typeof n.selectable)return n.selectable;var o=n&&n.columns&&(n.columns[columns[t].id]||n.columns[t]);return o&&"boolean"==typeof o.selectable?o.selectable:columns[t].selectable}function gotoCell(e,t,n){initialized&&(canCellBeActive(e,t)&&getEditorLock().commitCurrentEdit()&&(scrollCellIntoView(e,t,!1),setActiveCellInternal(getCellNode(e,t),n||e===getDataLength()||options.autoEdit),currentEditor||setFocus()))}function commitCurrentEdit(){var e=getDataItem(activeRow),t=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var o={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(e,t,o)):(o.execute(),makeActiveCellNormal())}else{var r={};currentEditor.applyValue(r,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:r,column:t})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:t}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(e){for(var t=[],n=columns.length-1,o=0;o<e.length;o++)t.push(new Slick.Range(e[o],0,e[o],n));return t}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(e){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(e))}this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+counter_rows_rendered,e+="\ncounter_rows_removed:  "+counter_rows_removed,e+="\nrenderedRows:  "+renderedRows,e+="\nnumVisibleRows:  "+numVisibleRows,e+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,e+="\nn(umber of pages):  "+n,e+="\n(current) page:  "+page,e+="\npage height (ph):  "+ph,e+="\nvScrollDir:  "+vScrollDir,alert(e)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}})}(jQuery)}).call(this,__webpack_require__(1))},308:function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{RowSelectionModel:function(t){var n,o,r,i=[],a=this,l=new Slick.EventHandler,s={selectActiveRow:!0};function c(e){return function(){o||(o=!0,e.apply(this,arguments),o=!1)}}function u(e){for(var t=[],n=0;n<e.length;n++)for(var o=e[n].fromRow;o<=e[n].toRow;o++)t.push(o);return t}function A(e){for(var t=[],o=n.getColumns().length-1,r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],o));return t}function d(){return u(i)}function h(e){i=e,a.onSelectedRangesChanged.notify(i)}function f(e,t){r.selectActiveRow&&null!=t.row&&h([new Slick.Range(t.row,0,t.row,n.getColumns().length-1)])}function p(e){var t=n.getActiveCell();if(t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(38==e.which||40==e.which)){var o=d();o.sort(function(e,t){return e-t}),o.length||(o=[t.row]);var r,a=o[0],l=o[o.length-1];(r=40==e.which?t.row<l||a==l?++l:++a:t.row<l?--l:--a)>=0&&r<n.getDataLength()&&(n.scrollRowIntoView(r),h(i=A(function(e,t){var n,o=[];for(n=e;n<=t;n++)o.push(n);for(n=t;n<e;n++)o.push(n);return o}(a,l)))),e.preventDefault(),e.stopPropagation()}}function g(t){var o=n.getCellFromEvent(t);if(!o||!n.canCellBeActive(o.row,o.cell))return!1;if(!n.getOptions().multiSelect||!t.ctrlKey&&!t.shiftKey&&!t.metaKey)return!1;var r=u(i),a=e.inArray(o.row,r);if(-1===a&&(t.ctrlKey||t.metaKey))r.push(o.row),n.setActiveCell(o.row,o.cell);else if(-1!==a&&(t.ctrlKey||t.metaKey))r=e.grep(r,function(e,t){return e!==o.row}),n.setActiveCell(o.row,o.cell);else if(r.length&&t.shiftKey){var l=r.pop(),s=Math.min(o.row,l),c=Math.max(o.row,l);r=[];for(var d=s;d<=c;d++)d!==l&&r.push(d);r.push(l),n.setActiveCell(o.row,o.cell)}return h(i=A(r)),t.stopImmediatePropagation(),!0}e.extend(this,{getSelectedRows:d,setSelectedRows:function(e){h(A(e))},getSelectedRanges:function(){return i},setSelectedRanges:h,init:function(o){r=e.extend(!0,{},s,t),n=o,l.subscribe(n.onActiveCellChanged,c(f)),l.subscribe(n.onKeyDown,c(p)),l.subscribe(n.onClick,c(g))},destroy:function(){l.unsubscribeAll()},onSelectedRangesChanged:new Slick.Event})}}})}(e)}).call(this,n(1))},309:function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{Plugins:{HeaderButtons:function(t){var n,o=this,r=new Slick.EventHandler,i={buttonCssClass:"slick-header-button"};function a(n,o){var r=o.column;if(r.header&&r.header.buttons)for(var i=r.header.buttons.length;i--;){var a=r.header.buttons[i],l=e("<div></div>").addClass(t.buttonCssClass).data("column",r).data("button",a);a.showOnHover&&l.addClass("slick-header-button-hidden"),a.image&&l.css("backgroundImage","url("+a.image+")"),a.cssClass&&l.addClass(a.cssClass),a.tooltip&&l.attr("title",a.tooltip),a.command&&l.data("command",a.command),a.handler&&l.bind("click",a.handler),l.bind("click",s).appendTo(o.node)}}function l(n,o){var r=o.column;r.header&&r.header.buttons&&e(o.node).find("."+t.buttonCssClass).remove()}function s(t){var r=e(this).data("command"),i=e(this).data("column"),a=e(this).data("button");null!=r&&(o.onCommand.notify({grid:n,column:i,command:r,button:a},t,o),n.updateColumnHeader(i.id)),t.preventDefault(),t.stopPropagation()}e.extend(this,{init:function(o){t=e.extend(!0,{},i,t),n=o,r.subscribe(n.onHeaderCellRendered,a).subscribe(n.onBeforeHeaderCellDestroy,l),n.setColumns(n.getColumns())},destroy:function(){r.unsubscribeAll()},onCommand:new Slick.Event})}}}})}(e)}).call(this,n(1))},310:function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{AutoTooltips:function(t){var n,o={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:null};function r(o){var r=n.getCellFromEvent(o);if(r){var i,a=e(n.getCellNode(r.row,r.cell));a.innerWidth()<a[0].scrollWidth?(i=e.trim(a.text()),t.maxToolTipLength&&i.length>t.maxToolTipLength&&(i=i.substr(0,t.maxToolTipLength-3)+"...")):i="",a.attr("title",i)}}function i(t,n){var o=n.column,r=e(t.target).closest(".slick-header-column");o.toolTip||r.attr("title",r.innerWidth()<r[0].scrollWidth?o.name:"")}e.extend(this,{init:function(a){t=e.extend(!0,{},o,t),n=a,t.enableForCells&&n.onMouseEnter.subscribe(r);t.enableForHeaderCells&&n.onHeaderMouseEnter.subscribe(i)},destroy:function(){t.enableForCells&&n.onMouseEnter.unsubscribe(r);t.enableForHeaderCells&&n.onHeaderMouseEnter.unsubscribe(i)}})}}})}(e)}).call(this,n(1))},312:function(e,t,n){var o=n(313);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,r);o.locals&&(e.exports=o.locals)},313:function(e,t,n){(e.exports=n(36)(!1)).push([e.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract\n DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government\n retains certain rights in this software. */\n\n.vertical {\n  -ms-transform: rotate(-90deg);\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n}\n\n.unvertical {\n  -ms-transform: rotate(90deg);\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n\n.light-border-right {\n  border-right: 2px solid rgb(231, 231, 231);\n}\n\n.affix-top-right {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n\n.fill-parent-width {\n  width: 100%;\n}\n\n.link-cursor {\n  cursor: pointer;\n}\n\n.default-cursor {\n  cursor: inherit;\n}\n\n.info-panel {\n  border-left: 2px solid #1b809e !important;\n}\n\n.vertical-toggle-pane-resizer {\n  right-border: 2px solid rgb(231,231,231);\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n",""])},314:function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{Slycateditors:{Text:function(t){var n,o;this.init=function(){n=e("<INPUT type=text class='editor-text' />").appendTo(t.container).bind("keydown.nav",function(t){t.keyCode!==e.ui.keyCode.LEFT&&t.keyCode!==e.ui.keyCode.RIGHT||t.stopImmediatePropagation()}).focus().select()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.getValue=function(){return n.val()},this.setValue=function(e){n.val(e)},this.loadValue=function(e){o=e[t.column.field]||"",n.val(o),n[0].defaultValue=o,n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==o)&&n.val()!=o},this.validate=function(){if(t.column.validator){var e=t.column.validator(n.val());if(!e.valid)return e}return{valid:!0,msg:null}},this.init()},Integer:function(t){var n,o;this.init=function(){(n=e("<INPUT type=text class='editor-text' />")).bind("keydown.nav",function(t){t.keyCode!==e.ui.keyCode.LEFT&&t.keyCode!==e.ui.keyCode.RIGHT||t.stopImmediatePropagation()}),n.appendTo(t.container),n.focus().select()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){o=e[t.column.field],n.val(o),n[0].defaultValue=o,n.select()},this.serializeValue=function(){return parseInt(n.val(),10)||0},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==o)&&n.val()!=o},this.validate=function(){return isNaN(n.val())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}},this.init()},Date:function(t){var n,o,r=!1;this.init=function(){(n=e("<INPUT type=text class='editor-text' />")).appendTo(t.container),n.focus().select(),n.datepicker({showOn:"button",buttonImageOnly:!0,buttonImage:"../images/calendar.gif",beforeShow:function(){r=!0},onClose:function(){r=!1}}),n.width(n.width()-18)},this.destroy=function(){e.datepicker.dpDiv.stop(!0,!0),n.datepicker("hide"),n.datepicker("destroy"),n.remove()},this.show=function(){r&&e.datepicker.dpDiv.stop(!0,!0).show()},this.hide=function(){r&&e.datepicker.dpDiv.stop(!0,!0).hide()},this.position=function(t){r&&e.datepicker.dpDiv.css("top",t.top+30).css("left",t.left)},this.focus=function(){n.focus()},this.loadValue=function(e){o=e[t.column.field],n.val(o),n[0].defaultValue=o,n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==o)&&n.val()!=o},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoSelect:function(t){var n,o;this.init=function(){(n=e("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>")).appendTo(t.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){n.val((o=e[t.column.field])?"yes":"no"),n.select()},this.serializeValue=function(){return"yes"==n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return n.val()!=o},this.validate=function(){return{valid:!0,msg:null}},this.init()},Checkbox:function(t){var n,o;this.init=function(){(n=e("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(t.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){(o=!!e[t.column.field])?n.prop("checked",!0):n.prop("checked",!1)},this.serializeValue=function(){return n.prop("checked")},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return this.serializeValue()!==o},this.validate=function(){return{valid:!0,msg:null}},this.init()},PercentComplete:function(t){var n,o,r;this.init=function(){(n=e("<INPUT type=text class='editor-percentcomplete' />")).width(e(t.container).innerWidth()-25),n.appendTo(t.container),(o=e("<div class='editor-percentcomplete-picker' />").appendTo(t.container)).append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>"),o.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>"),n.focus().select(),o.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:r,slide:function(e,t){n.val(t.value)}}),o.find(".editor-percentcomplete-buttons button").bind("click",function(t){n.val(e(this).attr("val")),o.find(".editor-percentcomplete-slider").slider("value",e(this).attr("val"))})},this.destroy=function(){n.remove(),o.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){n.val(r=e[t.column.field]),n.select()},this.serializeValue=function(){return parseInt(n.val(),10)||0},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==r)&&(parseInt(n.val(),10)||0)!=r},this.validate=function(){return isNaN(parseInt(n.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}},this.init()},LongText:function(t){var n,o,r,i=this;this.init=function(){var r=e("body");o=e("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(r),n=e("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(o),e("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(o),o.find("button:first").bind("click",this.save),o.find("button:last").bind("click",this.cancel),n.bind("keydown",this.handleKeyDown),i.position(t.position),n.focus().select()},this.handleKeyDown=function(n){n.which==e.ui.keyCode.ENTER&&n.ctrlKey?i.save():n.which==e.ui.keyCode.ESCAPE?(n.preventDefault(),i.cancel()):n.which==e.ui.keyCode.TAB&&n.shiftKey?(n.preventDefault(),t.grid.navigatePrev()):n.which==e.ui.keyCode.TAB&&(n.preventDefault(),t.grid.navigateNext())},this.save=function(){t.commitChanges()},this.cancel=function(){n.val(r),t.cancelChanges()},this.hide=function(){o.hide()},this.show=function(){o.show()},this.position=function(e){o.css("top",e.top-5).css("left",e.left-5)},this.destroy=function(){o.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){n.val(r=e[t.column.field]),n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==r)&&n.val()!=r},this.validate=function(){return{valid:!0,msg:null}},this.init()},Rating:function(t){var n,o;this.init=function(){(n=e("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(t.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){(o=!!e[t.column.field])?n.prop("checked",!0):n.prop("checked",!1)},this.serializeValue=function(){return n.prop("checked")},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return this.serializeValue()!==o},this.validate=function(){return{valid:!0,msg:null}},this.init()}}}})}(e)}).call(this,n(1))},317:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.login=c,t.create_pool=function(){var e={},t={check_remote:function(e){o.default.get_remotes({hostname:e.hostname,success:function(t){e.success&&e.success(t)},error:function(t,n,o){e.error&&e.error(t,n,o)}})}};return t.get_remote=function(e){t.check_remote({hostname:e.hostname,get_remote_params:e,success:function(t){t.status?e.success&&e.success(e.hostname):c({hostname:e.hostname,title:e.title,message:e.message,success:function(t){e.success&&e.success(e.hostname)},cancel:function(){e.cancel&&e.cancel()}})},error:function(e,t,n){console.log("Unable to check status of remote session.")}})},t.delete_remote=function(t){t in e&&(o.default.delete_remote({sid:e[t]}),delete e[t])},t};var o=s(n(2)),r=s(n(0)),i=s(n(4)),a=s(n(64)),l=s(n(326));function s(e){return e&&e.__esModule?e:{default:e}}function c(t){var n={cancel:function(){n.container.children().modal("hide"),t.cancel&&t.cancel()},login:function(){n.remote.enable(!1),n.remote.status_type("info"),n.remote.status("Connecting ..."),o.default.post_remotes({hostname:t.hostname,username:n.remote.username(),password:n.remote.password(),success:function(e){n.container.children().modal("hide"),t.success&&t.success(e)},error:function(e,t,o){n.remote.enable(!0),n.remote.status_type("danger"),n.remote.status(o),n.remote.focus("password")}})}};n.title=r.default.observable(t.title||"Login"),n.message=r.default.observable(t.message||""),n.remote=i.default.fromJS({username:null,password:null,status:null,enable:!0,focus:!1,status_type:null}),n.remote.focus.extend({notify:"always"}),n.container=e(e.parseHTML(l.default)).appendTo(e("body")),n.ispasswordrequired=a.default,n.container.children().on("shown.bs.modal",function(){n.remote.focus(!0)}),n.container.children().on("hidden.bs.modal",function(){n.container.remove()}),r.default.applyBindings(n,n.container.get(0)),n.container.children().modal("show")}n(256)}).call(this,n(1))},320:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcdCupowjYAAAA4SURBVBjTjY45DgAgAMKq8VP8f+izdHLxiDZhg4YCoHYuJCmVD+q6AmbOJZUkTxPqVmqLqT8/3RjLHw4SIwEXjwAAAABJRU5ErkJggg=="},321:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcnLB3MmbIAAAA8SURBVBjTjYyxDYAwEMT8EUvfBB47aQChiEe4ucbnAlAnDUlq8IOxv4A6911SSYL6WbrFJ8dWmlexLXUsiHoUEn+eNQQAAAAASUVORK5CYII="},322:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcGKw83GfIAAABrSURBVBjTjcqxEUFhFEThj0qI1HBTow5tSIRGKHgV6IGRiTcT6kNghCT/wyBwkr2794Ak0yT3JPPWN0luGoP+SHLABDOc0VXVAoZeLDHCEVes+8dTqqoTthhjVVWXL6mxa7l/Hz+ln/wlPQBR6h1u6Vo8IwAAAABJRU5ErkJggg=="},323:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcDGiOe7Y0AAAB5SURBVBjTjcoxDkFREIbRczUvdkFlH2Ifau1rZBKlmE5hBWILRGcLSvtQqK/mPREUvmaS+U+BzJzignlEHDJzi0VEDKHoyswzJqWUWa31hl1ELGHQo6ZpVhjVWi94YNNvL9S27RV7jLGOiPsX6jp29/T+/EQ/+ws9AcDpHx8wCF0cAAAAAElFTkSuQmCC"},324:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcIEs6xvHQAAACESURBVBjTVc4xDgFxEMXhb1W04g5a7VxFo3cBichGK0J0ShpxEclcQCNxBIlCo1T4r6xpZjLvze9NBZm5wBxDPHDDJSLG0PGtTRFXmGFQOqiaITMnOOKNdUTUjdaQ4IwXuji09n+mKXp4tqN+cZnZxx2n8vQOo4i4tkl1OVhiX4zbhvQBmakeJ1ciCYkAAAAASUVORK5CYII="},325:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcHNnUqRGoAAACISURBVBjTTc4xDkFREIXhj4pW7EFrPRq9DciIvOhuPCE6JY3YiCVoJJYgUWg0N1G4T95p5iRn5j/TgZTSEguM8MQd14iYQNdP2xKuMcewTNBpTF3X05zzCR9sIqJqsoYk53zBGz0ctdRt+Rn6eLWr/nUppQEeOJen9xhHxK1NqsrBCoeyuGtIXwQvJB7uu+OBAAAAAElFTkSuQmCC"},326:function(e,t){e.exports='<div class="bootstrap-styles">\n  <div class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-bind="click:cancel" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n          <h3 class="modal-title" data-bind="text:title"></h3>\n        </div>\n        <div class="modal-body">\n          <p data-bind="visible:message, text:message"></p>\n          \x3c!-- ko if: ispasswordrequired.ssh_passwordrequired --\x3e\n          <form class="form-horizontal" role="form">\n            <slycat-login-controls params="username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:login"></slycat-login-controls>\n          </form>\n          \x3c!-- /ko --\x3e\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-default" data-bind="click:login,enable:remote.enable">Login</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},327:function(e,t,n){"use strict";(function(e){var t=r(n(0)),o=r(n(328));function r(e){return e&&e.__esModule?e:{default:e}}t.default.components.register("slycat-login-controls",{viewModel:{createViewModel:function(n,o){var r={};return r.username=n.username,r.password=n.password,r.status=n.status||t.default.observable(null),r.status_type=n.status_type||t.default.observable(null),r.enable=n.enable||t.default.observable(!0),r.focus=n.focus||t.default.observable(!1),r.status_classes=t.default.pureComputed(function(){var e=[];return r.status()&&e.push("in"),r.status_type()&&e.push("alert-"+r.status_type()),e.join(" ")}),r.username()||r.username(localStorage.getItem("slycat-login-controls-username")),r.username.subscribe(function(e){localStorage.setItem("slycat-login-controls-username",e),r.status(null)}),r.password.subscribe(function(e){r.status(null)}),r.focus.subscribe(function(t){var n=r.username(),i=r.password(),a=e(o.element).find("input").eq(0),l=e(o.element).find("input").eq(1);1==t&&(t=r.username()?"password":"username"),"username"==t&&(a.focus(),n&&a.get(0).setSelectionRange(0,n.length)),"password"==t&&(l.focus(),i&&l.get(0).setSelectionRange(0,i.length))}),e(o.element).find("input").keydown(function(e){13==e.which&&n.activate&&n.activate()}),r}},template:o.default})}).call(this,n(1))},328:function(e,t){e.exports='<div class="form-group">\n  <label for="slycat-login-username" class="col-sm-2 control-label">Username</label>\n  <div class="col-sm-10">\n    <input id="slycat-login-username" class="form-control" type="text" data-bind="enable:enable, textInput:username"></input>\n  </div>\n</div>\n<div class="form-group">\n  <label for="slycat-login-password" class="col-sm-2 control-label">Password</label>\n  <div class="col-sm-10">\n    <input id="slycat-login-password" class="form-control" type="password" data-bind="enable:enable, textInput:password"></input>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-offset-2 col-sm-10">\n    <div class="alert fade" role="alert" data-bind="css:status_classes,text:status"></div>\n  </div>\n</div>\n'},334:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94EHhESC1NkMY8AAABaSURBVDjLY2AYkiAtLRSrOCMBTf8JGTxr1mpGFiIcwDhr1mq4K2bNWo2hgIkIQ4RwaSbakFmzVr8jpIaJlIDF5RoWYgOQkiglynAmalg2eAyhSoqlSt4ZPAAAhK0aFjM865EAAAAASUVORK5CYII="},335:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94EHhEOMAQYhfYAAABcSURBVDjL1ZM7DoBACERn1rXxCN7/mCbPxsKChJVoslIBgRm+0i8FWCK/kyQyYNvOmAH2SzewVsoH6Dc7ZG0D5R6j7ZdnIkn9SXB1pUPg7Q2yeUC+v9gAdJv7u0+kGjIYZ1Y9RwAAAABJRU5ErkJggg=="},337:function(e,t,n){"use strict";(function(e){var t=l(n(2)),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(3)),l(n(0))),r=l(n(4)),i=l(n(25)),a=l(n(338));function l(e){return e&&e.__esModule?e:{default:e}}o.default.components.register("slycat-job-checker",{viewModel:function(n){var a={_id:(0,i.default)(window.location).segment(-1)},l=this;l.remote=r.default.fromJS({hostname:null,username:null,password:null,status:null,status_type:null,enable:!0,focus:!1,sid:null,session_exists:!1}),l.remote.focus.extend({notify:"always"}),l.jid=n.jid,l.output=o.default.observable("Output for the current job will be posted here...");var s=-1,c="";l.connect=function(){l.remote.enable(!1),l.remote.status_type("info"),l.remote.status("Connecting..."),l.remote.session_exists()?(l.remote.enable(!0),l.remote.status_type(null),l.remote.status(null),e("#slycat-job-checker-connect-modal").modal("hide"),e("#slycat-job-checker-cancel").removeAttr("disabled"),l.checkjob()):t.default.post_remotes({hostname:l.remote.hostname(),username:l.remote.username(),password:l.remote.password(),success:function(t){l.remote.session_exists(!0),l.remote.sid(t),l.remote.enable(!0),l.remote.status_type(null),l.remote.status(null),e("#slycat-job-checker-connect-modal").modal("hide"),e("#slycat-job-checker-cancel").removeAttr("disabled"),l.checkjob()},error:function(t,n,o){e("#slycat-job-checker-cancel").attr("disabled"),l.remote.enable(!0),l.remote.status_type("danger"),l.remote.status(o),l.remote.focus("password")}})},l.cancel=function(){l.remote.password(""),e("#slycat-job-checker-connect-modal").modal("hide"),l.output(l.output()+"\nPlease reload the page to check job "+l.jid()+"'s status.")},l.cancel_pull=function(){l.remote.password(""),console.log("cancel"),e("#slycat-pull-job-connect-modal").modal("hide"),l.output(l.output()+"\nPlease reload the page to check job "+l.jid()+"'s status.")};var u=function(e){t.default.get_checkjob({hostname:l.remote.hostname(),jid:l.jid(),success:function(e){if(e.errors)l.output(l.output()+"\n[Error] Could not check job iD="+l.jid()+" status: "+e.errors);else{var t=e.status.state;!function(e){return c===e}(t)?l.output(l.output()+"\nJob ID="+l.jid()+" is "+t):l.output(l.output()+"."),"COMPLETED"!==t&&"FAILED"!==t||(clearInterval(s),l.output(l.output()+"\n\nPlease reload to view model."),window.location.reload(!0),c=""),"CANCELLED"!==t&&"REMOVED"!==t||(clearInterval(s),c=""),c=t}},error:function(e,t,n){l.output(l.output()+"\n[Error] Could not check job status: "+t+" :"+n)}})};l.pullDataFromHpc=function(){console.log("1"),l.remote.enable(!1),l.remote.status_type("info"),l.remote.status("Connecting..."),l.remote.session_exists()?(console.log("got session"),l.remote.enable(!0),l.remote.status_type(null),l.remote.status(null),e("#slycat-pull-job-connect-modal").modal("hide"),l.pullHPCData()):t.default.post_remotes({hostname:l.remote.hostname(),username:l.remote.username(),password:l.remote.password(),success:function(t){l.remote.session_exists(!0),l.remote.sid(t),l.remote.enable(!0),l.remote.status_type(null),l.remote.status(null),e("#slycat-pull-job-connect-modal").modal("hide"),l.checkjob()},error:function(t,n,o){e("#slycat-job-checker-cancel").attr("disabled"),l.remote.enable(!0),l.remote.status_type("danger"),l.remote.status(o),l.remote.focus("password")}})},l.pullHPCData=function(){console.log("2"),t.default.get_model_command({mid:a._id,type:"timeseries",command:"pull_data",success:function(e){l.output(l.output()+"\nstarted pull status :"+e.errors)},error:function(e,t,n){l.output(l.output()+"\npull status: "+t+" :"+n)}})},l.checkjob=function(){c="",s=setInterval(u,1e3)},l.set_jid=function(e){l.jid(e)},e("#slycat-job-checker-connect").on("click",function(t){t.preventDefault(),t.stopPropagation(),e("#slycat-job-checker-connect-modal").modal()}),e("#slycat-job-pull").on("click",function(t){t.preventDefault(),t.stopPropagation(),e("#slycat-pull-job-connect-modal").modal()}),e("#slycat-job-checker-clear").on("click",function(e){e.preventDefault(),e.stopPropagation(),l.output("")}),e("#slycat-job-checker-cancel").on("click",function(e){e.preventDefault(),e.stopPropagation(),t.default.delete_job({hostname:l.remote.hostname(),jid:l.jid()})})},template:a.default})}).call(this,n(1))},338:function(e,t){e.exports='<div class="slycat-job-checker bootstrap-styles">\n  <div class="slycat-job-checker-controls">\n    <button id="slycat-job-checker-connect" class="btn btn-default">Connect To View Job Output</button>\n    <button id="slycat-job-checker-clear" class="btn btn-default">Clear Output</button>\n    <button id="slycat-job-pull" class="btn btn-default">Pull data</button>\n    <button id="slycat-job-checker-cancel" class="btn btn-danger" disabled>Cancel Job</button>\n  </div>\n  <div class="slycat-job-checker-output" data-bind="text: output"></div>\n\n  <div id="slycat-job-checker-connect-modal" class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content zoom-sensitive">\n        <div class="modal-header">\n          <h4 class="modal-title">Connect to host...</h4>\n        </div>\n        <div class="modal-body">\n          <form class="form-horizontal" role="form">\n            <slycat-remote-controls params="hostname:remote.hostname,username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:connect,session_exists:remote.session_exists"></slycat-remote-controls>\n          </form>\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-primary" data-bind="click:connect,enable:remote.enable">Connect</button>\n          <button class="btn btn-default pull-left" data-bind="click:cancel">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="slycat-pull-job-connect-modal" class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content zoom-sensitive">\n        <div class="modal-header">\n          <h4 class="modal-title">Connect to host...</h4>\n        </div>\n        <div class="modal-body">\n          <form class="form-horizontal" role="form">\n            <slycat-remote-controls params="hostname:remote.hostname,username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:connect,session_exists:remote.session_exists"></slycat-remote-controls>\n          </form>\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-primary" data-bind="click:pullDataFromHpc,enable:remote.enable">Connect</button>\n          <button class="btn btn-default pull-left" data-bind="click:cancel_pull">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n'},427:function(e,t,n){var o=n(428);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(o,r);o.locals&&(e.exports=o.locals)},428:function(e,t,n){var o=n(38);(e.exports=n(36)(!1)).push([e.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n/* Page header */\n\n#edit-model-button\n{\n  float: right;\n}\n\n#table\n{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n}\n\n.x-axis,\n.y-axis\n{\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  shape-rendering: crispEdges;\n}\n\n.x-axis path,\n.y-axis path\n{\n  fill: none;\n  stroke: black;\n}\n\n#remote-error\n{\n  background-color: red;\n  color: yellow;\n  padding: 1em;\n}\n\n/* Model */\n#parameter-image-plus-layout {\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n/* New CCA table styles */\n#barplot-table {\n  /*height: 250px;*/\n  overflow: hidden;\n}\n.barplotHeader {\n  /*overflow: hidden;*/\n  white-space: nowrap;\n}\n.barplotHeaderColumns {\n  /*outline: 1px solid blue;*/\n  white-space: nowrap;\n  display: inline-block;\n}\n.barplotHeaderColumn {\n  text-align: right !important;\n  display: inline-block;\n  /*padding: 3px;*/\n  cursor: pointer;\n  /*outline: 1px solid red;*/\n}\n.wrapper {\n  /*No longer using box-sizing since we are sizing cells based on an wrapper div inside them*/\n/*  box-sizing: border-box;\n  -moz-box-sizing: border-box;*/\n}\n.barplotHeaderColumn .wrapper {\n  padding: 3px;\n}\n.mask\n{\n  background-color: white;\n  position: relative; /* needed to get this cell to cover scrolling header row */\n  z-index: 1;\n}\n.mask .wrapper {\n  padding: 3px;\n}\n.barplotViewport {\n\n}\n.barplotGroup {\n  overflow: hidden;\n  width: auto !important; /* Need to force auto width since jQuery Resizable Widget sets static width on resize, which then breaks horizontal expansion/contraction on pane resize */\n}\n.barplotColumn {\n  float: left;\n  clear: left;\n}\n.barplotGroup.inputs,\n.barplotHeader,\n.barplotColumn,\n.mask,\n.inputs .ui-resizable-s\n{\n  border-color: #C0C0C0;\n  border-style: solid;\n  border-width: 0;\n}\n/*.barplotGroup.inputs,*/\n.barplotHeader\n{\n  border-bottom-width: 1px;\n}\n.barplotColumn,\n.mask\n{\n  border-right-width: 1px;\n}\n.inputs .ui-resizable-s {\n  bottom: 0;\n  height: 3px;\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  background-color: #DDDDCC;\n}\n.inputs .ui-resizable-s.ui-resizable-hover {\n  background-color: #FFCC66;\n}\n.noVerticalResize .ui-resizable-s {\n  display: none !important;\n}\n.toggle-control-s {\n  width: 50px;\n  height: 100%;\n  margin: 0 auto;\n  background-color: #CCCCBB;\n}\n.toggle-control-s.toggle-control-hover {\n  cursor: pointer;\n  background-color: #FFCC66;\n}\n/*.barplotGroup.inputs {\n  border-bottom: 7px solid red;\n}*/\n.barplotColumn .barplotCell {\n  display: block;\n}\n.barplotCanvas {\n  /*overflow: auto;*/\n  /*display: relative;*/ /* Only needed if using DOM's scrollIntoView() function instead of jQuery plugin */\n  height: 100%;\n}\n.barplotCanvas.input {\n  overflow-x: hidden;\n  /*overflow-y: auto;*/\n}\n.barplotRow {\n  white-space: nowrap;\n}\n.barplotCell {\n  display: inline-block;\n  text-align: right;\n}\n#rsquared-label sup {\n  position: absolute;\n  margin-top: -3px;\n}\n.rowInput,\n.rowOutput\n{\n  cursor: pointer;\n}\n#barplot-table .inputLabel .wrapper,\n#barplot-table .outputLabel .wrapper\n{\n  padding: 3px;\n}\n#barplot-table .inputLabel,\n#barplot-table .outputLabel,\n.barplotCell.col0,\n.barplotHeaderColumn\n{\n  font-weight: bold;\n  text-align: center;\n}\n#barplot-table .inputLabel\n{\n  background: #eeffe0;\n}\n#barplot-table .inputLabel.selected-variable,\n#barplot-table .barplotRow.rowInput.selected-variable,\n#barplot-table .barplotCell.rowInput.selected-variable\n{\n  background: #3ca654;\n  color: white;\n}\n#barplot-table .outputLabel\n{\n  background: #eeeeff;\n}\n#barplot-table .outputLabel.selected-variable,\n#barplot-table .barplotRow.rowOutput.selected-variable,\n#barplot-table .barplotCell.rowOutput.selected-variable\n{\n  background: #7767b0;\n  color: white;\n}\n.barplotHeaderColumnLabelWrapper,\n.selectCCAComponent,\n.wrapper,\n.barplotCellValue,\n.selected-component .spacer,\n.negative,\n.positive\n{\n  display: inline-block;\n}\n.barplotCellValue\n{\n  padding: 3px 23px 3px 18px;\n  width: 40px;\n}\n.selected-component .barplotCellValue,\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  background-color: #DDDDDD;\n  border-width: 0px 1px;\n  border-style: solid;\n  border-color: #808080;\n  color: #666655;\n}\n.barplotHeaderColumn.selected-component .wrapper {\n  padding: 0;\n}\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  padding: 3px 3px 3px 3px;\n  width: 75px;\n}\n.spacer\n{\n  width: 100px;\n  display: none;\n}\n.negativeSpacer\n{\n  text-align: right;\n}\n.positiveSpacer\n{\n  text-align: left;\n}\n.negative,\n.positive\n{\n  height: 12px;\n}\n.negative\n{\n  background-color: blue;\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n}\n.positive\n{\n  background-color: red;\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n#barplot-table span.sortCCAComponent\n{\n  width: 15px;\n  height: 15px;\n  display: inline-block;\n  border: 1px solid transparent;\n  cursor: pointer;\n  position: relative;\n  top: 3px;\n  margin-left: 3px;\n}\n.barplotHeaderColumn.mask.col0 {\n  vertical-align: top;\n}\n.slick-header-column {\n  padding-right: 41px !important;\n}\n.icon-sort-off {\n  border: 1px solid transparent;\n  background: transparent url("+o(n(285))+") no-repeat center center;\n}\n.icon-sort-off:hover {\n  border: 1px solid transparent !important;\n  background: transparent url("+o(n(286))+") no-repeat center center !important;\n}\n.icon-sort-ascending:hover,\n.icon-sort-descending:hover\n{\n  border: 1px solid transparent;\n}\n.slick-header-button,\n.slick-header-column:hover > .slick-header-button\n{\n  width: 10px;\n}\n.slick-header-button.icon-image-on,\n.slick-header-button.icon-image-off\n{\n  right: 16px;\n  top: 4px;\n}\n.slick-header-button.icon-image-off {\n  background: transparent url("+o(n(320))+") no-repeat center center;\n}\n.slick-header-button.icon-image-on,\n.slick-header-button.icon-image-off:hover\n{\n  background: transparent url("+o(n(321))+") no-repeat center center;\n}\n.slick-header-button.icon-y-on,\n.slick-header-button.icon-y-off\n{\n  right: 16px;\n  top: 4px;\n}\n.slick-header-button.icon-y-off {\n  background: transparent url("+o(n(322))+") no-repeat center center;\n}\n.slick-header-button.icon-y-on,\n.slick-header-button.icon-y-off:hover\n{\n  background: transparent url("+o(n(323))+") no-repeat center center;\n}\n.slick-header-button.icon-x-on,\n.slick-header-button.icon-x-off\n{\n  right: 26px;\n  top: 4px;\n}\n.slick-header-button.icon-x-off {\n  background: transparent url("+o(n(324))+") no-repeat center center;\n}\n.slick-header-button.icon-x-on,\n.slick-header-button.icon-x-off:hover\n{\n  background: transparent url("+o(n(325))+') no-repeat center center;\n}\n#page-title {\n  padding-top: 5px;\n  padding-bottom: 35px;\n}\n#controls-pane {\n  \n}\n.center {\n  text-align: center;\n}\n#color-switcher {\n  margin: 0;\n  float: none;\n  display: inline-block;\n}\n#color-switcher .label {\n  font-weight: bold;\n}\n#color-switcher .color {\n  background-color: #DBD9EB;\n  padding: 4px;\n}\n#color-switcher .color:hover {\n  cursor: pointer;\n}\n#color-switcher .selected:hover {\n  cursor: default;\n}\n#color-switcher .selected {\n  background-color: #7767B0 !important;\n  color: white;\n}\n#color-switcher,\n#controls\n{\n  font-size: small;\n}\n#controls {\n  display: inline-block;\n  margin: 2px 0;\n}\n#controls label {\n  font-weight: bold;\n  margin-right: 5px;\n}\n#controls label.disabled,\n#controls select:disabled\n{\n  color: gray;\n}\n#controls select:disabled {\n\n}\n#controls select {\n  margin-right: 10px;\n  padding: 2px 4px;\n}\n#controls button,\n#controls label[for="auto-scale-option"]\n{\n  margin-right: 10px;\n}\n#scatterplot.resizing,\n#scatterplot .resize-handle:hover {\n  cursor: nwse-resize;\n}\n#scatterplot rect.outline:hover,\n#scatterplot g.image-frame image.image\n{\n  cursor: move;\n}\n#scatterplot .close-button:hover,\n#scatterplot .pin-button:hover {\n  cursor: pointer;\n}\n#scatterplot g.open-image image.image {\n\n}\n#scatterplot .close-button,\n#scatterplot .resize-handle,\n#scatterplot .pin-button\n{\n  visibility: hidden;\n}\n#scatterplot g.open-image:hover .close-button,\n#scatterplot g.open-image.resizing .close-button,\n#scatterplot g.hover-image .pin-button,\n#scatterplot g.open-image:hover .pin-button,\n#scatterplot g.image-frame:hover .resize-handle,\n#scatterplot g.open-image.resizing .resize-handle\n{\n  visibility: visible;\n}\n#scatterplot g.legend:hover {\n  cursor: move;\n}\n#scatterplot .image-frame rect.outline {\n  shape-rendering: crispEdges;\n}\n.legend-axis path,\n.legend-axis line\n{\n  fill: none;\n  stroke: black;\n  shape-rendering: crispEdges;\n}\n.dialogErrorMessage {\n  color: red;\n}\n#scatterplot canvas {\n  z-index: -1;\n}\n\n/* dendrogram styles */\n#dendrogram-pane #dendrogram-sort-control \n{\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  cursor: pointer;\n  background: #DBD9EB url('+o(n(334))+") no-repeat center center;;\n  padding: 4px;\n  margin: 0 0 5px 18px;\n  height: 17px;\n  min-width: 17px;\n}\n\n#dendrogram-pane #dendrogram-sort-control.selected\n{\n  background: #7767B0 url("+o(n(335))+") no-repeat center center;\n  color: #FFFFFF;\n  cursor: default;\n}\n\n#dendrogram-viewer .node .glyph circle\n{\n  stroke: grey;\n}\n\n#dendrogram-viewer .node.selected .glyph circle\n{\n  fill: #7767b0 !important;\n  stroke: black;\n}\n\n#dendrogram-viewer .node .glyph text\n{\n  cursor: pointer;\n}\n\n#dendrogram-viewer .node .subtree\n{\n  cursor: pointer;\n}\n\n#dendrogram-viewer .node .subtree path\n{\n  stroke: none;\n}\n\n/* Hiding the additional glyph initially */\n#dendrogram-viewer .node .subtree path.filled-glyph\n{\n  display: none;\n}\n/* Showing it for selected nodes */\n#dendrogram-viewer .node.selected .subtree path.filled-glyph\n{\n  display: inline;\n}\n\n#dendrogram-viewer .node.selected .subtree text\n{\n  fill: white;\n}\n\n#dendrogram-viewer .node .sparkline path\n{\n  fill: none;\n  stroke: black;\n}\n\n#dendrogram-viewer .link\n{\n  fill: none;\n  stroke: #C9C9C9;\n  shape-rendering: crispEdges;\n}\n#dendrogram-leaf-backdrop {\n  height: 100%;\n  width: 49px;\n  position: absolute;\n  right: 0;\n  z-index: -1;\n}\n#dendrogram-viewer g.sparkline path {\n  stroke-linecap: round;\n}\n#dendrogram-viewer g.sparkline path:hover,\n#dendrogram-viewer g.sparkline path.highlight\n{\n  stroke-width: 4px;\n}\n#dendrogram-viewer g.sparkline path.highlight {\n  \n}\n#dendrogram-viewer g.sparkline path.nullValue {\n  stroke-dasharray: 2px, 2px;\n}\n#dendrogram-viewer g.sparkline path.highlight.nullValue {\n  stroke-dasharray: 2px, 5px;\n}\n#dendrogram-viewer g.thumbnail rect.outline {\n  stroke: unset;\n}\n#dendrogram-viewer g.thumbnail.highlight rect.outline {\n  stroke: black;\n}\n#dendrogram-viewer g.square {\n  shape-rendering: crispEdges;\n}\n\n/* ui layout */\n.ui-layout-resizer\n{\n  background: #ddc;\n}\n.ui-layout-resizer-hover\n{\n  background: #fc6;\n}\n.ui-layout-resizer-dragging\n{\n  background: #fc6;\n}\n.ui-layout-toggler\n{\n  background: #ccb;\n}\n.ui-layout-toggler-hover\n{\n  background: #fc6;\n}\n.ui-layout-pane, .ui-layout-container\n{\n  background: white;\n  padding: 0;\n  border: 0;\n  margin: 0;\n}\n\n/* Image Preview */\n#scatterplot-pane #image-preview {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  display: none;\n  text-align: center;\n}\n#scatterplot-pane #image-preview-image {\n  max-height: 100%;\n  max-width: 100%;\n}",""])},429:function(e,t,n){"use strict";(function(e){var t=l(n(15)),o=l(n(283)),r=l(n(25)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(317));n(282),n(327);var a=l(n(430));function l(e){return e&&e.__esModule?e:{default:e}}e.widget("parameter_image.scatterplot",{options:{width:300,height:300,pick_distance:3,drag_threshold:3,indices:[],x_label:"X Label",y_label:"Y Label",v_label:"V Label",x:[],y:[],v:[],x_string:!1,y_string:!1,v_string:!1,images:[],selection:[],colorscale:o.default.scale.linear().domain([-1,0,1]).range(["blue","white","red"]),border:25,open_images:[],gradient:null,hidden_simulations:[],filtered_indices:[],filtered_selection:[],filtered_x:[],filtered_y:[],filtered_v:[],scale_x:[],scale_y:[],scale_v:[],"auto-scale":!0,canvas_square_size:8,canvas_square_border_size:1,canvas_selected_square_size:16,canvas_selected_square_border_size:2,pinned_width:200,pinned_height:200,hover_time:250,image_cache:{},cache_references:[{}],login_dialog:null},_create:function(){var e=this;this.remotes=i.create_pool(),e.login_open=!1,e.options["auto-scale"]?(e.options.filtered_x=e._filterValues(e.options.x),e.options.filtered_y=e._filterValues(e.options.y),e.options.filtered_v=e._filterValues(e.options.v),e.options.scale_x=e.options.filtered_x,e.options.scale_y=e.options.filtered_y,e.options.scale_v=e.options.filtered_v):(e.options.scale_x=e.options.x,e.options.scale_y=e.options.y,e.options.scale_v=e.options.v),e.hover_timer=null,e.close_hover_timer=null,e.hover_timer_canvas=null,e.opening_image=null,e.state="",e.start_drag=null,e.current_drag=null,e.end_drag=null,e.svg=o.default.select(e.element.get(0)).append("svg"),e.x_axis_layer=e.svg.append("g").attr("class","x-axis"),e.y_axis_layer=e.svg.append("g").attr("class","y-axis"),e.legend_layer=e.svg.append("g").attr("class","legend"),e.legend_axis_layer=e.legend_layer.append("g").attr("class","legend-axis"),e.datum_layer=e.svg.append("g").attr("class","datum-layer"),e.selected_layer=e.svg.append("g").attr("class","selected-layer"),e.canvas_datum=o.default.select(e.element.get(0)).append("canvas").style({position:"absolute"}).node(),e.canvas_datum_layer=e.canvas_datum.getContext("2d"),e.canvas_selected=o.default.select(e.element.get(0)).append("canvas").style({position:"absolute"}).node(),e.canvas_selected_layer=e.canvas_selected.getContext("2d"),e.selection_layer=e.svg.append("g").attr("class","selection-layer"),e.image_layer=e.svg.append("g").attr("class","image-layer"),e.options.image_cache=e.options.cache_references[0],e.updates={},e.update_timer=null,e._schedule_update({update_indices:!0,update_width:!0,update_height:!0,update_x:!0,update_y:!0,update_x_label:!0,update_y_label:!0,render_data:!0,render_selection:!0,open_images:!0,render_legend:!0,update_legend_colors:!0,update_legend_position:!0,update_legend_axis:!0,update_v_label:!0}),e.legend_layer.call(o.default.behavior.drag().on("drag",function(){if(0<=o.default.event.y&&o.default.event.y<=e.options.height&&0<=o.default.event.x&&o.default.event.x<=e.options.width){var t=o.default.select(this),n=Number(t.attr("data-transx")),r=Number(t.attr("data-transy"));n+=o.default.event.dx,r+=o.default.event.dy,t.attr("data-transx",n),t.attr("data-transy",r),t.attr("transform","translate("+n+", "+r+")")}}).on("dragstart",function(){e.state="moving",o.default.event.sourceEvent.stopPropagation()}).on("dragend",function(){e.state="",o.default.select(this).attr("data-status","moved")})),e.element.mousedown(function(t){t.preventDefault(),e.start_drag=[e._offsetX(t),e._offsetY(t)],e.end_drag=null}),e.element.mousemove(function(t){if(null===e.start_drag)"svg"===t.target.nodeName&&e._schedule_hover_canvas(t);else if(e.start_drag)if(e.end_drag){e.end_drag=[e._offsetX(t),e._offsetY(t)];e.element.width(),e.element.height();e.selection_layer.selectAll(".rubberband").attr("x",Math.min(e.start_drag[0],e.end_drag[0])).attr("y",Math.min(e.start_drag[1],e.end_drag[1])).attr("width",Math.abs(e.start_drag[0]-e.end_drag[0])).attr("height",Math.abs(e.start_drag[1]-e.end_drag[1]))}else(Math.abs(e._offsetX(t)-e.start_drag[0])>e.options.drag_threshold||Math.abs(e._offsetY(t)-e.start_drag[1])>e.options.drag_threshold)&&(e.state="rubber-band-drag",e.end_drag=[e._offsetX(t),e._offsetY(t)],e.selection_layer.append("rect").attr("class","rubberband").attr("x",Math.min(e.start_drag[0],e.end_drag[0])).attr("y",Math.min(e.start_drag[1],e.end_drag[1])).attr("width",Math.abs(e.start_drag[0]-e.end_drag[0])).attr("height",Math.abs(e.start_drag[1]-e.end_drag[1])).attr("fill","rgba(255, 255, 0, 0.3)").attr("stroke","rgb(255, 255, 0)").attr("linewidth",2))}),e.element.mouseout(function(t){e._cancel_hover_canvas()}),e.element.mouseup(function(t){if("resizing"!=e.state&&"moving"!=e.state){t.ctrlKey||t.metaKey||(e.options.selection=[],e.options.filtered_selection=[]);var n,o,r=e.options.x,i=e.options.y,a=r.length;if("rubber-band-drag"==e.state){if(e.selection_layer.selectAll(".rubberband").remove(),e.start_drag&&e.end_drag)for(var l=Math.min(e.start_drag[0],e.end_drag[0]),s=Math.max(e.start_drag[0],e.end_drag[0]),c=Math.min(e.start_drag[1],e.end_drag[1]),u=Math.max(e.start_drag[1],e.end_drag[1]),A=0;A!=a;++A){if(n=e.x_scale(r[A]),o=e.y_scale(i[A]),l<=n&&n<=s&&c<=o&&o<=u)-1==(d=e.options.selection.indexOf(e.options.indices[A]))&&e.options.selection.push(e.options.indices[A])}}else for(l=e._offsetX(t)-e.options.pick_distance,s=e._offsetX(t)+e.options.pick_distance,c=e._offsetY(t)-e.options.pick_distance,u=e._offsetY(t)+e.options.pick_distance,A=a-1;A>-1;A--)if(n=e.x_scale(r[A]),o=e.y_scale(i[A]),l<=n&&n<=s&&c<=o&&o<=u){var d;-1==(d=e.options.selection.indexOf(e.options.indices[A]))?e.options.selection.push(e.options.indices[A]):e.options.selection.splice(d,1);break}e.start_drag=null,e.end_drag=null,e.state="",e._filterIndices(),e.options.selection=e.options.filtered_selection.slice(0),e._schedule_update({render_selection:!0}),e.element.trigger("selection-changed",[e.options.selection])}}),e._filterIndices()},_filterIndices:function(){for(var t=this.options.x,n=this.options.y,o=this.options.indices,r=this.options.selection,i=this.options.hidden_simulations,a=this._cloneArrayBuffer(o),l=r.slice(0),s=o.length-1;s>=0;s--){if(e.inArray(o[s],i)>-1||!this._validateValue(t[s])||!this._validateValue(n[s])){a.splice(s,1);var c=e.inArray(o[s],l);c>-1&&l.splice(c,1)}}this.options.filtered_indices=a,this.options.filtered_selection=l},_filterValues:function(e){for(var t=this.options.hidden_simulations.sort(o.default.ascending),n=t.length,r=this._cloneArrayBuffer(e),i=n-1;i>=0;i--)r.splice(t[i],1);return r},_cloneArrayBuffer:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},_createScale:function(e,t,n,r){if(e){var i=o.default.set(t).values().sort();return!0===r&&i.reverse(),o.default.scale.ordinal().domain(i).rangePoints(n)}var a=[o.default.min(t),o.default.max(t)];return!0===r&&a.reverse(),o.default.scale.linear().domain(a).range(n)},_getDefaultXPosition:function(e,t){var n,o=this.svg.attr("width"),r=this.x_scale.range(),i=r.length-1,a=(this.x_scale(this.options.x[e])-r[0])/(r[i]-r[0]);return n=a<.5?a*r[0]:o-(o-r[i])*(1-a)-t,parseInt(n)},_getDefaultYPosition:function(e,t){var n=this.svg.attr("height"),o=this.y_scale(this.options.y[e]);return parseInt(o/n*(n-t))},_validateValue:function(e){return"number"==typeof e&&!isNaN(e)||"string"==typeof e&&""!=e.trim()},_setOption:function(e,t){this.options[e]=t,"indices"==e?(this._filterIndices(),this._schedule_update({update_indices:!0,render_selection:!0})):"x_label"==e?this._schedule_update({update_x_label:!0}):"y_label"==e?this._schedule_update({update_y_label:!0}):"v_label"==e?this._schedule_update({update_v_label:!0}):"x"==e?(this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.scale_x=this.options.filtered_x):this.options.scale_x=this.options.x,this._filterIndices(),this._close_hidden_simulations(),this._schedule_update({update_x:!0,update_leaders:!0,render_data:!0,render_selection:!0})):"y"==e?(this.options["auto-scale"]?(this.options.filtered_y=this._filterValues(this.options.y),this.options.scale_y=this.options.filtered_y):this.options.scale_y=this.options.y,this._filterIndices(),this._close_hidden_simulations(),this._schedule_update({update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0})):"v"==e?(this.options["auto-scale"]?(this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_v=this.options.filtered_v):this.options.scale_v=this.options.v,this._schedule_update({render_data:!0,render_selection:!0,update_legend_axis:!0})):"images"==e||("selection"==e?(this._filterIndices(),this._schedule_update({render_selection:!0})):"colorscale"==e?this._schedule_update({render_data:!0,render_selection:!0}):"width"==e?this._schedule_update({update_width:!0,update_x_label:!0,update_x:!0,update_leaders:!0,render_data:!0,render_selection:!0}):"height"==e?this._schedule_update({update_height:!0,update_y:!0,update_y_label:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_position:!0,update_legend_axis:!0,update_v_label:!0}):"border"==e?this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_position:!0,update_v_label:!0}):"gradient"==e?this._schedule_update({update_legend_colors:!0}):"hidden_simulations"==e?(this._filterIndices(),this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.filtered_y=this._filterValues(this.options.y),this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_x=this.options.filtered_x,this.options.scale_y=this.options.filtered_y,this.options.scale_v=this.options.filtered_v):(this.options.scale_x=this.options.x,this.options.scale_y=this.options.y,this.options.scale_v=this.options.v),this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_axis:!0}),this._close_hidden_simulations()):"auto-scale"==e&&(this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.filtered_y=this._filterValues(this.options.y),this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_x=this.options.filtered_x,this.options.scale_y=this.options.filtered_y,this.options.scale_v=this.options.filtered_v):(this.options.scale_x=this.options.x,this.options.scale_y=this.options.y,this.options.scale_v=this.options.v),this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_axis:!0})))},update_color_scale_and_v:function(e){this.options.colorscale=e.colorscale,this.options.v=e.v,void 0!==e.v_string&&(this.options.v_string=e.v_string),this.options["auto-scale"]?(this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_v=this.options.filtered_v):this.options.scale_v=this.options.v,this._schedule_update({render_data:!0,render_selection:!0,update_legend_axis:!0})},_schedule_update:function(e){var t=this;for(var n in e)t.updates[n]=e[n];t.update_timer||(t.update_timer=window.setTimeout(function(){t._update()},0))},_update:function(){var t=this;t.update_timer=null;if(t.updates.update_width){t.element.attr("width",t.options.width),t.svg.attr("width",t.options.width);var n=t.options.width,r=t.options.height,i=(n-(c=Math.min(n,r)))/2;o.default.select(t.canvas_datum).style({left:i+t.options.border-t.options.canvas_square_size/2+"px"}).attr("width",c-2*t.options.border-0+t.options.canvas_square_size),o.default.select(t.canvas_selected).style({left:i+t.options.border-t.options.canvas_selected_square_size/2+"px"}).attr("width",c-2*t.options.border-0+t.options.canvas_selected_square_size)}if(t.updates.update_height){t.element.attr("height",t.options.height),t.svg.attr("height",t.options.height);n=t.options.width;var a=((r=t.options.height)-(u=Math.min(n,r)))/2;o.default.select(t.canvas_datum).style({top:a+t.options.border-t.options.canvas_square_size/2+"px"}).attr("height",u-2*t.options.border-40+t.options.canvas_square_size),o.default.select(t.canvas_selected).style({top:a+t.options.border-t.options.canvas_selected_square_size/2+"px"}).attr("height",u-2*t.options.border-40+t.options.canvas_selected_square_size)}if(t.updates.update_x){n=t.options.width,r=t.options.height;var l=[0+(i=(n-(c=Math.min(t.options.width,t.options.height)))/2)+t.options.border,n-i-t.options.border-0],s=[0,c-2*t.options.border-0];t.x_scale=t._createScale(t.options.x_string,t.options.scale_x,l,!1),t.x_scale_canvas=t._createScale(t.options.x_string,t.options.scale_x,s,!1);a=(r-(u=Math.min(t.options.width,t.options.height)))/2;t.x_axis_offset=r-a-t.options.border-40,t.x_axis=o.default.svg.axis().scale(t.x_scale).orient("bottom"),t.x_axis_layer.attr("transform","translate(0,"+t.x_axis_offset+")").call(t.x_axis)}if(t.updates.update_y){n=t.options.width,r=t.options.height;var c=Math.min(t.options.width,t.options.height),u=Math.min(t.options.width,t.options.height);i=(n-c)/2,l=[r-(a=(r-u)/2)-t.options.border-40,0+a+t.options.border],s=[u-2*t.options.border-40,0];t.y_axis_offset=0+i+t.options.border,t.y_scale=t._createScale(t.options.y_string,t.options.scale_y,l,!1),t.y_scale_canvas=t._createScale(t.options.y_string,t.options.scale_y,s,!1),t.y_axis=o.default.svg.axis().scale(t.y_scale).orient("left"),t.y_axis_layer.attr("transform","translate("+t.y_axis_offset+",0)").call(t.y_axis)}if(t.updates.update_indices){t.inverse_indices={};for(var A=t.options.indices.length,d=0;d!=A;++d)t.inverse_indices[t.options.indices[d]]=d}if(t.updates.update_x_label){var h=t.svg.attr("width")/2,f=40;t.x_axis_layer.selectAll(".label").remove(),t.x_axis_layer.append("text").attr("class","label").attr("x",h).attr("y",f).style("text-anchor","middle").style("font-weight","bold").text(t.options.x_label)}if(t.updates.update_y_label){t.y_axis_layer.selectAll(".label").remove();h=-(t.y_axis_layer.node().getBBox().width+15),f=t.svg.attr("height")/2;t.y_axis_layer.append("text").attr("class","label").attr("x",h).attr("y",f).attr("transform","rotate(-90,"+h+","+f+")").style("text-anchor","middle").style("font-weight","bold").text(t.options.y_label)}if(t.updates.render_data){h=t.options.x,f=t.options.y;var p=t.options.v,g=t.options.filtered_indices,v=t.canvas_datum_layer,m=(d=-1,g.length),b=t.options.canvas_square_size,_=(N=t.options.canvas_square_border_size)/2,y=D=b-2*N,w=L=b-N,x=Date;window.performance&&(x=window.performance);var C=x.now();for(v.clearRect(0,0,t.canvas_datum.width,t.canvas_datum.height),v.strokeStyle="black",v.lineWidth=N;++d<m;){var k=p[I=g[d]];R=t._validateValue(k)?t.options.colorscale(k):e("#color-switcher").colorswitcher("get_null_color"),v.fillStyle=R,S=Math.round(t.x_scale_canvas(h[I])),E=Math.round(t.y_scale_canvas(f[I])),v.fillRect(S+N,E+N,D,y),v.strokeRect(S+_,E+_,L,w)}var M=x.now();console.log("Time to render "+g.length+" canvas points: "+(M-C)+" milliseconds.")}if(t.updates.render_selection){h=t.options.x,f=t.options.y,p=t.options.v;var S,E,R,N,T=t.options.filtered_selection,D=(v=t.canvas_selected_layer,d=-1,m=T.length,b=t.options.canvas_selected_square_size,_=(N=t.options.canvas_selected_square_border_size)/2,y=b-2*N),L=w=b-N;for(v.clearRect(0,0,t.canvas_selected.width,t.canvas_selected.height),v.strokeStyle="black",v.lineWidth=N;++d<m;){var I;k=p[I=T[d]];R=t._validateValue(k)?t.options.colorscale(k):e("#color-switcher").colorswitcher("get_null_color"),v.fillStyle=R,S=Math.round(t.x_scale_canvas(h[I])),E=Math.round(t.y_scale_canvas(f[I])),v.fillRect(S+N,E+N,D,y),v.strokeRect(S+_,E+_,L,w)}}if(t.updates.open_images){t.options.open_images.forEach(function(e){void 0===e.uri&&(e.uri=t.options.images[e.index]),void 0===e.width&&(e.width=t.options.pinned_width),void 0===e.height&&(e.height=t.options.pinned_height)});c=Number(t.svg.attr("width")),u=Number(t.svg.attr("height"));var P=[];t.options.open_images.forEach(function(e,n){P.push({index:e.index,uri:e.uri.trim(),image_class:"open-image",x:c*e.relx,y:u*e.rely,width:e.width,height:e.height,target_x:t.x_scale(t.options.x[e.index]),target_y:t.y_scale(t.options.y[e.index])})}),t._open_images(P)}if(t.updates.update_leaders&&e(".open-image").each(function(n,o){o=e(o);var r=Number(o.attr("data-index"));o.find(".leader").attr("x2",t.x_scale(t.options.x[r])-Number(o.attr("data-transx"))).attr("y2",t.y_scale(t.options.y[r])-Number(o.attr("data-transy"))).attr("data-targetx",t.x_scale(t.options.x[r])).attr("data-targety",t.y_scale(t.options.y[r]))}),t.updates.render_legend){t.legend_layer.append("defs").append("linearGradient").attr("id","color-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");t.legend_layer.append("rect").classed("color",!0).attr("width",10).attr("height",200).attr("x",0).attr("y",0).style("fill","url(#color-gradient)")}if(t.updates.update_legend_colors){var z=t.legend_layer.select("#color-gradient").selectAll("stop").data(t.options.gradient);z.exit().remove(),z.enter().append("stop"),z.attr("offset",function(e){return e.offset+"%"}).attr("stop-color",function(e){return e.color})}if(t.updates.update_legend_position){n=Number(t.options.width),r=Number(t.options.height),c=Math.min(t.options.width,t.options.height),u=Math.min(t.options.width,t.options.height);var H=parseInt((u-t.options.border-40)/2),F=t.y_axis_layer.node().getBBox().width;i=(n+t.x_axis_layer.node().getBBox().width)/2;if("moved"!=t.legend_layer.attr("data-status")){var B=parseInt(F+10+i),$=parseInt(r/2-H/2);t.legend_layer.attr("transform","translate("+B+","+$+")").attr("data-transx",B).attr("data-transy",$)}t.legend_layer.select("rect.color").attr("height",H)}if(t.updates.update_legend_axis){l=[0,parseInt(t.legend_layer.select("rect.color").attr("height"))];t.legend_scale=t._createScale(t.options.v_string,t.options.scale_v,l,!0),t.legend_axis=o.default.svg.axis().scale(t.legend_scale).orient("right"),t.legend_axis_layer.attr("transform","translate("+parseInt(t.legend_layer.select("rect.color").attr("width"))+",0)").call(t.legend_axis)}if(t.updates.update_v_label){console.log("updating v label."),t.legend_layer.selectAll(".label").remove();h=-15,f=(H=parseInt(t.legend_layer.select("rect.color").attr("height")))/2;t.legend_layer.append("text").attr("class","label").attr("x",h).attr("y",f).attr("transform","rotate(-90,"+h+","+f+")").style("text-anchor","middle").style("font-weight","bold").text(t.options.v_label)}t.updates={}},_sync_open_images:function(){var t=Number(this.svg.attr("width")),n=Number(this.svg.attr("height")),o=[];e(".open-image").each(function(r,i){var a=(i=e(i)).find("image.image");o.push({index:Number(i.attr("data-index")),uri:i.attr("data-uri"),relx:Number(i.attr("data-transx"))/t,rely:Number(i.attr("data-transy"))/n,width:Number(a.attr("width")),height:Number(a.attr("height"))})}),this.element.trigger("open-images-changed",[o])},_open_images:function(n){var i=this;if(0!=n.length){var l=n[0];if(-1==e.inArray(l.index,i.options.hidden_simulations)){if("hover-image"!=l.image_class||i.opening_image==l.index){if(i.image_layer.select("g."+l.image_class+"[data-uri='"+l.uri+"']").empty()){void 0===l.width&&(l.width=i.options.pinned_width),void 0===l.height&&(l.height=i.options.pinned_height),void 0===l.x&&(l.x=i._getDefaultXPosition(l.index,l.width)),void 0===l.y&&(l.y=i._getDefaultYPosition(l.index,l.height)),i.datum_layer.selectAll("circle[data-index='"+l.index+"']").classed("openHover",!0);var s=i.image_layer.append("g").attr("data-uri",l.uri).attr("data-transx",l.x).attr("data-transy",l.y).attr("transform","translate("+l.x+", "+l.y+")").attr("class",l.image_class+" image-frame").attr("data-index",l.index).attr("data-uri",l.uri).call(o.default.behavior.drag().on("drag",function(){if(0<=o.default.event.y&&o.default.event.y<=i.options.height&&0<=o.default.event.x&&o.default.event.x<=i.options.width){var e=o.default.select(this),t=Number(e.attr("data-transx")),n=Number(e.attr("data-transy"));t+=o.default.event.dx,n+=o.default.event.dy,e.attr("data-transx",t),e.attr("data-transy",n),e.attr("transform","translate("+t+", "+n+")");var r=e.select(".leader");r.attr("x2",Number(r.attr("data-targetx"))-t),r.attr("y2",Number(r.attr("data-targety"))-n)}}).on("dragstart",function(){i.state="moving";var e=o.default.select(o.default.event.sourceEvent.target);if(e.classed("outline")||e.classed("image")){o.default.event.sourceEvent.stopPropagation();var t=o.default.select(this);t.classed("hover-image")&&(i.opening_image=null,i.close_hover_timer&&(window.clearTimeout(i.close_hover_timer),i.close_hover_timer=null),t.classed("hover-image",!1).classed("open-image",!0),l.image_class="open-image",i.datum_layer.selectAll("circle.openHover").classed("openHover",!1))}}).on("dragend",function(){i.state="",i._sync_open_images()})).on("mousedown",function(){o.default.event.target.classList.contains("image")&&e(o.default.event.target.parentNode).detach().appendTo(i.image_layer.node())}).on("mouseup",function(){});"target_x"in l&&"target_y"in l&&s.append("line").attr("class","leader").attr("x1",l.width/2).attr("y1",l.height/2).attr("x2",l.target_x-Number(s.attr("data-transx"))).attr("y2",l.target_y-Number(s.attr("data-transy"))).attr("data-targetx",l.target_x).attr("data-targety",l.target_y).style("stroke","black").style("stroke-width",1);s.append("rect").attr("class","outline").attr("x",-.5).attr("y",-.5).attr("width",l.width+1).attr("height",l.height+1).style("stroke","black").style("stroke-width","1px").style("fill","white");i.close_hover_timer=window.setTimeout(function(){i._hover_timeout(l.index,0)},1e3)}if(l.uri in i.options.image_cache){console.log("Displaying image "+l.uri+" from cache");var c=(window.URL||window.webkitURL).createObjectURL(i.options.image_cache[l.uri]);void 0===l.width&&(l.width=i.options.pinned_width),void 0===l.height&&(l.height=i.options.pinned_height),void 0===l.x&&(l.x=i._getDefaultXPosition(l.index,l.width)),void 0===l.y&&(l.y=i._getDefaultYPosition(l.index,l.height));(s=i.image_layer.select("g."+l.image_class+"[data-uri='"+l.uri+"']")).append("image").attr("class","image").attr("xlink:href",c).attr("x",0).attr("y",0).attr("width",l.width).attr("height",l.height).attr("data-ratio",l.width/l.height);var u=s.append("g").attr("class","resize-handle").attr("transform","translate("+(l.width-9)+", "+(l.height-9)+")").call(o.default.behavior.drag().on("drag",function(){if(0<=o.default.event.y&&o.default.event.y<=i.options.height&&0<=o.default.event.x&&o.default.event.x<=i.options.width){var e,t,n=o.default.select(this.parentNode),r=n.select("image.image"),a=(Number(r.attr("width")),Number(r.attr("height")),n.select("rect.outline")),l=o.default.select(this),s=n.select("line.leader"),c=n.select(".pin-button"),u=Number(r.attr("data-ratio")),A=o.default.event.x,d=o.default.event.y;A<50&&(A=50),d<50&&(d=50),(t=(e=A)/u)>d&&(e=(t=d)*u),r.attr("width",e),r.attr("height",t),a.attr("width",e+1),a.attr("height",t+1),l.attr("transform","translate("+(e-9)+", "+(t-9)+")"),c.attr("transform","translate("+(e-20)+",0)"),s.attr("x1",e/2),s.attr("y1",t/2)}}).on("dragstart",function(){i.state="resizing",o.default.selectAll([this.parentNode,o.default.select("#scatterplot").node()]).classed("resizing",!0),o.default.event.sourceEvent.stopPropagation();var e=o.default.select(this.parentNode);e.classed("hover-image")&&(i.opening_image=null,i.close_hover_timer&&(window.clearTimeout(i.close_hover_timer),i.close_hover_timer=null),e.classed("hover-image",!1).classed("open-image",!0),l.image_class="open-image",i.datum_layer.selectAll("circle.openHover").classed("openHover",!1))}).on("dragend",function(){o.default.selectAll([this.parentNode,o.default.select("#scatterplot").node()]).classed("resizing",!1),i.state="",i._sync_open_images()})).on("mousedown",function(){}).on("mouseup",function(){});u.append("path").attr("d","M0,8 L8,0 M4,8 L8,4").style("stroke","#878787").style("stroke-width",1).style("pointer-events","none"),u.append("rect").attr("class","resize-handle-mousetarget").attr("width",10).attr("height",10).attr("fill","transparent");var A=s.append("g").attr("class","close-button");return A.append("rect").attr("x",5).attr("y",5).attr("width",16).attr("height",16).attr("rx",2).attr("ry",2).style("fill","rgba(0%,0%,0%,0.2)").on("mousedown",function(){o.default.event.stopPropagation()}).on("mouseup",function(){o.default.event.stopPropagation()}).on("click",function(){o.default.event.stopPropagation(),o.default.select(o.default.event.target.parentNode.parentNode).remove(),i._sync_open_images()}),A.append("path").attr("d","M8 8 l10 10 m0 -10 l-10 10").style("stroke","rgba(100%,100%,100%, 0.8)").style("stroke-width",3).style("pointer-events","none"),s.append("g").attr("class","pin-button").attr("transform","translate("+(l.width-20)+",0)").append("image").attr("class","pin-icon").attr("x",2).attr("y",2).attr("width",16).attr("height",16).attr("xlink:href",a.default).on("mousedown",function(){o.default.event.stopPropagation()}).on("mouseup",function(){o.default.event.stopPropagation()}).on("click",function(){o.default.event.stopPropagation(),i.opening_image=null,i.close_hover_timer&&(window.clearTimeout(i.close_hover_timer),i.close_hover_timer=null),i.datum_layer.selectAll("circle.openHover").classed("openHover",!1);var e=o.default.select(o.default.event.target.parentNode.parentNode),t=e.select("image.image"),n=e.select("rect.outline"),r=e.select("g.resize-handle"),a=e.select("line.leader"),s=e.select(".pin-button");e.classed("hover-image",!1).classed("open-image",!0);var c=i.options.pinned_width,u=i.options.pinned_height,A=i._getDefaultXPosition(l.index,c),d=i._getDefaultYPosition(l.index,u);e.attr("data-transx",A).attr("data-transy",d).attr("transform","translate("+A+", "+d+")"),t.attr("width",c),t.attr("height",u),n.attr("width",c+1),n.attr("height",u+1),r.attr("transform","translate("+(c-9)+", "+(u-9)+")"),s.attr("transform","translate("+(c-20)+",0)"),a.attr("x1",c/2).attr("y1",u/2).attr("x2",l.target_x-Number(e.attr("data-transx"))).attr("y2",l.target_y-Number(e.attr("data-transy"))),i._sync_open_images()}),l.no_sync||i._sync_open_images(),void i._open_images(n.slice(1))}if(!i.login_open){i.login_open=!0;var d=(0,r.default)(l.uri);i.remotes.get_remote({hostname:d.hostname(),title:"Login to "+d.hostname(),message:"Loading "+d.pathname(),cancel:function(){i.login_open=!1},success:function(e){var o=new XMLHttpRequest;o.image=l,o.open("GET",t.default+"remotes/"+e+"/file"+d.pathname(),!0),o.responseType="arraybuffer",o.onload=function(e){if(404==this.status||500==this.status)return i.remotes.delete_remote(d.hostname()),void i._open_images(n);if(400!=this.status){var t=new Uint8Array(this.response),o=new Blob([t],{type:this.getResponseHeader("content-type")});return i.options.image_cache[l.uri]=o,void i._open_images(n)}console.log(this),console.log(this.getAllResponseHeaders());var r=this.getResponseHeader("slycat-message"),a=this.getResponseHeader("slycat-hint");r&&a?window.alert(r+"\n\n"+a):r?window.alert(r):window.alert("Error loading image "+this.image.uri+": "+this.statusText)},o.send(),i.login_open=!1}})}}}else i._open_images(n.slice(1))}},_close_hidden_simulations:function(){var t=this;e("g.image-frame").filter(function(){return-1==e.inArray(e(this).data("index"),t.options.filtered_indices)}).remove()},_schedule_hover_canvas:function(e){var t=this;t._cancel_hover_canvas(),""==t.state&&(t.hover_timer_canvas=window.setTimeout(function(){t._open_hover_canvas(e)},t.options.hover_time))},_open_hover_canvas:function(e){if(""==this.state){var t=this._offsetX(e),n=this._offsetY(e),o=this.options.filtered_indices,r=this.options.filtered_selection,i=this.options.canvas_square_size,a=i/2,l=this.options.canvas_selected_square_size,s=l/2;this._open_first_match(t,n,r,s,l)||this._open_first_match(t,n,o,a,i)}},_open_first_match:function(e,t,n,o,r){for(var i=this.options.x,a=this.options.y,l=n.length-1;l>-1;l--){var s=n[l],c=Math.round(this.x_scale(i[s]))-o,u=Math.round(this.y_scale(a[s]))-o;if(e>=c&&e<=c+r&&t>=u&&t<=u+r)return""!=this.options.images[s].trim()&&this._open_hover(s),!0}return!1},_cancel_hover_canvas:function(){this.hover_timer_canvas&&(window.clearTimeout(this.hover_timer_canvas),this.hover_timer_canvas=null)},_schedule_hover:function(e){var t=this;""==t.state&&null!=t.options.images&&0!=t.options.images.length&&""!=t.options.images[t.options.indices[e]].trim()&&(t._cancel_hover(),t.hover_timer=window.setTimeout(function(){t._open_hover(e)},t.options.hover_time))},_cancel_hover:function(){this.hover_timer&&(window.clearTimeout(this.hover_timer),this.hover_timer=null)},_open_hover:function(e){if(this.datum_layer.select("circle.openHover[data-index='"+e+"']").empty()){this._close_hover(),this.opening_image=e;var t=this.svg.attr("width"),n=this.svg.attr("height"),o=.85*Math.min(t,n),r=.85*Math.min(t,n);this._open_images([{index:this.options.indices[e],uri:this.options.images[this.options.indices[e]].trim(),image_class:"hover-image",x:Math.min(this.x_scale(this.options.x[e])+10,t-o-this.options.border-10),y:Math.min(this.y_scale(this.options.y[e])+10,n-r-this.options.border-10),width:o,height:r,target_x:this.x_scale(this.options.x[e]),target_y:this.y_scale(this.options.y[e]),no_sync:!0}])}},_hover_timeout:function(e,t){var n=this;t>1e3?n._close_hover():n._is_hovering(e)?n.close_hover_timer=window.setTimeout(function(){n._hover_timeout(e,0)},50):n.close_hover_timer=window.setTimeout(function(){n._hover_timeout(e,t+50)},50)},_is_hovering:function(e){var t=this.image_layer.selectAll(".hover-image[data-index='"+e+"']:hover").empty(),n=this.datum_layer.selectAll("circle[data-index='"+e+"']:hover").empty(),o=this.selected_layer.selectAll("circle[data-index='"+e+"']:hover").empty();return!(t&&n&&o)},_close_hover:function(){this.opening_image=null,this.close_hover_timer&&(window.clearTimeout(this.close_hover_timer),this.close_hover_timer=null),this._cancel_hover(),this.image_layer.selectAll(".hover-image").remove(),this.datum_layer.selectAll("circle.openHover").classed("openHover",!1)},_offsetX:function(t){return t.pageX-t.currentTarget.getBoundingClientRect().left-e(document).scrollLeft()},_offsetY:function(t){return t.pageY-t.currentTarget.getBoundingClientRect().top-e(document).scrollTop()},pin:function(e){var t=this,n=t.options.pinned_width,o=t.options.pinned_height,r=[];e.forEach(function(e,i){r.push({index:t.options.indices[e],uri:t.options.images[t.options.indices[e]].trim(),image_class:"open-image",x:t._getDefaultXPosition(e,n),y:t._getDefaultYPosition(e,o),width:n,height:o,target_x:t.x_scale(t.options.x[e]),target_y:t.y_scale(t.options.y[e])})}),t._open_images(r)}})}).call(this,n(1))},430:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAs0lEQVQ4jdXRsWoCQRgE4A9RLMRCsFHsrO2jb5E6PoaIZTpLa/FZrJJ30IT0gaSwsBBB0OLu4LLe6WllBqbZf2b+2V3+Ewao3Wvu44B31G81d/CJY8y3IiFNPOEV3ylzwmUiLGeYv9C9suDn0nCcsTHhHs/X6sMoJ2BSxAwVfATmHRqhsJQTMEUVs9TZGptQmPWIL2ihhy1WmIt+4wxhQDtuNYxrw0J0pd+ctn9QLSJ6LJwAXgcqz7/uBCYAAAAASUVORK5CYII="},431:function(e,t,n){"use strict";(function(e){var t=r(n(62)),o=r(n(15));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(3));function r(e){return e&&e.__esModule?e:{default:e}}n(282),e.widget("parameter_image.controls",{options:{mid:null,model_name:null,aid:null,metadata:null,"x-variable":null,"y-variable":null,"image-variable":null,"color-variable":null,"auto-scale":!0,x_variables:[],y_variables:[],image_variables:[],color_variables:[],rating_variables:[],category_variables:[],selection:[],hidden_simulations:[],indices:[]},_create:function(){var t=this;this.x_label=e("<label for='x-axis-switcher'>X Axis:</label>").appendTo(this.element),this.x_select=e("<select id='x-axis-switcher' name='x-axis-switcher' />").change(function(){t.element.trigger("x-selection-changed",this.value)}).appendTo(this.element),this.y_label=e("<label for='y-axis-switcher'>Y Axis:</label>").appendTo(this.element),this.y_select=e("<select id='y-axis-switcher' name='y-axis-switcher' />").change(function(){t.element.trigger("y-selection-changed",this.value)}).appendTo(this.element),null!=this.options.image_variables&&this.options.image_variables.length>0&&(this.images_label=e("<label for='images-switcher'>Image Set:</label>").appendTo(this.element),this.images_select=e("<select id='images-switcher' name='images-switcher' />").change(function(){t.element.trigger("images-selection-changed",this.value)}).appendTo(this.element)),this.color_label=e("<label for='color-variable-switcher'>Point Color:</label>").appendTo(this.element),this.color_select=e("<select id='color-variable-switcher' name='color-variable-switcher' />").change(function(){t.element.trigger("color-selection-changed",this.value)}).appendTo(this.element),this.selection_label=e("<label for='selection-control'>Selection:</label>").appendTo(this.element),this.selection_select=e("<select id='selection-control' name='selection-control' />").change(function(){var n=e("option:selected",this),o=n.attr("label"),r=(n.text(),this.value);if("set"==o||"clear"==o){var i=n.parent().attr("label");"set"==o?function(t,n){e("#set-value-form #set-value-form-variable").text(t),e("#set-value-form input").attr("value",""),e("#set-value-form input#variable-index").attr("value",n),e("#set-value-form .dialogErrorMessage").empty(),e("#set-value-form").dialog("open")}(i,r):"clear"==o&&function(t,n){e("#clear-value-form #clear-value-form-variable").text(t),e("#set-value-form input").attr("value",""),e("#clear-value-form input#variable-index").attr("value",n),e("#clear-value-form").dialog("open")}(i,r)}else"hide"==r?t.element.trigger("hide-selection",t.options.selection):"show"==r?t.element.trigger("show-selection",t.options.selection):"pin"==r&&t.element.trigger("pin-selection",t.options.selection);this.selectedIndex=0}).appendTo(this.element),this.show_all_button=e("<button>Show All</button>").click(function(){t.element.trigger("show-all")}).appendTo(this.element),this.auto_scale=e("<input id='auto-scale-option' name='auto-scale-option' value='auto-scale' type='checkbox' checked='true'>").change(function(){t.element.trigger("auto-scale",this.checked)}).appendTo(this.element),this.auto_scale_label=e("<label for='auto-scale-option'>Auto Scale</label>").appendTo(this.element),this.csv_button=e("<button>Download Data Table</button>").click(function(){0==t.options.selection.length&&0==t.options.hidden_simulations.length?t._write_data_table():function(){var n="";t.options.selection.length>0&&(n+="You have "+t.options.selection.length+" rows selected. ");if(t.options.hidden_simulations.length>0){var o=t.options.metadata["row-count"]-t.options.hidden_simulations.length;n+="You have "+o+" rows visible. "}n+="What would you like to do?",e("#csv-save-choice-form #csv-save-choice-label").text(n);var r=e.extend({},t.save_choice_buttons);0==t.options.selection.length&&delete r["Save Selected Rows"];0==t.options.hidden_simulations.length&&delete r["Save Visible Rows"];e("#csv-save-choice-form").dialog("option","buttons",r),e("#csv-save-choice-form").dialog("open")}()}).appendTo(this.element),e("#set-value-form").dialog({modal:!0,autoOpen:!1,buttons:{Apply:function(){var n=e("input#variable-index",this).val(),o=e("input#value",this).val().trim(),r="string"!=t.options.metadata["column-types"][n],i=o.length>0;if(i&&r&&isNaN(Number(o))&&(i=!1),i)t.element.trigger("set-value",{selection:t.options.selection,variable:n,value:r?o:'"'+o+'"'}),e(this).dialog("close");else{var a="Please enter a value.";r&&(a="Please enter a numeric value."),e(".dialogErrorMessage",this).text(a)}},Cancel:function(){e(this).dialog("close")}}}),e("#clear-value-form").dialog({modal:!0,autoOpen:!1,buttons:{Clear:function(){var n=e("input#variable-index",this).val();t.element.trigger("set-value",{selection:t.options.selection,variable:n,value:NaN}),e(this).dialog("close")},Cancel:function(){e(this).dialog("close")}}}),t.save_choice_buttons={"Save The Whole Table":function(){t._write_data_table(),e(this).dialog("close")},"Save Visible Rows":function(){t._write_data_table(t._filterIndices()),e(this).dialog("close")},"Save Selected Rows":function(){t._write_data_table(t.options.selection),e(this).dialog("close")},Cancel:function(){e(this).dialog("close")}},e("#csv-save-choice-form").dialog({modal:!0,autoOpen:!1,buttons:t.save_choice_buttons}),t._set_x_variables(),t._set_y_variables(),t._set_image_variables(),t._set_color_variables(),t._set_auto_scale(),t._set_selection_control(),t._set_show_all()},_write_data_table:function(n){var r=this;e.ajax({type:"POST",url:o.default+"models/"+r.options.mid+"/arraysets/"+r.options.aid+"/data",data:(0,t.default)({hyperchunks:"0/.../..."}),contentType:"application/json",success:function(e){r._write_csv(r._convert_to_csv(e,n),r.options.model_name+"_data_table.csv")},error:function(e,t,n){window.alert("Error retrieving data table: "+n)}})},_write_csv:function(e,t){var n=document,o=n.createElement("a");t=t||"slycatDataTable.csv";if(o.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),"download"in o)return o.setAttribute("download",t),o.innerHTML="downloading...",n.body.appendChild(o),setTimeout(function(){var e=n.createEvent("MouseEvent");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e),n.body.removeChild(o)},66),!0;console.log("++ firefox/chrome detect failed")},_convert_to_csv:function(e,t){var n,o,r,i=t||[],a=e[0].length,l=e.length,s="";for(o=0;o<l;o++)s+=this.options.metadata["column-names"][o]+",";for(s=s.slice(0,-1),s+="\n",n=0;n<a;n++)if(0==i.length||i.indexOf(n)>-1){for(o=0;o<l;o++)null===(r=e[o][n])&&(r=NaN),s+=r+",";s=s.slice(0,-1),s+="\n"}return s},_set_x_variables:function(){var t=this;this.x_select.empty();for(var n=0;n<this.options.x_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.x_variables[n]]).attr("value",this.options.x_variables[n]).attr("selected",function(){return t.options["x-variable"]==t.options.x_variables[n]&&"selected"}).appendTo(this.x_select)},_set_y_variables:function(){var t=this;this.y_select.empty();for(var n=0;n<this.options.y_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.y_variables[n]]).attr("value",this.options.y_variables[n]).attr("selected",function(){return t.options["y-variable"]==t.options.y_variables[n]&&"selected"}).appendTo(this.y_select)},_set_image_variables:function(){var t=this;if(null!=this.options.image_variables&&this.options.image_variables.length>0){this.images_select.empty();for(var n=0;n<this.options.image_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.image_variables[n]]).attr("value",this.options.image_variables[n]).attr("selected",function(){return t.options["image-variable"]==t.options.image_variables[n]&&"selected"}).appendTo(this.images_select)}},_set_color_variables:function(){var t=this;this.color_select.empty();for(var n=0;n<this.options.color_variables.length;n++)e("<option />").text(this.options.metadata["column-names"][this.options.color_variables[n]]).attr("value",this.options.color_variables[n]).attr("selected",function(){return t.options["color-variable"]==t.options.color_variables[n]&&"selected"}).appendTo(this.color_select)},_set_auto_scale:function(){this.auto_scale.prop("checked",this.options["auto-scale"])},_set_selection_control:function(){this.selection_select.empty(),e("<option />").text("Pick Action").appendTo(this.selection_select);for(var t=0;t<this.options.rating_variables.length;t++){var n=e("<optgroup />").attr("label",this.options.metadata["column-names"][this.options.rating_variables[t]]).appendTo(this.selection_select);e("<option />").text("Set").attr("value",this.options.rating_variables[t]).attr("label","set").appendTo(n)}for(t=0;t<this.options.category_variables.length;t++){n=e("<optgroup />").attr("label",this.options.metadata["column-names"][this.options.category_variables[t]]).appendTo(this.selection_select);e("<option />").text("Set").attr("value",this.options.category_variables[t]).attr("label","set").appendTo(n),e("<option />").text("Clear").attr("value",this.options.category_variables[t]).attr("label","clear").appendTo(n)}var o=e("<optgroup />").attr("label","Scatterplot Points").appendTo(this.selection_select);e("<option />").text("Hide").attr("value","hide").appendTo(o),e("<option />").text("Show").attr("value","show").appendTo(o),e("<option />").text("Pin").attr("value","pin").appendTo(o),this._set_selection()},_set_selected_x:function(){this.x_select.val(this.options["x-variable"])},_set_selected_y:function(){this.y_select.val(this.options["y-variable"])},_set_selected_image:function(){null!=this.options["image-variable"]&&this.options.image_variables.length>0&&this.images_select.val(this.options["image-variable"])},_set_selected_color:function(){this.color_select.val(this.options["color-variable"])},_set_selection:function(){this.selection_select.prop("disabled",0==this.options.selection.length),this.selection_label.toggleClass("disabled",0==this.options.selection.length)},_set_show_all:function(){var e=0==this.options.hidden_simulations.length,t="Show All Hidden Scatterplot Points";e&&(t="There are currently no hidden scatterplot points to show."),this.show_all_button.prop("disabled",e),this.show_all_button.attr("title",t)},_filterIndices:function(){for(var t=this.options.indices,n=this.options.hidden_simulations,o=this._cloneArrayBuffer(t),r=t.length-1;r>=0;r--){e.inArray(t[r],n)>-1&&o.splice(r,1)}return o},_cloneArrayBuffer:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},_setOption:function(e,t){this.options[e]=t,"x-variable"==e?this._set_selected_x():"y-variable"==e?this._set_selected_y():"image-variable"==e?this._set_selected_image():"color-variable"==e?this._set_selected_color():"image_variables"==e?this._set_image_variables():"x_variables"==e?this._set_x_variables():"y_variables"==e?this._set_y_variables():"color_variables"==e?this._set_color_variables():"selection"==e?this._set_selection():"hidden_simulations"==e&&this._set_show_all()}})}).call(this,n(1))},432:function(e,t,n){"use strict";(function(e){var t=a(n(15)),o=a(n(283)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(317)),i=a(n(25));function a(e){return e&&e.__esModule?e:{default:e}}e.widget("parameter_image.dendrogram",{options:{clusters:[],cluster:0,cluster_data:null,collapsed_nodes:null,expanded_nodes:null,selected_nodes:null,color_array:null,colorscale:null,data_table_index_array:null,dendrogram_sort_order:!0,highlight:[],hidden_simulations:[],images:[],square_size:8,square_border_size:1,selected_square_size:16,selected_square_border_size:2,hover_timeout:1e3,image_cache:{},cache_references:[{}],login_dialog:null},_create:function(){var t=this;this.remotes=r.create_pool(),t.login_open=!1,t.options.image_cache=t.options.cache_references[0],t.preview=e("<div id='image-preview'>").on("mouseover",function(){t._clear_hover_timer()}).on("mouseout",function(e){t._close_preview()}).on("click",function(e){t._close_preview(!0)}).appendTo(e("#scatterplot-pane")),t.preview_image=e("<img id='image-preview-image' />").appendTo(t.preview),this._set_cluster()},_set_cluster:function(){var t=this;t.container=o.default.select("#dendrogram-viewer");for(var n=this.options.cluster_data,r=this.options.collapsed_nodes,i=this.options.expanded_nodes,a=this.options.selected_nodes,l=n.linkage,s=n["input-indices"],c=n.exemplars,u=[],A=0;A<s.length;A++)u.push({"node-index":u.length,leaves:1,exemplar:c[A],selected:!1,"image-index":A,"data-table-index":s[A]});for(A=0;A<l.length;A++)u.push({"node-index":u.length,children:[u[l[A][0]],u[l[A][1]]],leaves:l[A][3],exemplar:c[A+s.length],selected:!1,"image-index":null,"data-table-index":null});var d=this.element.parent().width()-20-20-30,h=this.element.parent().height()-20-20,f=o.default.layout.cluster().size([h,d]).separation(function(){return 1});t.container.selectAll("g").remove(),t.sortControl=e('<div id="dendrogram-sort-control"></div>').appendTo("#dendrogram-pane").click(function(){e(this).hasClass("selected")||(t.options.dendrogram_sort_order=!0,t._set_dendrogram_sort_order_state(),t.element.trigger("sort-by-dendrogram-order"))}),this._set_dendrogram_sort_order_state();var p=t.container.append("svg:g").attr("transform","translate(20,20)"),g=u[u.length-1];t.root=g,g.x0=h/2,g.y0=0;var v=f.nodes(g).reverse(),m=-1;if(v.forEach(function(e){m=Math.max(m,e.depth)}),null==r&&null==i&&null==a||v.forEach(function(e){null!=a&&a.length>0&&a.indexOf(e["node-index"])>-1&&(e.selected=!0),r&&r.indexOf(e["node-index"])>-1&&e.children?x(e):i&&i.indexOf(e["node-index"])>-1&&e._children&&x(e)}),null==i&&null==r&&v.forEach(function(e,t){3==e.depth&&x(e)}),null==a)w(t,g,!0);else{t._style_selected_nodes(),t._color_links();var b=[];y(g,b),t.element.trigger("node-selection-changed",{node:null,skip_bookmarking:!0,selection:b})}function _(e,t){return e.target._children?"M"+e.source.y+","+e.source.x+"V"+e.target.x+"H"+d:"M"+e.source.y+","+e.source.x+"V"+e.target.x+"H"+e.target.y}function y(e,t){if(e.selected&&t.push({"node-index":e["node-index"],"image-index":e["image-index"],"data-table-index":e["data-table-index"]}),e.children)for(var n=0;n<e.children.length;n++)y(e.children[n],t);if(e._children)for(n=0;n<e._children.length;n++)y(e._children[n],t)}function w(e,t,n){!function e(t){if(t.selected=!0,t.children)for(var n=0;n<t.children.length;n++)e(t.children[n]);if(t._children)for(n=0;n<t._children.length;n++)e(t._children[n])}(t),e._style_selected_nodes(),e._color_links();var o=[];y(g,o),e.options.selected_nodes=e._getNodeIndexes(o),e.element.trigger("node-selection-changed",{node:t,skip_bookmarking:n,selection:o})}function x(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),t.element.trigger("node-toggled",e)}!function n(r,i){var a=o.default.event&&o.default.event.altKey?5e3:500;var l=f.nodes(g).reverse();l.forEach(function(e){(e.children||e._children)&&(e.y=e.depth*(d/m))});var s=p.selectAll("g.node").data(l,function(e){return e["node-index"]});function c(e,t){if(e.children)for(var n=0;n<e.children.length;n++)e.children[n].depth==t&&e.children[n].children?x(e.children[n]):e.children[n].depth<t&&e.children[n]._children?(x(e.children[n]),c(e.children[n],t)):e.children[n].depth<t&&e.children[n].children&&c(e.children[n],t)}var A=s.enter().append("svg:g").attr("class","node").classed("selected",function(e){return e.selected}).attr("transform",function(e){return"translate("+r.y0+","+r.x0+")"}).style("opacity",1e-6);var h=A.append("svg:g").attr("class","subtree").style("opacity",1e-6).style("display",function(e){return e.leaves>1?"inline":"none"}).on("click",function(e){t._close_preview(!0),x(e);c(e,e.depth+9999),n(e)});h.append("svg:path").attr("class","subtree-glyph").attr("title","Expand all").attr("alt","Expand all").attr("d","M 0 0 L 40 -13 L 40 13 Z").style("fill","url(#subtree-gradient)");h.append("svg:path").attr("class","filled-glyph").attr("title","Expand all").attr("alt","Expand all").attr("d","M 0 0 L 40 -13 L 40 13 Z").style("fill","#7767b0");h.append("svg:text").attr("x",28).attr("dy",".4em").attr("text-anchor","middle").attr("title","Expand all").attr("alt","Expand all").text(function(e){return e.leaves});h.append("svg:text").attr("x",-9).attr("dy",-5).attr("text-anchor","middle").text("+").style("fill","black").on("click",function(e){t._close_preview(!0),x(e);c(e,e.depth+2),n(e),o.default.event.stopPropagation()});var v=A.append("svg:g").attr("class","glyph").on("click",function(n){t._close_preview(!0),o.default.event.ctrlKey||o.default.event.metaKey?n.selected?function(t,n,o){(function e(t){t.selected=!1;if(t.children)for(var n=0;n<t.children.length;n++)e(t.children[n]);if(t._children)for(var n=0;n<t._children.length;n++)e(t._children[n])})(n),function t(n){if(n.children||n._children){if(n.selected){var o=!1,r=!1;return n.children&&e.each(n.children,function(e,n){r=t(n),o=o||r}),n._children&&e.each(n._children,function(e,n){r=t(n),o=o||r}),n.selected=o,o}return n.children&&e.each(n.children,function(e,n){t(n)}),n._children&&e.each(n._children,function(e,n){t(n)}),!1}return!!n.selected}(g),t._style_selected_nodes(),t._color_links();var r=[];y(g,r),t.options.selected_nodes=t._getNodeIndexes(r),t.element.trigger("node-selection-changed",{node:n,skip_bookmarking:o,selection:r})}(t,n):w(t,n):(e.each(u,function(e,t){t.selected=!1}),w(t,n))});v.append("svg:circle").attr("r",4.5).style("cursor","pointer").style("fill",function(e){return e.children||e._children?"#dbd9eb":"white"});v.append("svg:text").attr("x",-9).attr("dy",13).attr("text-anchor","middle").text("").style("fill","black").style("display",function(e){return e._children||!e.children&&!e._children?"none":"inline"}).on("click",function(e){t._close_preview(!0),x(e),n(e),o.default.event.stopPropagation()});t.options.square_size,t.options.square_border_size;t.options.selected_square_size,t.options.selected_square_border_size;var b=A.append("svg:g").attr("class","square").attr("transform",function(e){return e.leaves>1?"translate(65, 0)":"translate(25, 0)"}).style("opacity",1e-6).style("display","none");b.append("svg:rect").style("stroke","black").style("fill",function(n,o){if(null!==t.options.colorscale&&null!=t.options.color_array){var r=n["data-table-index"];if(null!=r){var i=t.options.color_array[r];return null!=i?t.options.colorscale(i):e("#color-switcher").colorswitcher("get_null_color")}return"black"}return"black"}).classed("nullValue",function(e,n){return null!=e["data-table-index"]&&(null==e["data-table-index"]||null===t.options.color_array[e["data-table-index"]])}).on("click",function(e){t._close_preview(!0),t._handle_highlight(e,o.default.event,this)});t._set_highlight();var C=s.transition().duration(a).attr("transform",function(e){return"translate("+(e._children?d-39:e.y+1)+","+e.x+")"}).style("opacity",1);s.classed("leaf",function(e){return e._children||!e.children&&!e._children});s.filter(".leaf").on("mouseover",function(e){t._open_preview(e)}).on("mouseout",function(e){t._close_preview()});C.select(".subtree").style("opacity",function(e){return e._children?1:1e-6}).style("display",function(e){return e._children?"inline":"none"});C.select(".subtree-glyph").style("fill","url(#subtree-gradient)");C.select(".square").style("opacity",function(e){return e._children||!e.children&&!e._children?1:1e-6}).each("end",function(){o.default.select(this).style("display",function(e){return e._children||!e.children&&!e._children?"inline":"none"})});C.select(".glyph text").style("display",function(e){return e._children||!e.children&&!e._children?"none":"inline"});var k=s.exit().transition().duration(a).attr("transform",function(e){return"translate("+r.y+","+r.x+")"}).style("opacity",1e-6).remove();k.select(".square").each("start",function(){o.default.select(this).style("display","none")});var M=p.selectAll("path.link").data(f.links(l),function(e){return e.target["node-index"]});M.enter().insert("svg:path","g").attr("class","link").attr("d",function(e){var t={x:r.x0,y:r.y0};return _({source:t,target:t})}).transition().duration(a).attr("d",_);M.transition().duration(a).attr("d",_);M.exit().transition().duration(a).attr("d",function(e){var t={x:r.x,y:r.y};return _({source:t,target:t})}).remove();t._color_links();l.forEach(function(e){e.x0=e.x,e.y0=e.y});if(!i){var S=[],E=[];!function e(t){if(t.children){S.push(t["node-index"]);for(var n=0;n<t.children.length;n++)e(t.children[n])}else t._children&&E.push(t["node-index"])}(g),t.options.expanded_nodes=S,t.options.collapsed_nodes=E,t.element.trigger("expanded-collapsed-nodes-changed",{expanded:S,collapsed:E})}}(g,!0)},_clear_hover_timer:function(){this.hover_timer&&(window.clearTimeout(this.hover_timer),this.hover_timer=null)},_open_preview:function(e){if(void 0!=e.exemplar){this._clear_hover_timer();var t=this.options.images[e.exemplar];this.target_image!=t&&(this.target_image=t,this.preview_image.hide(),this.preview.show(),this._display_image(t))}},_display_image:function(e){var n=this;if(e in n.options.image_cache){var o=(window.URL||window.webkitURL).createObjectURL(n.options.image_cache[e]);return n.preview_image.attr("src",o),void n.preview_image.show()}if(!n.login_open){n.login_open=!0;var r=(0,i.default)(e);n.remotes.get_remote({hostname:r.hostname(),title:"Login to "+r.hostname(),message:"Loading "+r.pathname(),cancel:function(){n.login_open=!1},success:function(o){var i=new XMLHttpRequest;i.open("GET",t.default+"remotes/"+o+"/file"+r.pathname(),!0),i.responseType="arraybuffer",i.onload=function(t){if(404==this.status||500==this.status)return n.remotes.delete_remote(r.hostname()),void n._open_images(images);if(400!=this.status){var o=new Uint8Array(this.response),i=new Blob([o],{type:this.getResponseHeader("content-type")});return n.options.image_cache[e]=i,void n._display_image(e)}console.log(this),console.log(this.getAllResponseHeaders());var a=this.getResponseHeader("slycat-message"),l=this.getResponseHeader("slycat-hint");a&&l?window.alert(a+"\n\n"+l):a?window.alert(a):window.alert("Error loading image "+this.image_uri+": "+this.statusText)},i.send(),n.login_open=!1}})}},_close_preview:function(e){var t=this;function n(){t.target_image=null,t.preview.hide(),t.preview_image.hide()}e?n():t.hover_timer=window.setTimeout(function(){n()},t.options.hover_timeout)},_set_color:function(){var t=this;this.container.selectAll("g.square rect").style("fill",function(n,o){var r=n["data-table-index"];if(null!=r){var i=t.options.color_array[r];return null!=i?t.options.colorscale(i):e("#color-switcher").colorswitcher("get_null_color")}return"black"}).classed("nullValue",function(e,n){return null!=e["data-table-index"]&&(null==e["data-table-index"]||null===t.options.color_array[e["data-table-index"]])})},_set_highlight:function(){var e=this,t=-e.options.square_size/2-e.options.square_border_size/2,n=-e.options.selected_square_size/2-e.options.selected_square_border_size/2,o="translate("+t+", "+t+")",r="translate("+n+", "+n+")";!function t(n){var o=!1;if(n.children){for(var r=0;r<n.children.length;r++)t(n.children[r])&&(o=!0);n.highlight=o}else if(n._children){for(var r=0;r<n._children.length;r++)t(n._children[r])&&(o=!0);n.highlight=o}else null!=n["data-table-index"]&&e.options.highlight.indexOf(n["data-table-index"])>-1?(n.highlight=!0,o=!0):(n.highlight=!1,o=!1);return o}(e.root),this.container.selectAll("g.square").classed("highlight",function(e,t){return!!e.highlight}),this.container.selectAll("g.square rect").attr("width",function(t){return t.highlight?e.options.selected_square_size:e.options.square_size}).attr("height",function(t){return t.highlight?e.options.selected_square_size:e.options.square_size}).style("stroke-width",function(t){return t.highlight?e.options.selected_square_border_size:e.options.square_border_size}).attr("transform",function(e){return e.highlight?r:o})},_handle_highlight:function(e,t,n){var r=function e(t){var n=[];if(t.children)for(var o=0;o<t.children.length;o++)null!=t.children[o]["data-table-index"]?n.push(t.children[o]["data-table-index"]):n=n.concat(e(t.children[o]));else if(t._children)for(var o=0;o<t._children.length;o++)null!=t._children[o]["data-table-index"]?n.push(t._children[o]["data-table-index"]):n=n.concat(e(t._children[o]));else null!=t["data-table-index"]&&n.push(t["data-table-index"]);return n}(e);if(t.ctrlKey||o.default.event.metaKey)if(e.highlight)for(var i=0;i<r.length;i++){var a=this.options.highlight.indexOf(r[i]);a>-1&&this.options.highlight.splice(a,1)}else for(i=0;i<r.length;i++)-1==this.options.highlight.indexOf(r[i])&&this.options.highlight.push(r[i]);else this.options.highlight=r;this._set_highlight(),this.element.trigger("selection-changed",[this.options.highlight])},_set_dendrogram_sort_order_state:function(){var e=this;e.sortControl.attr("title",function(t,n){return e.options.dendrogram_sort_order?"Inputs are sorted in dendrogram order":"Sort inputs in dendrogram order"}).toggleClass("selected",e.options.dendrogram_sort_order)},_set_hidden_simulations:function(){var e=this,t=[];!function t(n,o){var r=n["image-index"];null!=r&&(e.options.hidden_simulations.indexOf(r)>-1?n.selected=!1:(n.selected=!0,o.push({"node-index":n["node-index"],"image-index":n["image-index"],"data-table-index":n["data-table-index"]})));if(n.children)for(var i=0;i<n.children.length;i++)t(n.children[i],o);if(n._children)for(var i=0;i<n._children.length;i++)t(n._children[i],o)}(e.root,t),e.options.selected_nodes=e._getNodeIndexes(t),e._style_selected_nodes(),e._color_links(),e.element.trigger("node-selection-changed",{node:null,skip_bookmarking:!1,selection:t})},_style_selected_nodes:function(){this.container.selectAll(".node").classed("selected",function(e){return e.selected})},_color_links:function(){this.container.selectAll("path.link").attr("style",function(e){if(function e(t){if(t.selected)return!0;if(t.children){for(var n=0;n<t.children.length;n++)if(e(t.children[n]))return!0}else if(t._children)for(var n=0;n<t._children.length;n++)if(e(t._children[n]))return!0;return!1}(e.target))return e.source.selected?"stroke: black;":"stroke: #646464;"})},_getNodeIndexes:function(e){for(var t=[],n=null,o=0;o<e.length;o++)null!=(n=e[o]["node-index"])&&t.push(n);return t},resize_canvas:function(){this._set_cluster()},_setOption:function(e,t){this.options[e]=t,"cluster_data"==e?this._set_cluster():"color-options"==e?(this.options.color_array=t.color_array,this.options.colorscale=t.colorscale,this._set_color()):"colorscale"==e?this._set_color():"dendrogram_sort_order"==e?this._set_dendrogram_sort_order_state():"highlight"==e?(void 0==t&&(this.options.highlight=[]),this._set_highlight()):"hidden_simulations"==e&&this._set_hidden_simulations()}})}).call(this,n(1))},433:function(e,t,n){"use strict";(function(e){var t=i(n(15)),o=i(n(283));n(282),n(305),n(306),n(307),n(308),n(309),n(310),n(314);var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(287));function i(e){return e&&e.__esModule?e:{default:e}}e.widget("parameter_image.table",{options:{mid:null,aid:null,metadata:null,statistics:null,inputs:[],outputs:[],others:[],images:[],ratings:[],categories:[],"row-selection":[],"variable-selection":[],"sort-variable":null,"sort-order":null,"image-variable":null,"x-variable":null,"y-variable":null,colorscale:null,hidden_simulations:[]},_create:function(){var e=this;function t(e){return null==e?"&nbsp;":(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(e,n,r,i,a){return i.colorscale?"<div class='highlightWrapper"+(null==r?" null":"")+(o.default.hcl(i.colorscale(r)).l>50?" light":" dark")+"' style='background:"+i.colorscale(r)+"'>"+t(r)+"</div>":null==r?"<div class='highlightWrapper"+(null==r?" null":"")+"'>"+t(r)+"</div>":t(r)}function r(e,n,r,i,a){return i.colorscale?"<div class='highlightWrapper"+(null==r?" null":"")+(o.default.hcl(i.colorscale(r)).l>50?" light":" dark")+"' style='background:"+i.colorscale(r)+"'>"+t(r)+"</div>":null==r?"<div class='highlightWrapper"+(null==r?" null":"")+"'>"+t(r)+"</div>":t(r)}function i(t,n){e.data.set_sort(t,n),e.data.get_indices("sorted",e.options["row-selection"],function(o){e.grid.invalidate(),e.trigger_row_selection=!1,e.grid.setSelectedRows(o),e.grid.resetActiveCell(),o.length&&e.grid.scrollRowToTop(Math.min.apply(Math,o)),e.element.trigger("variable-sort-changed",[t,n])})}function a(t,n,o,r){var i={id:t,field:t,name:e.options.metadata["column-names"][t],toolTip:e.options.metadata["column-names"][t],sortable:!1,headerCssClass:n,cssClass:o,formatter:r,width:100,header:{buttons:[{cssClass:e.options["sort-variable"]==t?"ascending"==e.options["sort-order"]?"icon-sort-ascending":"icon-sort-descending":"icon-sort-off",tooltip:e.options["sort-variable"]==t&&"ascending"==e.options["sort-order"]?"Sort descending":"Sort ascending",command:e.options["sort-variable"]==t&&"ascending"==e.options["sort-order"]?"sort-descending":"sort-ascending"}]}};return e.options.images.indexOf(t)>-1?(i.headerCssClass+=" headerImage",i.header.buttons.push({cssClass:e.options["image-variable"]==t?"icon-image-on":"icon-image-off",tooltip:e.options["image-variable"]==t?"Current image variable":"Set as image variable",command:e.options["image-variable"]==t?"":"image-on"})):e.options.metadata["column-count"]-1!=t&&(i.headerCssClass+=" headerNumeric",i.header.buttons.push({cssClass:e.options["x-variable"]==t?"icon-x-on":"icon-x-off",tooltip:e.options["x-variable"]==t?"Current x variable":"Set as x variable",command:e.options["x-variable"]==t?"":"x-on"},{cssClass:e.options["y-variable"]==t?"icon-y-on":"icon-y-off",tooltip:e.options["y-variable"]==t?"Current y variable":"Set as y variable",command:e.options["y-variable"]==t?"":"y-on"})),i}for(var l in e.columns=[],e.columns.push(a(e.options.metadata["column-count"]-1,"headerSimId","rowSimId",n)),e.options.inputs)e.columns.push(a(e.options.inputs[l],"headerInput","rowInput",n));for(var l in e.options.outputs)e.columns.push(a(e.options.outputs[l],"headerOutput","rowOutput",n));for(var l in e.options.ratings)e.columns.push(a(e.options.ratings[l],"headerRating","rowRating",r));for(var l in e.options.categories)e.columns.push(a(e.options.categories[l],"headerCategory","rowCategory",r));for(var l in e.options.others)e.columns.push(a(e.options.others[l],"headerOther","rowOther",n));e.data=new e._data_provider({mid:e.options.mid,aid:e.options.aid,metadata:e.options.metadata,sort_column:e.options["sort-variable"],sort_order:e.options["sort-order"],inputs:e.options.inputs,outputs:e.options.outputs,indexOfIndex:e.options.metadata["column-count"]-1,hidden_simulations:e.options.hidden_simulations}),e.trigger_row_selection=!0,e.grid=new Slick.Grid(e.element,e.data,e.columns,{explicitInitialization:!0,enableColumnReorder:!1,editable:!0,editCommandHandler:e._editCommandHandler}),e.data.onDataLoaded.subscribe(function(t,n){for(var o=n.from;o<=n.to;o++)e.grid.invalidateRow(o);e.grid.render()});var s=new Slick.Plugins.HeaderButtons;s.onCommand.subscribe(function(t,n){var o=n.column,r=n.button,a=n.command,l=n.grid;if("sort-ascending"==a||"sort-descending"==a)for(var s in e.columns)e.columns[s].header.buttons[0].cssClass="icon-sort-off",e.columns[s].header.buttons[0].tooltip="Sort ascending",e.columns[s].header.buttons[0].command="sort-ascending",l.updateColumnHeader(e.columns[s].id);if("sort-ascending"==a)r.cssClass="icon-sort-ascending",r.command="sort-descending",r.tooltip="Sort descending",i(o.id,"ascending");else if("sort-descending"==a)r.cssClass="icon-sort-descending",r.command="sort-ascending",r.tooltip="Sort ascending",i(o.id,"descending");else if("image-on"==a){for(s=0;s<e.options.images.length;s++){var c=l.getColumnIndex(e.options.images[s]);e.columns[c].header.buttons[1].cssClass="icon-image-off",e.columns[c].header.buttons[1].tooltip="Set as image variable",e.columns[c].header.buttons[1].command="image-on",l.updateColumnHeader(e.columns[c].id)}r.cssClass="icon-image-on",r.command="",r.tooltip="Current image variable",e.element.trigger("images-selection-changed",o.id)}else if("x-on"==a){for(var s in e.columns)-1==e.options.images.indexOf(e.columns[s].id)&&e.options.metadata["column-count"]-1!=e.columns[s].id&&(e.columns[s].header.buttons[1].cssClass="icon-x-off",e.columns[s].header.buttons[1].tooltip="Set as x variable",e.columns[s].header.buttons[1].command="x-on",l.updateColumnHeader(e.columns[s].id));r.cssClass="icon-x-on",r.command="",r.tooltip="Current x variable",e.element.trigger("x-selection-changed",o.id)}else if("y-on"==a){for(var s in e.columns)-1==e.options.images.indexOf(e.columns[s].id)&&e.options.metadata["column-count"]-1!=e.columns[s].id&&(e.columns[s].header.buttons[2].cssClass="icon-y-off",e.columns[s].header.buttons[2].tooltip="Set as y variable",e.columns[s].header.buttons[2].command="y-on",l.updateColumnHeader(e.columns[s].id));r.cssClass="icon-y-on",r.command="",r.tooltip="Current y variable",e.element.trigger("y-selection-changed",o.id)}}),e.grid.registerPlugin(s),e.grid.registerPlugin(new Slick.AutoTooltips({enableForHeaderCells:!0})),e.grid.setSelectionModel(new Slick.RowSelectionModel),e.grid.onSelectedRowsChanged.subscribe(function(t,n){e.trigger_row_selection&&e.data.get_indices("unsorted",n.rows,function(t){e.options["row-selection"]=t,e.element.trigger("row-selection-changed",[t])}),e.trigger_row_selection=!0}),e.grid.onHeaderClick.subscribe(function(t,n){e._array_equal([n.column.field],e.options["variable-selection"])||-1!=e.options.images.indexOf(n.column.field)||(e.options["variable-selection"]=[n.column.field],e.element.trigger("variable-selection-changed",[e.options["variable-selection"]]))}),e._color_variables(e.options["variable-selection"]),e.grid.init(),e.data.get_indices("sorted",e.options["row-selection"],function(t){e.trigger_row_selection=!1,e.grid.setSelectedRows(t),e.grid.resetActiveCell(),t.length&&e.grid.scrollRowToTop(Math.min.apply(Math,t))})},resize_canvas:function(){this.grid.resizeCanvas()},update_data:function(){var e=this;e.data.invalidate(),e.grid.invalidate(),e.data.get_indices("sorted",e.options["row-selection"],function(t){e.trigger_row_selection=!1,e.grid.setSelectedRows(t),e.grid.resetActiveCell(),t.length&&e.grid.scrollRowToTop(Math.min.apply(Math,t))})},_setOption:function(e,t){var n=this;if("row-selection"==e)n.options[e]=t,n.data.get_indices("sorted",t,function(e){n.trigger_row_selection=!1,n.grid.setSelectedRows(e),n.grid.resetActiveCell(),e.length&&n.grid.scrollRowToTop(Math.min.apply(Math,e))});else if("variable-selection"==e){if(n._array_equal(n.options[e],t))return;n.options[e]=t,n._color_variables(t)}else"colorscale"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"x-variable"==e?(n.options[e]=t,n._set_selected_x()):"y-variable"==e?(n.options[e]=t,n._set_selected_y()):"image-variable"==e?(n.options[e]=t,n._set_selected_image()):"metadata"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"statistics"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"hidden_simulations"==e&&(n.options[e]=t,n.data.invalidate(),n.grid.invalidate())},_set_selected_x:function(){for(var e in this.columns)-1==this.options.images.indexOf(this.columns[e].id)&&this.options.metadata["column-count"]-1!=this.columns[e].id&&(this.columns[e].id==this.options["x-variable"]?(this.columns[e].header.buttons[1].cssClass="icon-x-on",this.columns[e].header.buttons[1].tooltip="Current x variable",this.columns[e].header.buttons[1].command=""):(this.columns[e].header.buttons[1].cssClass="icon-x-off",this.columns[e].header.buttons[1].tooltip="Set as x variable",this.columns[e].header.buttons[1].command="x-on"),this.grid.updateColumnHeader(this.columns[e].id))},_set_selected_y:function(){for(var e in this.columns)-1==this.options.images.indexOf(this.columns[e].id)&&this.options.metadata["column-count"]-1!=this.columns[e].id&&(this.columns[e].id==this.options["y-variable"]?(this.columns[e].header.buttons[2].cssClass="icon-y-on",this.columns[e].header.buttons[2].tooltip="Current y variable",this.columns[e].header.buttons[2].command=""):(this.columns[e].header.buttons[2].cssClass="icon-y-off",this.columns[e].header.buttons[2].tooltip="Set as y variable",this.columns[e].header.buttons[2].command="y-on"),this.grid.updateColumnHeader(this.columns[e].id))},_set_selected_image:function(){for(var e=0;e<this.options.images.length;e++){var t=this.grid.getColumnIndex(this.options.images[e]);this.columns[t].id==this.options["image-variable"]?(this.columns[t].header.buttons[1].cssClass="icon-image-on",this.columns[t].header.buttons[1].tooltip="Current image variable",this.columns[t].header.buttons[1].command=""):(this.columns[t].header.buttons[1].cssClass="icon-image-off",this.columns[t].header.buttons[1].tooltip="Set as image variable",this.columns[t].header.buttons[1].command="image-on"),this.grid.updateColumnHeader(this.columns[t].id)}},_color_variables:function(t){var n=this.grid.getColumns();for(var o in n){var r=n[o];null!==this.options.colorscale&&-1!=e.inArray(r.id,t)?(r.colorscale=this.options.colorscale,r.cssClass=r.cssClass.split(" ")[0]+" highlight"):(r.colorscale=null,r.cssClass=r.cssClass.split(" ")[0])}this.grid.invalidate()},_editCommandHandler:function(e,t,n){console.log("editCommandHandler called"),n.execute()},_data_provider:function(n){var i=this;i.mid=n.mid,i.aid=n.aid,i.metadata=n.metadata,i.sort_column=n.sort_column,i.sort_order=n.sort_order,i.inputs=n.inputs,i.outputs=n.outputs,i.analysis_columns=i.inputs.concat(i.outputs),i.indexOfIndex=n.indexOfIndex,i.hidden_simulations=n.hidden_simulations,i.ranked_indices={},i.pages={},i.pages_in_progress={},i.page_size=50,i.onDataLoaded=new Slick.Event,i.getLength=function(){return i.metadata["row-count"]},i.getItem=function(n){var o=i.metadata["column-count"],r=Math.floor(n/i.page_size),a=r*i.page_size;if(i.pages_in_progress[r])return null;if(!(r in i.pages)){i.pages_in_progress[r]=!0;var l=a,s=(r+1)*i.page_size,c="";if(null!==i.sort_column&&null!==i.sort_order){var u="a"+i.sort_column,A=i.sort_order;"ascending"==A?A="asc":"descending"==A&&(A="desc"),i.sort_column==i.metadata["column-count"]-1&&(u="index(0)"),c="/order: rank("+u+', "'+A+'")'}return e.ajax({type:"GET",url:t.default+"models/"+i.mid+"/arraysets/"+i.aid+"/data?hyperchunks=0/0:"+(o-1)+"|index(0)"+c+"/"+l+":"+s,success:function(e){i.pages[r]=[];for(var t=0;t<e[0].length;t++){for(var n={},a=0;a!=o;++a)n[a]=e[a][t];i.pages[r].push(n)}i.pages_in_progress[r]=!1,i.onDataLoaded.notify({from:l,to:s})},error:function(e,t,n){console.log("error",e,t,n)}}),null}return i.pages[r][n-a]},i.getItemMetadata=function(t){var n=Math.floor(t/i.page_size);if(i.pages_in_progress[n]||!(n in i.pages))return null;for(var o=this.getItem(t),r=i.analysis_columns.length,a="",l=0;l!=r;l++)null==o[i.analysis_columns[l]]&&(a+="nullRow ");return-1!=e.inArray(o[i.indexOfIndex],i.hidden_simulations)&&(a+="hiddenRow "),""!=a?{cssClasses:a}:null},i.set_sort=function(e,t){e==i.sort_column&&t==i.sort_order||(i.sort_column=e,i.sort_order=t,i.pages={})},i.get_indices=function(e,n,a){if(0!=n.length)if(null==i.sort_column||null==i.sort_order)a(n);else if(i.ranked_indices[i.sort_column]){var l=i.ranked_indices[i.sort_column];if("descending"==i.sort_order){for(var s=[],c=0;c<l.length;c++)s.push(l[c]);l=s.reverse()}var u=[];for(c=0;c<n.length;c++)"unsorted"==e?u.push(l[n[c]]):"sorted"==e&&u.push(l.indexOf(n[c]));a(new Int32Array(u))}else if(i.sort_column==i.metadata["column-count"]-1)i.ranked_indices[i.sort_column]=new Int32Array(o.default.range(i.metadata["row-count"])),i.get_indices(e,n,a);else{var A=new XMLHttpRequest;A.open("GET",t.default+"models/"+i.mid+"/arraysets/data-table/data?hyperchunks=0/rank(a"+i.sort_column+',"asc")/...&byteorder='+(r.is_little_endian()?"little":"big")),A.responseType="arraybuffer",A.direction=e,A.rows=n,A.callback=a,A.onload=function(e){for(var t=[],n=new Int32Array(this.response),o=0;o<n.length;o+=2)t.push(n[o]);i.ranked_indices[i.sort_column]=new Int32Array(t),i.get_indices(this.direction,this.rows,this.callback)},A.send()}else a([])},i.invalidate=function(){i.pages={}}},_array_equal:function(t,n){return 0==e(t).not(n).length&&0==e(n).not(t).length}})}).call(this,n(1))},434:function(e,t,n){"use strict";(function(e){var t=function(e){return e&&e.__esModule?e:{default:e}}(n(283));n(282),e.widget("slycat.colorswitcher",{options:{colormap:"day"},_create:function(){var n=this;this.color_maps={night:{label:"Night",background:t.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.5",colors:[t.default.rgb(59,76,192),t.default.rgb(68,90,204),t.default.rgb(77,104,215),t.default.rgb(87,117,225),t.default.rgb(98,130,234),t.default.rgb(108,142,241),t.default.rgb(119,154,247),t.default.rgb(130,165,251),t.default.rgb(141,176,254),t.default.rgb(152,185,255),t.default.rgb(163,194,255),t.default.rgb(174,201,253),t.default.rgb(184,208,249),t.default.rgb(194,213,244),t.default.rgb(204,217,238),t.default.rgb(213,219,230),t.default.rgb(221,221,221),t.default.rgb(229,216,209),t.default.rgb(236,211,197),t.default.rgb(241,204,185),t.default.rgb(245,196,173),t.default.rgb(247,187,160),t.default.rgb(247,177,148),t.default.rgb(247,166,135),t.default.rgb(244,154,123),t.default.rgb(241,141,111),t.default.rgb(236,127,99),t.default.rgb(229,112,88),t.default.rgb(222,96,77),t.default.rgb(213,80,66),t.default.rgb(203,62,56),t.default.rgb(192,40,47),t.default.rgb(180,4,38)]},day:{label:"Day",background:t.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[t.default.rgb(100,108,234),t.default.rgb(115,118,240),t.default.rgb(128,128,244),t.default.rgb(140,138,248),t.default.rgb(151,147,250),t.default.rgb(161,155,251),t.default.rgb(169,163,251),t.default.rgb(177,170,250),t.default.rgb(184,177,248),t.default.rgb(189,182,245),t.default.rgb(193,187,241),t.default.rgb(197,191,236),t.default.rgb(199,194,230),t.default.rgb(200,196,224),t.default.rgb(201,198,216),t.default.rgb(200,199,208),t.default.rgb(198,198,198),t.default.rgb(210,197,195),t.default.rgb(220,194,192),t.default.rgb(229,191,187),t.default.rgb(236,186,181),t.default.rgb(243,181,175),t.default.rgb(248,175,168),t.default.rgb(251,168,160),t.default.rgb(254,159,152),t.default.rgb(255,150,143),t.default.rgb(255,140,133),t.default.rgb(253,129,123),t.default.rgb(250,117,112),t.default.rgb(246,105,101),t.default.rgb(240,91,90),t.default.rgb(233,75,78),t.default.rgb(225,57,66)]},rainbow:{label:"Rainbow Night",background:t.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.6",colors:[t.default.rgb(0,0,255),t.default.rgb(0,255,255),t.default.rgb(255,255,0),t.default.rgb(255,0,0)]},rainbow_day:{label:"Rainbow Day",background:t.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[t.default.rgb(0,0,255),t.default.rgb(0,255,255),t.default.rgb(255,255,0),t.default.rgb(255,0,0)]}},this.container=e("<div>").appendTo(this.element).append('<span class="label">Colors: </span>'),e.each(this.color_maps,function(t,o){e("<span>").addClass("color").toggleClass("selected",t==n.options.colormap).appendTo(n.container).attr("data-colormap",t).html(o.label).click(function(){e(this).hasClass("selected")||(n.options.colormap=this.getAttribute("data-colormap"),n.container.find(".color").removeClass("selected"),e(this).addClass("selected"),n.element.trigger("colormap-changed",[n.options.colormap]))})})},_setOption:function(e,t){this.options[e]=t,"colormap"==e&&(this.container.find(".color").removeClass("selected"),this.container.find("[data-colormap='"+this.options.colormap+"']").addClass("selected"))},get_background:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].background},get_null_color:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].null_color},get_opacity:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].opacity},get_color_scale:function(e,n,o){void 0===e&&(e=this.options.colormap),void 0===n&&(n=0),void 0===o&&(o=1);var r=[],i=t.default.scale.linear().domain([0,this.color_maps[e].colors.length-1]).range([n,o]);for(var a in this.color_maps[e].colors)r.push(i(a));return t.default.scale.linear().domain(r).range(this.color_maps[e].colors)},get_color_map:function(e,t,n){return this.get_color_scale(e,t,n)},get_color_scale_ordinal:function(e,n){void 0===e&&(e=this.options.colormap),void 0===n&&(n=[0,1]);for(var o=t.default.scale.ordinal().domain(n).rangePoints([0,100],0),r=this.get_color_scale(e,0,100),i=[],a=0;a<n.length;a++)i.push(r(o(n[a])));return t.default.scale.ordinal().domain(n).range(i)},get_color_map_ordinal:function(e,t){return this.get_color_scale_ordinal(e,t)},get_gradient_data:function(e){void 0===e&&(e=this.options.colormap);for(var t=this.color_maps[e].colors,n=t.length,o=[],r=0;r<n;r++)o.push({offset:r*(100/(n-1)),color:t[n-1-r]});return o},setUpColorMapsForAllColumns:function(e,t){for(var n=0;n!=t.length;++n)t[n].colorMap=this.get_color_scale(e,t[n].columnMin,t[n].columnMax)}})}).call(this,n(1))}}]);
//# sourceMappingURL=ui_parameter_image_plus_module.js.map